           @font-face { font-family: 'bulangni'; src: url('') format('truetype'); font-weight: normal; font-style: normal; font-display: swap; }
        :root { --screen-width: 350px; --screen-height: 650px; --secondary-bg: #ffffff; --border-color: #e0e0e0; --text-primary: #1f1f1f; --text-secondary: #8a8a8a; --accent-color: #007bff; }
        html {
            -webkit-text-size-adjust: 100%;
            height: 100%; 
        }
        body {
            margin: 0;
            font-family: 'bulangni', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            font-weight: normal;
            background-color: #f0f2f5;
            height: 100%; 
            overflow: hidden; 
        }
        #phone-screen {
            width: 100%;
            height: 100vh; 
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            background-color: #ffffff; 
        }
        #chat-input-area {
            flex-shrink: 0;
            padding: 8px;
            padding-bottom: calc(8px + env(safe-area-inset-bottom)); 
            background-color: rgba(247, 247, 247, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
#status-bar {
    display: none;
    padding: 0 20px;
    height: 40px;
    color: white;
    background-color: transparent; 
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    box-sizing: border-box;
    z-index: 100;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
    pointer-events: none; 
}
#phone-screen.status-bar-visible #status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
        .header, .qzone-header {
            position: relative;
            z-index: 15;
            flex-shrink: 0;
            padding: 15px 20px;
            padding-top: calc(15px + env(safe-area-inset-top)); 
            background-color: rgba(247, 247, 247, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
        }
        #status-bar { 
            display: none; 
        }
        #status-bar-time { font-weight: 600; }
        .battery-container { display: flex; align-items: center; gap: 5px; }
        .battery-icon { width: 25px; height: 12px; border: 1px solid white; border-radius: 3px; position: relative; padding: 1px; }
        .battery-icon::after { content: ''; position: absolute; right: -3px; top: 2px; width: 2px; height: 6px; background-color: white; border-radius: 0 1px 1px 0; }
        .battery-level { height: 100%; background-color: white; border-radius: 1px; transition: width 0.5s ease; }
        .battery-container.charging .battery-level { background-color: #4cd964; animation: charge-breath 2s infinite; }
        .battery-container.charging .battery-text { color: #4cd964; }
        @keyframes charge-breath { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .screen { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: flex; flex-direction: column; overflow: hidden; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .screen.active { opacity: 1; visibility: visible; z-index: 1; }
        .header { position: relative; z-index: 15; flex-shrink: 0; padding: 15px 20px; padding-top: 45px; background-color: rgba(247, 247, 247, 0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; font-size: 18px; font-weight: 600; }
        .header .header-actions { 
    display: flex; 
    align-items: center; 
    gap: 15px; 
    position: relative; /* Êñ∞Â¢ûÔºöÂàõÂª∫Â†ÜÂè†‰∏ä‰∏ãÊñá */
    z-index: 1;         /* Êñ∞Â¢ûÔºöÁ°Æ‰øùÂÆÉÂú®Ê†áÈ¢òspan‰πã‰∏ä */
}
        .header .back-btn, .header .action-btn { font-size: 24px; cursor: pointer; width: 30px; text-align: center; color: var(--accent-color); display: flex; align-items: center; justify-content: center; }
        .header .action-btn {
            font-size: 16px; 
            font-weight: 600; 
        }
        .header .action-btn img { height: 26px; }
        .header .save-btn { font-size: 16px; color: var(--accent-color); font-weight: 600; cursor: pointer; }
        #home-screen {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            box-sizing: border-box;
            background-size: cover;
            background-position: center;
            padding-left: 20px;
            padding-right: 20px;
        }
        #clock-container {
            text-align: center;
            color: white;
            text-shadow: 0 3px 8px rgba(0,0,0,0.4);
            margin-bottom: 20px;
            flex-shrink: 0;
            margin-top: calc(60px + env(safe-area-inset-top));
        }
        #app-grid {
            margin-top: auto; 
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
            padding: 20px;
            margin-bottom: calc(30px + env(safe-area-inset-bottom)); 
        }
        #main-time {
            font-size: 88px; 
            font-weight: 600; 
            letter-spacing: -2px; 
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;
        }
        #main-date { 
            font-size: 22px; 
            font-weight: normal; 
        }
        #app-grid { margin-top: auto; display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; padding: 20px; }
        .app-row { display: flex; justify-content: center; gap: 25px; width: 100%; }
        .app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.5); font-size: 14px; font-weight: 500; text-align: center; }
        .app-icon .icon-bg { width: 65px; height: 65px; border-radius: 18px; background-color: var(--secondary-bg); display: flex; justify-content: center; align-items: center; font-size: 32px; margin-bottom: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.15); transition: transform 0.2s ease; overflow: hidden; }
        .app-icon:active .icon-bg { transform: scale(0.9); }
        .app-icon .icon-bg img { width: 100%; height: 100%; object-fit: cover; }
        .app-icon .label { color: white; }
        .form-container, .list-container { padding: 20px; overflow-y: auto; flex-grow: 1; display:flex; flex-direction: column; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-secondary); }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        .form-group textarea { min-height: 80px; resize: vertical; }
        #world-book-content-input { height: calc(100% - 120px); }
        .form-button { width: 100%; padding: 15px; background-color: var(--accent-color); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        .form-button-secondary { background-color: #f0f0f0; color: var(--text-primary); border: 1px solid var(--border-color); }
        #wallpaper-screen .form-container { align-items: center; }
        #wallpaper-preview { width: 180px; height: 320px; border: 2px dashed var(--border-color); background-color: #f0f2f5; margin-bottom: 20px; background-size: cover; background-position: center; border-radius: 10px; display: flex; justify-content: center; align-items: center; color: var(--text-secondary); }
        #wallpaper-upload-input { display: none; }
        #world-book-list {
            flex-grow: 1;
            overflow-y: auto;
            background-color: var(--secondary-bg);
            padding-top: 80px;
            margin-top: -80px;
        }
        #chat-list {
            flex-grow: 1;
            background-color: var(--secondary-bg);
            padding-top: 80px; 
            padding-bottom: 90px; 
            box-sizing: border-box;
        }
        .list-item { display: flex; flex-direction: column; padding: 12px 20px; cursor: pointer; border-bottom: 1px solid var(--border-color); }
        .list-item:hover { background-color: #f5f5f5; }
        .list-item .item-title { font-weight: 500; font-size: 16px; margin-bottom: 5px; }
        .list-item .item-content { font-size: 14px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .chat-list-item { display: flex; align-items: center; padding: 10px 15px; cursor: pointer; border-bottom: 1px solid var(--border-color); position: relative; }
        .chat-list-item:hover { background-color: #f5f5f5; }
        .chat-list-item .avatar { width: 45px; height: 45px; border-radius: 50%; margin-right: 12px; object-fit: cover; background-color: #ccc; }
        .chat-list-item .info { flex-grow: 1; overflow: hidden; }
        .chat-list-item .name-line { display: flex; align-items: center; gap: 6px; margin-bottom: 2px; }
        .chat-list-item .name { font-weight: 500; color: var(--text-primary); }
        .chat-list-item .group-tag { font-size: 10px; color: var(--accent-color); background-color: #e7f3ff; padding: 2px 6px; border-radius: 4px; font-weight: bold; flex-shrink: 0; }
        .chat-list-item .last-msg { font-size: 13px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 180px; }
        #chat-interface-screen { background-size: cover; background-position: center; position: relative; }
        #selection-cancel-btn, #selection-delete-btn { font-size: 16px; color: var(--accent-color); cursor: pointer; padding: 5px; }
        #selection-delete-btn { color: #ff3b30; }
        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden; 
            padding: 10px 15px; 
            padding-top: 110px;
            margin-top: -80px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-sizing: border-box; 
        }
        #load-more-btn { text-align: center; padding: 10px; color: var(--accent-color); font-size: 14px; cursor: pointer; background-color: transparent; border: none; width: 100%; }
        #load-more-btn:hover { text-decoration: underline; }
        .sender-name { font-size: 11px; color: #666; margin-bottom: 3px; }
        .message-wrapper.ai .sender-name {
            margin-left: 50px; 
            margin-bottom: 3px;
            position: absolute; 
            top: -16px;       
            left: 0;
        }
        .message-wrapper {
            display: flex;          
            gap: 8px;               
            align-items: flex-end;  
            position: relative;
            max-width: 90%;         
        }
        .message-wrapper.ai {
            align-self: flex-start;
            flex-direction: row; 
        }
        .message-wrapper.user {
            align-self: flex-end;
            flex-direction: row-reverse; 
        }
        .message-bubble {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            max-width: 100%;
            min-width: 0; 
        }
        .timestamp {
            font-size: 11px;
            color: #999;
            text-shadow: 0 0 3px rgba(255,255,255,0.6);
            white-space: nowrap; 
            margin-bottom: 5px;  
            flex-shrink: 0;      
        }
        .message-bubble.selected::after { content: '‚úî'; position: absolute; left: -10px; top: 50%; transform: translateY(-50%); background-color: var(--accent-color); color: white; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; }
        .message-bubble.user.selected::after { left: auto; right: -10px; }
        .message-bubble.user { flex-direction: row-reverse; }
        #typing-indicator { align-self: flex-start; display: none; margin: 0 10px 10px; color: var(--text-secondary); }
        #chat-list-bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 15;
            display: flex;
            border-top: 1px solid var(--border-color);
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding-bottom: env(safe-area-inset-bottom);
        }
        #chat-input-main-row { display: flex; align-items: flex-end; gap: 8px; width: 100%; }
#chat-input {
    flex-grow: 1;
    border: none;
    padding: 10px 15px;
    border-radius: 20px;
    background-color: var(--secondary-bg);
    font-size: 16px;
    height: 40px; 
    resize: none;
    overflow-y: auto; 
    box-sizing: border-box; 
}
        .action-button { border: none; color: white; border-radius: 20px; cursor: pointer; font-weight: 600; font-size: 14px; flex-shrink: 0; }
        #send-btn { background-color: var(--accent-color); height: 40px; padding: 0 15px;}
        .modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.4); display: none; justify-content: center; align-items: center; z-index: 100; }
        .modal.visible { display: flex; }
        .modal-content { width: 90%; max-height: 90%; background-color: white; border-radius: 15px; display: flex; flex-direction: column; }
        .modal-header { padding: 15px; font-weight: 600; border-bottom: 1px solid var(--border-color); text-align: center; display: flex; justify-content: space-between; align-items: center; }
        .modal-body { padding: 15px; overflow-y: auto; }
        .modal-footer { padding: 15px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-around; }
        .modal-footer button { width: 45%; padding: 12px; border-radius: 8px; border: 1px solid var(--accent-color); cursor: pointer; font-size: 16px; }
        .modal-footer .save { background-color: var(--accent-color); color: white; }
        .modal-footer .cancel { background-color: white; color: var(--accent-color); }
        .avatar-upload { display: flex; align-items: center; gap: 15px; }
        .avatar-upload img { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; background-color: #eee; }
        .avatar-upload button { padding: 8px 12px; border: 1px solid #ccc; background-color: #f0f0f0; border-radius: 5px; cursor: pointer; }
        #open-persona-library-btn { font-size: 14px; padding: 6px 10px; margin-left: 0; }
        .avatar-upload input[type="file"] { display: none; }
        .theme-selector label { display: inline-flex; align-items: center; margin-right: 15px; margin-bottom: 5px; cursor: pointer; }
        #reset-theme-btn { background: none; border: 1px solid #ccc; color: #555; font-size: 12px; padding: 2px 8px; border-radius: 5px; cursor: pointer; margin-left: 10px; }
        #group-members-settings { display: flex; overflow-x: auto; padding-bottom: 10px; gap: 15px; }
        .member-editor { text-align: center; cursor: pointer; }
        .member-editor img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; background-color: #eee; margin-bottom: 5px; }
        .member-editor .member-name { font-size: 12px; }
        #notification-bar { position: absolute; top: 40px; left: 50%; width: 90%; z-index: 500; background-color: rgba(250, 250, 250, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 16px; padding: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 12px; cursor: pointer;     transform: translateX(-50%) translateY(-150%); 
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            visibility: hidden;
        }
        #notification-bar.visible {
            transform: translateX(-50%) translateY(0);
            visibility: visible;
        }
        #notification-avatar { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; }
        #notification-content .name { font-weight: 600; font-size: 15px; color: #000; }
        #notification-content .message { font-size: 14px; color: #555; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
        .sticker-image { max-width: 100px; max-height: 100px; display: block; object-fit: contain; }
        #chat-input-actions-top { display: flex; gap: 8px; padding: 0 5px; }
        .chat-action-icon-btn { font-size: 24px; padding: 0; width: 38px; height: 38px; line-height: 38px; text-align: center; border-radius: 50%; background-color: rgba(255, 255, 255, 0.5); color: var(--text-primary); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border: 1px solid rgba(0,0,0,0.05); cursor: pointer; display:flex; justify-content:center; align-items:center; }
        
        /* ÊöÇÂÅúË∞ÉÁî®ÊåâÈíÆÊ†∑Âºè */
        #stop-api-call-btn {
            background-color: rgba(255, 59, 48, 0.1);
            border: 1px solid rgba(255, 59, 48, 0.3);
            color: #ff3b30;
            transition: all 0.3s ease;
        }
        #stop-api-call-btn:hover {
            background-color: rgba(255, 59, 48, 0.2);
            border-color: rgba(255, 59, 48, 0.5);
        }
        #stop-api-call-btn:active {
            transform: scale(0.95);
        }
        #stop-api-call-btn.active {
            background-color: rgba(255, 59, 48, 0.3);
            animation: pulse-stop 1.5s ease-in-out infinite;
        }
        @keyframes pulse-stop {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        #sticker-panel { position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; background-color: rgba(242, 242, 247, 0.85); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-top: 1px solid var(--border-color); border-radius: 20px 20px 0 0; z-index: 200; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); visibility: hidden; }
        #sticker-panel.visible { transform: translateY(0); visibility: visible; }
        #sticker-panel-header { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; border-bottom: 1px solid var(--border-color); }
        #sticker-panel-header .title { font-weight: 600; }
        #sticker-panel-header .panel-btn { font-size: 16px; padding: 5px 10px; cursor: pointer; color: var(--accent-color); }
        #sticker-grid { flex-grow: 1; overflow-y: auto; padding: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; }
.sticker-item {
    position: relative;
    display: flex;
    flex-direction: column; 
    align-items: center;    
    gap: 6px;               
    cursor: pointer;
}
.sticker-image-container {
    width: 100%;
    aspect-ratio: 1 / 1;    
    background-color: white;
    border-radius: 10px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.sticker-name {
    font-size: 12px;           
    color: var(--text-secondary); 
    width: 100%;               
    text-align: center;        
    white-space: nowrap;       
    overflow: hidden;          
    text-overflow: ellipsis;   
}
        .sticker-item .delete-btn { display: none; position: absolute; top: -5px; right: -5px; width: 20px; height: 20px; background-color: #ff3b30; color: white; border-radius: 50%; text-align: center; line-height: 20px; font-size: 14px; cursor: pointer; border: 2px solid white; }
        #input-actions-wrapper { position: static; display: flex; align-items: flex-end; gap: 8px; flex-shrink: 0; }
        #wait-reply-btn { position: static; bottom: auto; right: auto; width: auto; height: 40px; padding: 0 10px; border-radius: 20px; display: flex; align-items: center; justify-content: center; background-color: rgba(255, 255, 255, 0.6); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border: 1px solid rgba(0,0,0,0.08); box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: opacity 0.2s, transform 0.1s; cursor: pointer;}
        #wait-reply-btn:hover { opacity: 0.8; }
        #wait-reply-btn:active { transform: scale(0.9); }
        #wait-reply-btn img { height: 22px; display: block; margin: auto; }
        .chat-image { max-width: 100%; border-radius: 10px; display: block; }
        .message-bubble.has-image .content { padding: 5px; }
        #custom-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: none; align-items: center; justify-content: center; z-index: 10100; opacity: 0; transition: opacity 0.2s ease-in-out; }
        #custom-modal-overlay.visible { display: flex; opacity: 1; }
        #custom-modal { background-color: var(--secondary-bg); width: 280px; border-radius: 14px; box-shadow: 0 4px 20px rgba(0,0,0,0.2); display: flex; flex-direction: column; transform: scale(0.95); transition: transform 0.2s ease-in-out; }
        #custom-modal-overlay.visible #custom-modal { transform: scale(1); }
        .custom-modal-header { padding: 16px; font-size: 17px; font-weight: 600; text-align: center; }
        .custom-modal-body { padding: 0 16px 16px; text-align: center; font-size: 14px; color: #333; line-height: 1.5; }
        .custom-modal-body p { margin: 0; margin-bottom: 12px; }
        .custom-modal-body input {
            width: 100%;
            padding: 8px 12px; 
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 16px; 
            box-sizing: border-box;
        }
        .custom-modal-footer { border-top: 1px solid #dbdbdb; display: flex; }
        .custom-modal-footer button { flex: 1; background: none; border: none; padding: 12px; font-size: 17px; cursor: pointer; color: var(--accent-color); }
        .custom-modal-footer button:first-child { border-right: 1px solid #dbdbdb; }
        .custom-modal-footer .confirm-btn { font-weight: 600; }
        .custom-modal-footer .confirm-btn.btn-danger { color: #ff3b30; }
        #preset-actions-modal .custom-modal-footer { flex-direction: column; }
        #preset-actions-modal .custom-modal-footer button { width: 100%; border: none; border-bottom: 1px solid #dbdbdb; padding: 14px; font-size: 18px; }
        #preset-actions-modal .custom-modal-footer button:last-child { border-bottom: none; }
        .custom-multiselect {
            position: relative;
            -webkit-user-select: none; 
            user-select: none;
        }
        .select-box { display: flex; align-items: center; width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; box-sizing: border-box; background-color: var(--secondary-bg); cursor: pointer; }
        .select-box .selected-options-text { flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-primary); }
        .select-box .arrow-down { margin-left: auto; font-size: 10px; color: var(--text-secondary); transition: transform 0.2s; }
        .select-box.expanded .arrow-down { transform: rotate(180deg); }
       .checkboxes-container {
    display: none;
    position: absolute;
    top: 100%; 
    margin-top: 5px; 
    left: 0;
    right: 0;
    max-height: 150px;
    overflow-y: auto;
    background-color: var(--secondary-bg); /* <-- ‰øÆÊîπÂêé */
    border: 1px solid var(--border-color);
    border-radius: 8px;
    z-index: 101;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
        .checkboxes-container.visible { display: block; }
        .checkboxes-container label { display: block; padding: 10px 12px; cursor: pointer; font-weight: normal; color: var(--text-primary); }
        .checkboxes-container label {
            display: block;
            padding: 12px 15px; 
            cursor: pointer;
            font-weight: normal;
            color: var(--text-primary);
            font-size: 15px; 
        }
        .checkboxes-container input { margin-right: 10px; vertical-align: middle; }
        .bg-upload-container { display: flex; align-items: center; gap: 10px; margin-top: 8px; flex-wrap: wrap; }
        .bg-preview-img { max-width: 120px; max-height: 80px; border-radius: 8px; border: 1px solid var(--border-color); object-fit: cover; display: none; }
        #remove-bg-btn { padding: 8px 12px; border: 1px solid #ff3b30; color: #ff3b30; background-color: var(--secondary-bg); border-radius: 5px; cursor: pointer; font-size: 14px; display: none; }
        .ai-generated-image { max-width: 180px; border-radius: 12px; display: block; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .ai-generated-image:hover { transform: scale(1.05); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        
        /* RealImag/NovelAIÂõæÁâáÂú®ÁßÅËÅä/Áæ§ËÅäÊ∂àÊÅØÊ∞îÊ≥°ÈáåÁöÑÊ†∑Âºè */
        .realimag-image {
            max-width: 250px;
            max-height: 250px;
            width: auto;
            height: auto;
            display: block;
            border-radius: 10px;
            object-fit: cover;
            background-color: #f8f8f8;
            min-width: 100px;
            min-height: 100px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .realimag-image:hover {
            transform: scale(1.02);
        }
        
        .message-bubble.is-realimag .content {
            padding: 5px;
            background: transparent;
            box-shadow: none;
            border: none;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
        
        .voice-message-body { display: flex; align-items: center; cursor: pointer; padding: 8px 12px; min-width: 80px; max-width: 200px; }
        .message-bubble.user .voice-message-body { color: #1a3d00; flex-direction: row-reverse; }
        .message-bubble.ai .voice-message-body { color: var(--text-primary); }
        .voice-waveform { display: flex; align-items: center; height: 20px; gap: 2px; flex-grow: 1; margin: 0 10px; }
        .voice-waveform div { width: 3px; background-color: currentColor; border-radius: 2px; animation: wave-quiet 1.5s ease-in-out infinite; }
        @keyframes wave-quiet { 0%, 100% { height: 2px; } 50% { height: 10px; } }
        .voice-waveform div:nth-child(2) { animation-delay: 0.2s; } .voice-waveform div:nth-child(3) { animation-delay: 0.4s; } .voice-waveform div:nth-child(4) { animation-delay: 0.6s; } .voice-waveform div:nth-child(5) { animation-delay: 0.8s; }
        .voice-duration {
            font-size: var(--chat-font-size, 13px);
            font-weight: 500;
            color: var(--text-secondary);
        }
        .message-bubble.user .voice-duration { color: #3e6224; }
        .message-bubble .content {
            position: relative;
            font-size: var(--chat-font-size, 16px);
            padding: 8px 12px;
            line-height: 1.5;
            word-break: break-word; 
        }
        .message-bubble.user .content { background-color: rgba(255, 255, 255, 0.75); color: #585858; border-radius: 8px 2px 8px 8px; }
        .message-bubble.ai .content { background-color: rgba(255, 255, 255, 0.7); color: #585858; border-radius: 2px 8px 8px 8px; }
        .message-bubble::after {
            content: "";
            position: absolute;
            width: 20px;  
            height: 20px; 
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 1; 
            z-index: 1;
        }
        #chat-messages[data-theme="pink_blue"] .message-bubble.user .content { background-color: #fff0f6; color: #432531; }
        #chat-messages[data-theme="pink_blue"] .message-bubble.ai .content { background-color: #eff7ff; color: #263a4e; }
        #chat-messages[data-theme="blue_white"] .message-bubble.user .content { background-color: #eff7ff; color: #263a4e; }
        #chat-messages[data-theme="blue_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="purple_yellow"] .message-bubble.user .content { background-color: #faf7ff; color: #827693; }
        #chat-messages[data-theme="purple_yellow"] .message-bubble.ai .content { background-color: #fffde4; color: #5C4033; }
        #chat-messages[data-theme="black_white"] .message-bubble.user .content { background-color: #343a40; color: #f8f9fa; }
        #chat-messages[data-theme="black_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #343a40; }
        #chat-messages[data-theme="yellow_white"] .message-bubble.user .content { background-color: #FFEB3B; color: #5D4037; }
        #chat-messages[data-theme="yellow_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="red_black"] .message-bubble.user .content { background-color: #C62828; color: #FFFFFF; }
        #chat-messages[data-theme="red_black"] .message-bubble.ai .content { background-color: #212121; color: #FFFFFF; }
        #chat-messages[data-theme="blue_yellow"] .message-bubble.user .content { background-color: #A0D2EB; color: #153243; }
        #chat-messages[data-theme="blue_yellow"] .message-bubble.ai .content { background-color: #FEF9E7; color: #5D4037; }
        #chat-messages[data-theme="pink_yellow"] .message-bubble.user .content { background-color: #fff0f6; color: #432531; }
        #chat-messages[data-theme="pink_yellow"] .message-bubble.ai .content { background-color: #FEF9E7; color: #5D4037; }
        #chat-messages[data-theme="pink_purple"] .message-bubble.user .content { background-color: #fff0f6; color: #a78396; }
        #chat-messages[data-theme="pink_purple"] .message-bubble.ai .content { background-color: #faf7ff; color: #827693; }
        #chat-messages[data-theme="gray_white"] .message-bubble.user .content { background-color: #e9ecef; color: #495057; }
        #chat-messages[data-theme="gray_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        
        /* ËÆ∞ÂøÜÂ∫ìÊ†∑Âºè */
        .memory-archive-item {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .memory-archive-info {
            flex-grow: 1;
        }
        .memory-archive-name {
            font-weight: 500;
            font-size: 15px;
            margin-bottom: 4px;
        }
        .memory-archive-date {
            font-size: 12px;
            color: var(--text-secondary);
        }
        .memory-archive-actions {
            display: flex;
            gap: 8px;
        }
        .memory-archive-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            color: var(--text-primary);
        }
        .memory-archive-btn.load {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .memory-archive-btn.delete {
            color: #ff3b30;
            border-color: #ff3b30;
        }
        
        #chat-messages[data-theme="blue_green"] .message-bubble.user .content { background-color: #d1ecf1; color: #0c5460; }
        #chat-messages[data-theme="blue_green"] .message-bubble.ai .content { background-color: #d4edda; color: #155724; }
        #chat-messages[data-theme="pink_white"] .message-bubble.user .content { background-color: #fff0f6; color: #a78396; }
        #chat-messages[data-theme="pink_white"] .message-bubble.ai .content { background-color: #f8f9fa; color: #383d41; }
        #chat-messages[data-theme="pink_black"] .message-bubble.user .content { background-color: #F8BBD0; color: #5B2C6F; }
        #chat-messages[data-theme="pink_black"] .message-bubble.ai .content { background-color: #343a40; color: #f8f9fa; }
        #chat-messages[data-theme="pink_green"] .message-bubble.user .content { background-color: #F8BBD0; color: #5B2C6F; }
        #chat-messages[data-theme="pink_green"] .message-bubble.ai .content { background-color: #C8E6C9; color: #1B5E20; }
        #chat-messages[data-theme="green_black"] .message-bubble.user .content { background-color: #d4edda; color: #155724; }
        #chat-messages[data-theme="green_black"] .message-bubble.ai .content { background-color: #343a40; color: #f8f9fa; }
        #transfer-btn { font-weight: bold; }
        #transfer-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1001; }
        #transfer-modal.visible { display: flex; }
        .transfer-content { background-color: #fff0f5; border-radius: 20px; width: 290px; padding: 20px; box-shadow: 0 5px 25px rgba(255, 105, 180, 0.3); text-align: center; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100" opacity="0.05"><path d="M50,4 C35,4 28,15 28,24 C28,33 35,32 35,40 C35,48 28,49 28,57 C28,65 35,66 35,74 C35,82 28,83 28,91 C28,99 35,100 50,100 C65,100 72,99 72,91 C72,83 65,82 65,74 C65,66 72,65 72,57 C72,49 65,48 65,40 C65,32 72,33 72,24 C72,15 65,4 50,4 Z" fill="%23FF69B4"/></svg>'); background-repeat: no-repeat; background-position: top right; background-size: 80px; }
        .transfer-header { font-size: 20px; font-weight: bold; color: #a35c7b; margin-bottom: 20px; }
        .transfer-input-group { margin-bottom: 15px; text-align: left; }
        .transfer-input-group label { display: block; font-size: 14px; color: #ff85b3; margin-bottom: 5px; font-weight: 500; }
        .transfer-input-group input { width: 100%; padding: 12px; border-radius: 10px; border: 2px solid #ffcce0; background-color: var(--secondary-bg); font-size: 16px; box-sizing: border-box; }
        .transfer-input-group input:focus { border-color: #ff85b3; outline: none; }
        .transfer-actions { display: flex; justify-content: space-between; gap: 10px; }
        .transfer-actions button { flex: 1; padding: 12px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: transform 0.2s; }
        .transfer-actions button:active { transform: scale(0.95); }
        #transfer-cancel-btn { background-color: #ffdde9; color: #a35c7b; }
        #transfer-confirm-btn { background-color: #ff85b3; color: white; }
        .transfer-card { width: 200px; border-radius: 12px; padding: 12px; color: white; position: relative; overflow: hidden; }
        .transfer-card::before { content: 'üêæ'; position: absolute; right: 10px; top: 5px; font-size: 30px; opacity: 0.2; transform: rotate(15deg); }
        .message-bubble.user .transfer-card { background: radial-gradient(circle at top left, #ffc5d5, #ff85b3); }
        .message-bubble.ai .transfer-card { background: radial-gradient(circle at top left, #a1c4fd, #c2e9fb); }
        .transfer-title { font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 6px; margin-bottom: 8px; }
        .transfer-amount { font-size: 28px; font-weight: bold; margin-bottom: 4px; }
        .transfer-note { font-size: 13px; opacity: 0.9; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 8px; margin-top: 8px; word-break: break-all; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        #listen-together-btn img.rotating { animation: spin 2s linear infinite; }
        #listen-together-btn img.paused { animation-play-state: paused; }
        #music-player-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; display: none; justify-content: center; align-items: center; background-color: rgba(0,0,0,0.3); }
        #music-player-overlay.visible { display: flex; }
        .music-player-window { width: 90%; background-color: rgba(255, 255, 255, 0.6); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 20px; box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); border: 1px solid rgba(255, 255, 255, 0.18); padding: 25px; display: flex; flex-direction: column; align-items: center; color: #1f1f1f; position: relative; }
        #music-playlist-btn { position: absolute; top: 15px; right: 15px; font-size: 24px; cursor: pointer; color: #333; }
        #music-time-counter { font-size: 12px; color: #555; margin-bottom: 20px; }
        #music-player-song-title { font-size: 20px; font-weight: 600; margin-bottom: 5px; text-align: center; }
        #music-player-artist { font-size: 14px; color: #666; margin-bottom: 25px; }
        .music-controls { display: flex; align-items: center; justify-content: center; gap: 20px; width: 100%; margin-bottom: 30px; }
        .music-controls button { background: none; border: none; font-size: 16px; font-weight: bold; cursor: pointer; color: #333; width: 44px; height: 44px; display: flex; justify-content: center; align-items: center; transition: transform 0.2s; }
        .music-controls button:active { transform: scale(0.9); }
        .music-controls .play-pause-btn { font-size: 24px; width: 60px; height: 60px; border-radius: 50%; background-color: rgba(0,0,0,0.05); }
        .music-bottom-actions { display: flex; justify-content: space-between; width: 100%; }
        .music-bottom-actions button { flex: 1; padding: 12px 0; border: none; border-radius: 10px; font-size: 15px; font-weight: 500; cursor: pointer; }
        #music-exit-btn { background-color: rgba(255, 100, 100, 0.7); color: white; margin-right: 5px; }
        #music-return-btn { background-color: rgba(0, 123, 255, 0.7); color: white; margin-left: 5px; }
        #music-playlist-panel { position: absolute; bottom: 0; left: 0; width: 100%; height: 70%; background-color: rgba(242, 242, 247, 0.9); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-top: 1px solid var(--border-color); border-radius: 20px 20px 0 0; z-index: 210; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); visibility: hidden; }
        #music-playlist-panel.visible { transform: translateY(0); visibility: visible; }
        .playlist-header { padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; border-bottom: 1px solid var(--border-color); font-weight: 600; }
        .playlist-header .panel-btn { font-size: 16px; cursor: pointer; color: var(--accent-color); }
       .playlist-body {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px 0 80px 0;
    box-sizing: border-box;
}
        .playlist-item { padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-bottom: 1px solid #eee; }
        .playlist-item.playing { background-color: rgba(0, 123, 255, 0.1); }
        .playlist-item-info .title { font-weight: 500; font-size: 15px; }
        .playlist-item-info .artist { font-size: 12px; color: #666; }
        .playlist-item .delete-track-btn { color: #ff3b30; font-size: 20px; padding: 5px; }
        #persona-library-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; padding: 10px; }
        .persona-preset-item { 
            aspect-ratio: 1 / 1; 
            border-radius: 12px; 
            background-size: cover; 
            background-position: center; 
            cursor: pointer; 
            transition: transform 0.2s, box-shadow 0.2s; 
            border: 1px solid rgba(0,0,0,0.1); 
            position: relative;
        }
        .persona-preset-item:hover { transform: scale(1.08); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .persona-preset-item.manage-mode::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            width: 20px;
            height: 20px;
            border: 2px solid white;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.3);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .persona-preset-item.selected::before {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }
        .persona-preset-item.selected::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            left: 5px;
            width: 20px;
            height: 20px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-header .header-actions {
            display: flex;
            gap: 10px;
        }
        #persona-manage-actions {
            display: flex;
            gap: 10px;
        }
        .modal-header .action-button { font-size: 16px; color: var(--accent-color); font-weight: 600; cursor: pointer; background: none; border: none; padding: 5px; }
        #battery-alert-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.4); display: none; justify-content: center; align-items: center; z-index: 2000; opacity: 0; transition: opacity 0.3s ease; }
        #battery-alert-modal.visible { display: flex; opacity: 1; }
        .battery-alert-content { background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); width: 280px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); text-align: center; padding: 20px; cursor: pointer; transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #battery-alert-modal.visible .battery-alert-content { transform: scale(1); }
        #battery-alert-image { max-width: 100px; max-height: 100px; margin-bottom: 15px; }
        #battery-alert-text { font-size: 16px; font-weight: 500; color: #333; margin: 0; line-height: 1.4; }
        #font-preview {
            transition: font-family 0.3s ease;}
        #chat-list-screen {
        }
        .chat-list-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 1; 
        }
        .chat-list-view.active {
            opacity: 1;
            visibility: visible;
            z-index: 2; 
        }
        #messages-view {
            overflow-y: auto; 
        }
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.2s;
        }
        .nav-item.active {
            color: var(--accent-color);
            font-weight: 600;
        }
        #qzone-screen {
            background-color: #f0f2f5;
        }
        .qzone-header {
            position: relative;
            z-index: 10; 
            flex-shrink: 0; 
            padding: 15px 20px;
            padding-top: 45px;
            background-color: rgba(247, 247, 247, 0.7); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
        }
        .qzone-header .back-btn {
            font-size: 24px;
            cursor: pointer;
            color: var(--accent-color);
        }
        .qzone-header span:nth-child(2) { 
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }
        .qzone-content {
            flex-grow: 1;
            overflow-y: auto;
        }
        .qzone-profile-header {
            position: relative;
            margin-bottom: 20px;
        }
        .qzone-banner-container {
            width: 100%;
            height: 180px; 
            position: relative;
        }
        #qzone-banner-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .qzone-user-info {
            position: absolute;
            bottom: -30px; 
            left: 20px;
            display: flex;
            align-items: flex-end; 
            gap: 10px;
        }
        .qzone-avatar-container {
            position: relative;
        }
        #qzone-avatar-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            object-fit: cover;
        }
        #qzone-nickname {
            font-size: 18px;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
            padding-bottom: 5px; 
        }
        .qzone-edit-btn {
            position: absolute;
            background-color: rgba(0,0,0,0.4);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        #change-qzone-banner-btn {
            bottom: 10px;
            right: 10px;
        }
        #change-qzone-avatar-btn {
            bottom: 5px;
            right: 5px;
        }
        #change-qzone-nickname-btn {
            font-size: 14px;
            padding: 2px 6px;
            margin-left: 5px; 
            color: var(--text-primary);
            background-color: rgba(255,255,255,0.7);
            border-radius: 5px;
            position: relative; 
            bottom: 5px; 
        }
        #qzone-banner-container,
        #qzone-avatar-container,
        #qzone-nickname {
            cursor: pointer; 
            transition: opacity 0.2s;
        }
        #qzone-banner-container:hover,
        #qzone-avatar-container:hover,
        #qzone-nickname:hover {
            opacity: 0.85; 
        }
        .qzone-edit-btn {
            display: none;
        }
        #qzone-screen .qzone-header {
            display: none;
        }
        #qzone-screen.active .qzone-header {
            display: flex;
        }
        #chat-list-screen.in-qzone-view > .header,
        #chat-list-screen.in-qzone-view > #chat-list-bottom-nav {
            display: none;
        }
        .chat-list-item:first-child,
        .chat-group-container:first-child {
            margin-top: 10px; 
        }
        .qzone-actions-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            margin: 40px 15px 15px 15px; 
            background-color: var(--secondary-bg);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .action-item {
            flex: 1;
            text-align: center;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px 0;
            position: relative;
        }
        .action-item:not(:last-child)::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 1px;
            height: 20px;
            background-color: var(--border-color);
        }
        #qzone-posts-list {
            padding: 0 15px 20px 15px; 
            display: flex;
            flex-direction: column;
            gap: 20px; 
        }
        .qzone-post-item {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.06);
        }
        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        .post-header .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        .post-info {
            display: flex;
            flex-direction: column;
        }
        .post-info .post-nickname {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
        }
        .post-info .post-timestamp {
            font-size: 12px;
            color: var(--text-secondary);
        }
        .post-content {
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap; 
            word-break: break-word; 
        }
        #post-public-text {
            min-height: 80px; 
            resize: vertical;
        }
        .post-image-preview-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9; 
            background-color: #f0f2f5;
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            display: none; 
            justify-content: center;
            align-items: center;
        }
        .post-image-preview-container.visible {
            display: flex; 
        }
        #post-image-preview {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 6px;
        }
        #post-remove-image-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: #ff3b30;
            color: white;
            border: 2px solid white;
            font-size: 16px;
            line-height: 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 1px 4px rgba(0,0,0,0.3);
        }
        .post-image-upload-options {
            display: flex;
            gap: 10px;
        }
        .post-image-upload-options button {
            flex: 1;
            margin-top: 0;
        }
        .post-mode-switcher {
            display: flex;
            margin-bottom: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
            padding: 4px;
        }
        .mode-btn {
            flex: 1;
            padding: 8px;
            border: none;
            background-color: transparent;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .mode-btn.active {
            background-color: var(--secondary-bg);
            color: var(--text-primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .post-mode-content {
            display: none; 
        }
        .post-mode-content.active {
            display: block; 
        }
        #album-screen {
            background-color: #f0f2f5; 
        }
        #album-grid-page {
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(2, 1fr); 
            gap: 15px;
        }
        .album-item {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-radius: 8px; 
        }
        .album-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        .album-cover {
            aspect-ratio: 1 / 1; 
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 8px;
            background-color: #f0f2f5; 
        }
        .album-info {
            text-align: center;
        }
        .album-name {
            font-weight: 500;
            margin: 0 0 4px 0;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; 
        }
        .album-count {
            font-size: 12px;
            color: var(--text-secondary);
            margin: 0;
        }
        #album-photos-screen {
            background-color: #f0f2f5;
        }
        #photos-grid-page {
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .photo-item {
            position: relative; 
            aspect-ratio: 1 / 1; 
            border-radius: 6px;
            overflow: hidden; 
            background-color: #e9ecef; 
        }
        .photo-item .photo-thumb {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            cursor: pointer;
        }
        .photo-item .photo-delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 22px;
            height: 22px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            line-height: 22px;
            text-align: center;
            cursor: pointer;
            opacity: 0; 
            transition: opacity 0.2s ease;
        }
        .photo-item:hover .photo-delete-btn {
            opacity: 1;
        }
        #photo-viewer-modal {
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1002;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }
        .photo-viewer-content {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
        }
        #photo-viewer-image {
            max-width: 90vw;  
            max-height: 85vh; 
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: opacity 0.2s ease-in-out;
        }
        #photo-viewer-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 40px;
            font-weight: 200;
            cursor: pointer;
            line-height: 1;
            text-shadow: 0 0 5px black;
        }
        #photo-viewer-modal .nav-arrow {
            position: absolute; 
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 50px; 
            font-weight: 100;
            cursor: pointer;
            padding: 10px; 
        -webkit-user-select: none; 
            user-select: none;
            transition: color 0.2s;
            z-index: 1003; 
        }
        #photo-viewer-prev-btn {
            left: 5px; 
        }
        #photo-viewer-next-btn {
            right: 5px; 
        }
        #photo-viewer-modal .nav-arrow:hover {
            color: white;
        }
        #photo-viewer-modal .nav-arrow:disabled {
            color: rgba(255, 255, 255, 0.2);
            cursor: default;
        }
        .post-main-content {
        }
        .post-feedback-icons {
            display: flex;
            justify-content: flex-end; 
            align-items: center;
            gap: 12px;
            padding: 8px 0; 
        }
        .action-icon {
            cursor: pointer;
            color: var(--text-secondary); 
            transition: all 0.2s ease-in-out;
        }
        .action-icon svg {
            width: 22px;
            height: 22px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        .action-icon.active {
            color: #ff5252; 
            transform: scale(1.1); 
        }
        .action-icon.active.favorite {
            color: #ffc107; 
        }
        .action-icon.active svg {
            fill: currentColor; 
        }
        .animate-like {
            animation: like-bounce 0.4s ease-in-out;
        }
        @keyframes like-bounce {
            0%   { transform: scale(1); }
            25%  { transform: scale(0.8); }
            50%  { transform: scale(1.2); }
            75%  { transform: scale(1.05); }
            100% { transform: scale(1.1); }
        }
        .post-footer {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #f0f0f0; 
            display: flex;
            align-items: center;
            gap: 8px; 
        }
        .comment-section {
            flex-grow: 1; 
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .comment-section .comment-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }
        .comment-section {
            position: relative; 
        }
        .comment-section .comment-input {
            width: 100%;
            padding: 8px 12px;
            border: none;
            background-color: #f0f2f5;
            border-radius: 14px;
            font-size: 16px; 
            outline: none;
        }
        .comment-send-btn {
            flex-shrink: 0; 
            padding: 8px 15px;
            border: none;
            background-color: var(--accent-color);
            color: white;
            border-radius: 14px;
            font-size: 16px; 
            font-weight: 500;
            cursor: pointer;
        }
        .unread-indicator {
            position: absolute;
            top: -8px;      
            right: -15px;    
            min-width: 18px;
            height: 18px;
            padding: 0 5px;
            background-color: #ff3b30;
            color: white;
            font-size: 11px;
            font-weight: bold;
            line-height: 18px;
            text-align: center;
            border-radius: 9px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
            display: none;
            z-index: 1;
        }
        .back-btn-indicator {
            top: 0;
            right: -8px; 
            width: 10px;
            height: 10px;
            min-width: 10px;
            padding: 0;
            border-radius: 50%;
        }
        .post-comments-container {
            padding: 10px 0; 
            display: flex;
            flex-direction: column;
            gap: 8px; 
            font-size: 13px; 
        }
        .comment-item {
            line-height: 1.5;
        }
        .comment-item .commenter-name {
            font-weight: 600;
            color: var(--accent-color);
            cursor: pointer;
            margin-right: 5px; 
        }
        .comment-item .comment-text {
            color: var(--text-primary);
            word-break: break-word;
        }
        .post-likes-section {
            display: flex;
            align-items: center;
            gap: 6px; 
            padding: 8px 10px; 
            font-size: 13px;
            color: var(--accent-color); 
            background-color: #f0f5fa; 
            border-top: 1px solid #e9eef3;
            border-bottom: 1px solid #e9eef3;
            margin-top: 5px; 
        }
        .post-likes-section .like-icon {
            width: 16px;
            height: 16px;
            fill: currentColor; 
            flex-shrink: 0; 
        }
        .at-mention-popup {
            position: absolute; 
            bottom: 100%; 
            left: 40px; 
            width: calc(100% - 40px); 
            max-height: 120px;
            overflow-y: auto;
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
            z-index: 10;
            display: none; 
        }
        .at-mention-item {
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            color: var(--text-primary);
            border-bottom: 1px solid #f0f0f0;
        }
        .at-mention-item:last-child {
            border-bottom: none;
        }
        .at-mention-item:hover {
            background-color: #f5f5f5;
        }
        #favorites-view {
            display: flex;
            flex-direction: column;
        }
        #favorites-view > .header {
            flex-shrink: 0;
        }
        #favorites-list {
            flex-grow: 1; 
            overflow-y: auto; 
            overflow-x: hidden; 
            padding: 15px; 
            display: flex;
            flex-direction: column;
            gap: 15px; 
        }
        .favorite-item-card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.06);
            position: relative; 
        }
        .fav-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        .fav-card-header .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
        }
        .fav-card-header .info {
            flex-grow: 1;
        }
        .fav-card-header .name {
            font-weight: 600;
            font-size: 15px;
        }
        .fav-card-header .source {
            font-size: 12px;
            color: var(--text-secondary);
        }
        .fav-card-content {
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .fav-card-content .chat-image {
            margin-top: 8px; 
        }
        .fav-delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            background: #f0f2f5;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            color: var(--text-secondary);
            line-height: 28px;
            text-align: center;
        }
        .fav-delete-btn:hover {
            background-color: #e9ecef;
            color: #ff3b30;
        }
        .search-bar-container {
            padding: 10px 15px;
            background-color: #f9f9f9; 
            position: relative; 
            flex-shrink: 0;
        }
        #favorites-search-input {
            width: 100%;
            padding: 10px 30px 10px 15px; 
            font-size: 16px;
            border: 1px solid var(--border-color);
            border-radius: 18px; 
            background-color: var(--secondary-bg);
            box-sizing: border-box;
            outline: none;
        }
        #favorites-search-input:focus {
            border-color: var(--accent-color);
        }
        .search-clear-btn {
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            background: #ccc;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            font-size: 16px;
            cursor: pointer;
        }
        #chat-interface-screen .header .selection-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        #chat-interface-screen .selection-controls .action-btn {
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            padding: 5px;
        }
        #favorites-view.selection-mode .favorite-item-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .favorite-item-card::before {
            content: '';
            position: absolute;
            left: -25px; 
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            background-color: white;
            transition: all 0.2s ease;
            opacity: 0; 
        }
        #favorites-view.selection-mode .favorite-item-card {
            transform: translateX(35px);
        }
        #favorites-view.selection-mode .favorite-item-card::before {
            opacity: 1;
        }
        #favorites-view.selection-mode .favorite-item-card.selected::before {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            content: '‚úî';
            color: white;
            font-size: 14px;
            text-align: center;
            line-height: 20px;
        }
        #favorites-action-bar {
            position: absolute; 
            bottom: 0;
            left: 0;
            right: 0;           
            width: auto;        
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom)); 
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            box-sizing: border-box;
            z-index: 5;
            display: none;
        }
        #favorites-action-bar .action-bar-btn {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
        #chat-interface-screen .header .selection-controls {
            display: none;
        }
        #chat-interface-screen .header .default-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        #chat-interface-screen.selection-mode .header .default-controls {
            display: none;
        }
        #chat-interface-screen.selection-mode .header .selection-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        #add-chat-btn,
        #add-world-book-btn,
        #create-album-btn-page {
            font-size: 28px;   
            font-weight: 300;  
            position: relative;
            top: -1px;         
        }
        #settings-preview-area {
            width: 100%;
            height: 180px; 
            background-color: #f0f2f5;
            border-radius: 8px;
            padding: 15px;
            box-sizing: border-box;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
            gap: 10px; 
            border: 1px solid var(--border-color);
            position: relative; 
        }
        #settings-preview-area::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 1;
            opacity: 0.8;
        }
        #settings-preview-area .message-wrapper {
            position: relative;
            z-index: 2;
        }
        #settings-preview-area .message-bubble .avatar {
            width: 30px;
            height: 30px;
        }
        #settings-preview-area .message-bubble .timestamp {
            display: none; 
        }
        .existing-group-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .existing-group-item .group-name {
            font-weight: 500;
        }
        .existing-group-item .delete-group-btn {
            color: #ff3b30;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        .chat-group-container {
            border-bottom: 1px solid var(--border-color);
        }
        .chat-group-container:first-child {
            border-top: 1px solid var(--border-color);
        }
        .chat-group-header {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            cursor: pointer;
            background-color: #f7f7f7;
        }
        .chat-group-header .arrow {
            font-size: 14px;
            margin-right: 8px;
            transition: transform 0.2s ease;
        }
        .chat-group-header.collapsed .arrow {
            transform: rotate(-90deg);
        }
        .chat-group-header .group-name {
            font-weight: 600;
            font-size: 15px;
        }
        .chat-group-content {
            max-height: 1000px; 
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .chat-group-content.collapsed {
            max-height: 0;
        }
        .format-helpers {
            display: flex;
            gap: 10px;
            margin-bottom: 15px; 
            flex-wrap: wrap; 
        }
        .format-btn {
            background-color: #e9ecef;
            color: var(--text-primary);
            border: none;
            padding: 6px 12px;
            border-radius: 16px; 
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .format-btn:hover {
            background-color: #dcdfe3;
        }
        .post-actions-btn {
            margin-left: auto; 
            padding: 5px 10px;
            font-size: 20px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 50%;
            line-height: 1;
        }
        .post-actions-btn:hover {
            background-color: #f0f0f0;
        }
        #post-actions-modal .custom-modal-footer button {
            width: 100%;
            border: none;
            border-bottom: 1px solid #dbdbdb;
            padding: 14px;
            font-size: 18px;
        }
        #post-actions-modal .custom-modal-footer button:last-child {
            border-bottom: none;
        }
        #post-actions-modal #cancel-post-action-btn {
            margin-top: 8px;
            border-radius: 8px;
            background-color: #f0f0f0;
        }
        #chat-messages .transfer-card .transfer-title,
        #chat-messages .transfer-card .transfer-amount,
        #chat-messages .transfer-card .transfer-note {
            text-shadow: none !important; 
            color: white !important;      
        }
        #chat-messages .transfer-card .transfer-title {
            font-size: 16px !important;
            font-weight: 600 !important;
        }
        #chat-messages .transfer-card .transfer-amount {
            font-size: 28px !important;
            font-weight: bold !important;
        }
        #chat-messages .transfer-card .transfer-note {
            font-size: 13px !important;
            opacity: 0.9 !important;
        }
        .header > span:nth-child(2),
        #chat-header-title {
            position: absolute;
            left: 50%;
            transform: translateX(calc(-50% - 2px)); 
            max-width: 60%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #message-editor-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .message-editor-block {
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
        }
        .message-editor-block textarea {
            width: 100%;
            min-height: 60px;
            resize: vertical;
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .message-editor-block .format-helpers {
            margin-top: 8px;
            margin-bottom: 0; 
        }
        .message-editor-block .delete-block-btn {
            float: right;
            margin-top: -5px;
            background: none;
            border: none;
            color: #ff3b30;
            font-size: 20px;
            cursor: pointer;
        }
        .contact-picker-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }
        .contact-picker-item .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 15px;
            transition: all 0.2s ease;
        }
        .contact-picker-item.selected .checkbox {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            content: '‚úî';
            color: white;
            font-size: 14px;
            text-align: center;
            line-height: 20px;
        }
        .contact-picker-item .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }
        .contact-picker-item .name {
            font-weight: 500;
        }
        #member-management-list {
            padding: 0; 
        }
        .member-management-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }
        .member-management-item .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }
        .member-management-item .name {
            flex-grow: 1;
            font-weight: 500;
        }
        .member-management-item .remove-member-btn {
            background-color: #ff3b30;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            font-size: 20px;
            line-height: 28px;
            text-align: center;
            cursor: pointer;
            flex-shrink: 0;
        }
        #member-management-actions {
            flex-shrink: 0;
            padding: 15px;
            border-top: 1px solid var(--border-color);
            background-color: #f7f7f7;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        #member-management-actions button {
            width: 100%;
            padding: 15px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        #member-management-actions #create-new-member-btn {
            background-color: #4cd964; 
        }
        .waimai-card {
            width: 240px;
            border-radius: 12px;
            overflow: hidden;
            background-color: var(--secondary-bg);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .waimai-header {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            border-bottom: 1px solid #f0f0f0;
        }
        .waimai-header .icon {
            width: 20px;
            height: 20px;
        }
        .waimai-header .title-group {
            display: flex;
            align-items: baseline;
            font-size: 14px;
            color: #8a8a8a;
        }
        .waimai-header .title-group .brand {
            font-weight: 600;
            color: #555;
            margin-right: 5px;
        }
        .waimai-header .title-group .separator {
            margin: 0 5px;
        }
        .waimai-catchphrase {
            font-size: 13px;
            color: #1f1f1f;
            padding: 12px;
        }
        .waimai-main {
            background-color: #FFD66B; 
            padding: 12px;
            text-align: center;
        }
        .waimai-main .request-title {
            font-size: 12px;
            color: #856404;
            margin-bottom: 8px;
        }
        .waimai-main .payment-box {
            background-color: var(--secondary-bg);
            border-radius: 8px;
            padding: 15px 10px;
        }
        .waimai-main .payment-label {
            font-size: 13px;
            color: #8a8a8a;
        }
        .waimai-main .amount {
            font-size: 32px;
            font-weight: 700;
            color: #1f1f1f;
            margin: 4px 0 12px 0;
        }
        .waimai-main .countdown-label {
            font-size: 13px;
            color: #8a8a8a;
        }
        .waimai-main .countdown-timer {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            margin-left: 5px;
        }
        .waimai-main .countdown-timer span {
            background-color: #333;
            color: white;
            padding: 2px 4px;
            border-radius: 2px;
            font-weight: bold;
            font-size: 12px;
        }
        .waimai-details-btn {
            width: 100%;
            padding: 10px 0;
            margin-top: 15px;
            border: none;
            border-radius: 6px;
            background-color: #FFC33A;
            color: #49380a;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
        }
        .message-bubble.status-paid .waimai-card {
            border: 2px solid #28a745; 
        }
        .message-bubble.status-paid .waimai-main .request-title::before {
            content: '‚úÖ  ';
        }
        .message-bubble.status-paid .waimai-main .request-title {
            color: #155724;
            font-weight: 600;
            content: "ÊàëÂ∑≤‰∏∫ÊÇ®‰π∞ÂçïÔºåËØ∑Â∞ΩÊÉÖ‰∫´Áî®ÂêßÔΩû" !important;
            display: block;
            margin-bottom: 15px;
        }
        .message-bubble.status-paid .payment-box {
            display: none; 
        }
        .message-bubble.status-paid .waimai-details-btn {
            background-color: #28a745;
            color: white;
        }
        .message-bubble.status-rejected .waimai-card {
            border: 2px solid #dc3545; 
            opacity: 0.8;
        }
        .message-bubble.status-rejected .waimai-main {
            background-color: #e9ecef;
        }
        .message-bubble.status-rejected .waimai-main .request-title::before {
            content: '‚ùå ';
        }
        .message-bubble.status-rejected .waimai-main .request-title {
            color: #721c24;
            font-weight: 600;
            content: "ÊàëÊãíÁªù‰∫ÜÊÇ®ÁöÑ‰ª£‰ªòËØ∑Ê±Ç" !important;
            display: block;
            margin-bottom: 15px;
        }
        .message-bubble.status-rejected .payment-box {
            display: none; 
        }
         .message-bubble.status-rejected .waimai-details-btn {
            background-color: #6c757d;
            color: white;
        }
        .message-bubble[class*="status-"] .request-title {
            font-size: 0; 
        }
        .message-bubble[class*="status-"] .request-title::after {
            font-size: 14px; 
        }
        .message-bubble.status-paid .request-title::after {
            content: "ÊàëÂ∑≤‰∏∫ÊÇ®‰π∞ÂçïÔºåËØ∑Â∞ΩÊÉÖ‰∫´Áî®ÂêßÔΩû";
        }
        .message-bubble.status-rejected .request-title::after {
            content: "ÊàëÊãíÁªù‰∫ÜÊÇ®ÁöÑ‰ª£‰ªòËØ∑Ê±Ç";
        }
        .waimai-user-actions {
            display: flex;
            gap: 10px;
            padding: 0 12px 12px 12px; 
            background-color: var(--secondary-bg);
        }
        .waimai-user-actions button {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: 1.5px solid;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .waimai-pay-btn {
            background-color: #28a745;
            border-color: #1f7a33;
            color: white;
        }
        .waimai-pay-btn:hover {
            background-color: #218838;
        }
        .waimai-decline-btn {
            background-color: #f8f9fa;
            border-color: #ced4da;
            color: #495057;
        }
        .waimai-decline-btn:hover {
            background-color: #e2e6ea;
        }
        #api-settings-screen,
        #font-settings-screen,
        #wallpaper-screen,
        #memories-view,
        #contact-picker-screen,
        #member-management-screen,
        #world-book-editor-screen {  
            background-color: var(--secondary-bg);
        }
        #api-settings-screen .form-container,
        #font-settings-screen .form-container,
        #wallpaper-screen .form-container {
            padding-top: 100px;
            margin-top: -80px;
            background-color: var(--secondary-bg);
        }
        #wallpaper-screen .form-container {
            align-items: center; 
        }
        #incoming-call-modal .incoming-call-content {
            background-color: rgba(40, 40, 40, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            width: 280px;
            padding: 30px 20px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .caller-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 12px;
            border: 3px solid rgba(255,255,255,0.5);
        }
        .caller-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .caller-text {
            font-size: 14px;
            color: #ccc;
            margin-bottom: 30px;
        }
        .incoming-call-actions {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .action-button-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #e0e0e0;
        }
        .call-action-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background-size: 50%;
            background-repeat: no-repeat;
            background-position: center;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .call-action-btn:active {
            transform: scale(0.9);
        }
        .call-action-btn.decline {
            background-color: #ff3b30;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 16.5L3 6m18 6l-5.6-5.6a1.2 1.2 0 0 0-1.7 0L3 18.2a1.2 1.2 0 0 0-.3 1.2l1.2 3.6a1.2 1.2 0 0 0 1.2.9h15.6a1.2 1.2 0 0 0 1.2-1.2V7.7a1.2 1.2 0 0 0-.3-1.1z"/></svg>');
        }
        .call-action-btn.accept {
            background-color: #4cd964;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>');
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(76, 217, 100, 0); }
            100% { box-shadow: 0 0 0 0 rgba(76, 217, 100, 0); }
        }
        #video-call-screen {
            background-color: #1c1c1e;
            color: white;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .video-call-top-bar {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 15px 20px;
            padding-top: 50px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
            z-index: 100;
            text-align: center;
            box-sizing: border-box;
            pointer-events: none;
        }
        #call-timer {
            font-size: 16px;
            font-weight: 500;
            letter-spacing: 1px;
        }
        .video-call-controls {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 20px;
            padding-bottom: 40px;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
            z-index: 100;
            box-sizing: border-box;
        }
        .video-call-avatar-area {
            flex-grow: 1; 
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            padding-top: 80px; 
            box-sizing: border-box;
            overflow-y: auto; 
        }
        #participant-avatars-grid {
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            align-items: center;
            gap: 15px; 
            max-width: 100%;
        }
        .participant-avatar-wrapper {
            position: relative;
            text-align: center;
            flex-shrink: 0;
        }
        .participant-avatar {
            width: 70px;   
            height: 70px;  
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .participant-name {
            margin-top: 8px;
            font-size: 12px;
            color: #ccc;
        }
        .participant-avatar.speaking {
            border-color: #4cd964;
            box-shadow: 0 0 20px rgba(76, 217, 100, 0.6);
            transform: scale(1.05);
        }
        
        /* ËßÜÈ¢ëÈÄöËØù‰ºòÂåñ - ËßÜÈ¢ëÊòæÁ§∫Âå∫Âüü */
        #video-display-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .video-large-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            overflow: hidden;
        }
        .video-large-screen img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .video-small-screen {
            position: absolute;
            top: 80px;
            right: 20px;
            width: 100px;
            height: 140px;
            background-color: #000;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            z-index: 101;
            transition: all 0.3s ease;
        }
        .video-small-screen:hover {
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.05);
        }
        .video-small-screen img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        #video-call-main {
            position: absolute;
            bottom: 140px;
            left: 15px;
            right: 15px;
            max-height: 30%;
            overflow-y: auto;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-sizing: border-box;
            z-index: 50;
            backdrop-filter: blur(10px);
        }
        .control-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            background-repeat: no-repeat;
            background-position: center;
            transition: transform 0.2s, background-color 0.2s;
        }
        .control-btn:active {
            transform: scale(0.9);
        }
        .control-btn.speak-btn {
            background-color: rgba(255,255,255,0.2);
            background-size: 55%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>');
        }
        .control-btn.hangup-btn {
            background-color: #ff3b30;
            background-size: 50%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13.5 16.5L3 6m18 6l-5.6-5.6a1.2 1.2 0 0 0-1.7 0L3 18.2a1.2 1.2 0 0 0-.3 1.2l1.2 3.6a1.2 1.2 0 0 0 1.2.9h15.6a1.2 1.2 0 0 0 1.2-1.2V7.7a1.2 1.2 0 0 0-.3-1.1z"/></svg>');
        }
        .control-btn.join-btn {
            background-color: #007bff;
            background-size: 50%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="17" y1="11" x2="23" y2="11"></line></svg>');
        }
        .call-message-bubble {
            padding: 10px 15px;
            border-radius: 12px;
            max-width: 85%;
            line-height: 1.6;
            word-break: break-word;
            white-space: pre-wrap;
        }
        .call-message-bubble.ai-speech {
            background-color: rgba(255, 255, 255, 0.15);
            align-self: flex-start; 
        }
        .call-message-bubble.user-speech {
            background-color: #4cd964; 
            align-self: flex-end;   
            text-align: left; 
        }
        #outgoing-call-screen {
            background-color: #1c1c1e;
            color: white;
            justify-content: center; 
            align-items: center;   
        }
        .outgoing-call-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .outgoing-call-actions {
            margin-top: 50px; 
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #e0e0e0;
        }
        .qzone-post-container {
            position: relative; 
            overflow: hidden;   
            border-radius: 12px;
        }
        .qzone-post-item {
            transition: transform 0.3s ease;
            background-color: var(--secondary-bg); 
            position: relative; 
            z-index: 2;
        }
        .qzone-post-delete-action {
            position: absolute; 
            top: 0;
            right: 0;
            bottom: 0;
            width: 90px; 
            background-color: #ff3b30; 
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
            z-index: 1; 
        }
        .qzone-post-item.swiped {
            transform: translateX(-90px); 
        }
        @keyframes pat-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
            20%, 40%, 60%, 80% { transform: translateX(3px); }
        }
        .pat-animation {
            animation: pat-shake 0.4s ease-in-out;
        }
        .system-message {
            align-self: center; 
            padding: 4px 12px;
            margin: 5px 0;
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
        }
        .message-wrapper.system-pat {
            justify-content: center;
            align-self: center;
            margin: 5px 0;
            max-width: 80%;
        }
        .message-bubble.system-bubble {
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            padding: 4px 12px;
            border-radius: 10px;
        }
        #chat-input-actions-top {
            display: flex;
            gap: 8px;
            padding: 0 5px;
            overflow-x: auto;      
            flex-wrap: nowrap;     
            -webkit-overflow-scrolling: touch; 
            scrollbar-width: none; 
            -ms-overflow-style: none;  
        }
        #chat-input-actions-top::-webkit-scrollbar {
            display: none; 
        }
        #chat-header-title-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center; 
            gap: 2px; 
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            max-width: 60%;
        }
        #chat-header-title {
            font-size: 16px; 
            font-weight: 600;
            position: static; 
            transform: none;  
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        #chat-header-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 11px;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        .status-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background-color: #4cd964; 
            transition: background-color 0.3s ease;
        }
        #chat-header-status.busy .status-dot {
            background-color: #cccccc;
        }
        .status-text {
            font-weight: 500;
        }
        .memory-card {
            background-color: #fffaf0; 
            border-radius: 12px;
            padding: 15px; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.07);
            border-left: 5px solid #ffb74d; 
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
        }
        .memory-card .header {
            border-bottom: 1px solid rgba(217, 129, 0, 0.15); 
            padding-bottom: 8px; 
        }
        .memory-card .header .date {
            font-size: 11px;
            color: #a1887f;
            margin-bottom: 4px; 
        }
        .memory-card .header .author {
            font-weight: 600;
            color: #d98100;
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .memory-card .content {
            font-size: 14px;
            line-height: 1.7;
            color: #5d4037;
            white-space: pre-wrap;
        }
        .countdown-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        .countdown-card::before {
            content: '‚ú®';
            position: absolute;
            top: -10px;
            left: -10px;
            font-size: 50px;
            opacity: 0.1;
            transform: rotate(-15deg);
        }
        .countdown-card .title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .countdown-card .timer {
            font-size: 28px;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        .countdown-card .target-date {
            font-size: 12px;
            opacity: 0.8;
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 10px;
        }
        #chat-lock-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 150; 
            display: none; 
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }
        #chat-lock-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        #chat-lock-content .lock-text {
            color: var(--text-secondary);
            font-size: 14px;
        }
        #chat-lock-content .lock-action-btn {
            padding: 10px 20px;
            border-radius: 20px;
            border: 1px solid var(--accent-color);
            background-color: var(--accent-color);
            color: white;
            cursor: pointer;
        }
        #chat-lock-content .lock-action-btn.secondary {
            background-color: transparent;
            color: var(--accent-color);
        }
        .red-packet-card {
            width: 220px;
            border-radius: 8px;
            background: linear-gradient(160deg, #F96259, #E44D44);
            color: #ffd700; 
            padding: 12px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .red-packet-card.opened {
            background: linear-gradient(160deg, #d3c4a0, #c4b693);
            cursor: default;
        }
        .red-packet-card::before {
            content: 'üßß';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 30px;
            opacity: 0.2;
            transform: rotate(-10deg);
        }
        .rp-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        .rp-icon {
            width: 20px;
            height: 20px;
        }
        .rp-greeting {
            font-size: 15px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .rp-type {
            font-size: 11px;
            color: white;
            opacity: 0.8;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 8px;
            margin-top: 8px;
        }
        .rp-claimed-info {
            font-size: 13px;
            color: white;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        .rp-details-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .rp-details-item:last-child {
            border-bottom: none;
        }
        .rp-details-item .name {
            flex-grow: 1;
            font-weight: 500;
            color: #333;
        }
        .rp-details-item .amount {
            font-weight: 500;
            color: #555;
        }
        .rp-details-item .lucky-king-tag {
            font-size: 10px;
            background-color: #ffd700;
            color: #a67c00;
            padding: 2px 5px;
            border-radius: 4px;
            margin-left: 8px;
            font-weight: bold;
        }
        .poll-card {
            width: 250px;
            background-color: #f9f9f9;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 12px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        .poll-card.closed {
            background-color: #e9ecef; 
        }
        .poll-question {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 12px;
            line-height: 1.4;
            word-break: break-word;
        }
        .poll-options-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .poll-option-item {
            background-color: white;
            border: 1px solid #dcdcdc;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: background-color 0.2s;
        }
        .poll-card:not(.closed) .poll-option-item:hover {
            background-color: #f0f8ff;
        }
        .poll-option-item.voted {
            border-color: var(--accent-color);
            background-color: #e7f3ff;
            font-weight: 500;
        }
        .poll-option-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: rgba(0, 123, 255, 0.1);
            z-index: 1;
            transition: width 0.3s ease-in-out;
        }
        .poll-option-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .poll-option-text {
            font-size: 14px;
        }
        .poll-option-votes {
            font-size: 13px;
            color: #8a8a8a;
            font-weight: 500;
        }
        .poll-footer {
            margin-top: 12px;
            padding-top: 8px;
            border-top: 1px solid #e9e9e9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: var(--text-secondary);
        }
        .poll-total-votes {
            font-weight: 500;
        }
        .poll-action-btn {
            background: none;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
            padding: 4px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
        }
        .poll-card.closed .poll-action-btn {
            background-color: #6c757d;
            color: white;
            border-color: #6c757d;
        }
        .poll-option-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .poll-option-input-wrapper input {
            flex-grow: 1;
        }
        .poll-option-input-wrapper .remove-option-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: #f0f0f0;
            color: #ff3b30;
            border: none;
            cursor: pointer;
            font-size: 18px;
            line-height: 28px;
            text-align: center;
            flex-shrink: 0;
        }
        #chat-header-title.typing-status {
            color: var(--text-secondary);
            animation: typing-pulse 1.5s infinite;
            font-style: italic;
        }
        @keyframes typing-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        #chat-header-title {
            transition: opacity 0.2s ease-in-out;
        }
        @keyframes message-pop-in {
          from {
            opacity: 0;
            transform: translateY(15px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .message-wrapper.animate-in {
          animation: message-pop-in 0.3s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
          }
#icon-settings-grid,
#cphone-icon-settings-grid { 
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 20px;
    width: 100%;
    padding: 0 10px;
    box-sizing: border-box;
}
        .icon-setting-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        .icon-preview {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background-size: cover;
            background-position: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .change-icon-btn {
            padding: 4px 10px;
            font-size: 12px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 5px;
            cursor: pointer;
        }
        #wallpaper-screen .form-container {
            min-height: 0; 
        }
        #wallpaper-preview {
            flex-shrink: 0; 
        }
        #browser-screen {
            background-color: #f8f9fa;
        }
        #browser-content {
            padding: 20px;
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            overflow-y: auto;
            background-color: #f8f9fa;
        }
        #browser-content .article-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        #browser-content .article-meta {
            font-size: 13px;
            color: #8a8a8a;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        #browser-content .article-body {
            white-space: pre-wrap;
            word-break: break-word;
        }
        #browser-content .article-body p {
            margin-bottom: 1em;
        }
        .link-share-card {
            width: 210px; 
            background-color: var(--secondary-bg);
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .link-share-card:hover {
            background-color: #f9f9f9;
        }
        .link-share-card .title {
            font-weight: 600;
            font-size: 15px;
            line-height: 1.4;
            color: #1f1f1f;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .link-share-card .description {
            font-size: 13px;
            color: #8a8a8a;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .link-share-card .footer {
            display: flex; 
            align-items: center;
            gap: 6px; 
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px; 
        }
        .link-share-card .footer-icon{
            width: 14px;
            height: 14px;
            flex-shrink: 0; 
        }
        .comment-item {
            position: relative;
            padding-right: 25px; 
        }
        .comment-delete-btn {
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            line-height: 22px;
            text-align: center;
            border-radius: 50%;
            color: var(--text-secondary);
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            opacity: 0; 
        }
        .comment-item:hover .comment-delete-btn {
            opacity: 1;
        }
        .comment-delete-btn:hover {
            background-color: #f0f0f0;
            color: #ff3b30;
        }
        #phone-screen.dark-mode {
            --secondary-bg: #1c1c1e; 
            --border-color: #38383a;  
            --text-primary: #ffffff;   
            --text-secondary: #8d8d92; 
        }
        #phone-screen.dark-mode #chat-list-screen,
        #phone-screen.dark-mode #qzone-screen .qzone-content,
        #phone-screen.dark-mode #memories-view {
            background-color: #000000;
        }
        #phone-screen.dark-mode #chat-list {
            background-color: #000000;
        }
        #phone-screen.dark-mode .chat-list-item {
            border-bottom-color: rgba(255, 255, 255, 0.15);
        }
        #phone-screen.dark-mode .chat-group-header {
            background-color: #1c1c1e; 
            border-bottom: 1px solid #38383a; 
        }
        #phone-screen.dark-mode .chat-list-item .name,
        #phone-screen.dark-mode .chat-group-header .group-name {
            color: #ffffff;
        }
        #phone-screen.dark-mode .chat-list-item:hover {
            background-color: #1c1c1e;
        }
        #phone-screen.dark-mode .header,
        #phone-screen.dark-mode .qzone-header {
            background-color: rgba(25, 25, 25, 0.9);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom-color: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }
        #phone-screen.dark-mode .header .back-btn,
        #phone-screen.dark-mode .header .action-btn,
        #phone-screen.dark-mode .header .save-btn {
            color: #ffffff;
        }
        #phone-screen.dark-mode #chat-list-bottom-nav {
            background-color: rgba(25, 25, 25, 0.9);
            border-top-color: rgba(255, 255, 255, 0.15);
        }
        #phone-screen.dark-mode .nav-item.active {
            color: #ffffff;
        }
        #phone-screen.dark-mode #chat-input-area {
            background-color: rgba(5, 5, 5, 0.8);
            border-top: none;
        }
        #phone-screen.dark-mode #chat-input {
            background-color: #3e3e42;
            color: #ffffff;
        }
        #phone-screen.dark-mode #chat-input::placeholder {
            color: #8d8d92;
        }
        #phone-screen.dark-mode .chat-action-icon-btn {
            color: #ffffff;
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
        }
        #phone-screen.dark-mode #send-btn {
            background-color: var(--accent-color);
        }
        #phone-screen.dark-mode .qzone-actions-bar,
        #phone-screen.dark-mode .qzone-post-item {
            background-color: #1c1c1e;
            border: 1px solid #333;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.05);
        }
        #phone-screen.dark-mode .action-item:not(:last-child)::after {
            background-color: #333;
        }
        #phone-screen.dark-mode .post-footer,
        #phone-screen.dark-mode .post-likes-section {
            border-top-color: #333;
        }
        #phone-screen.dark-mode .post-likes-section {
            background-color: rgba(0, 123, 255, 0.1);
        }
        #phone-screen.dark-mode .comment-input {
            background-color: #333;
            color: #ffffff;
        }
        #phone-screen.dark-mode .comment-input::placeholder {
            color: #8d8d92;
        }
        #phone-screen.dark-mode .post-actions-btn:hover {
            background-color: #333;
        }
        #phone-screen.dark-mode .at-mention-popup {
            background-color: #1c1c1e;
            border-color: #333;
        }
        #phone-screen.dark-mode .at-mention-item {
            border-bottom-color: #333;
        }
        #phone-screen.dark-mode .at-mention-item:hover {
            background-color: #333;
        }
        #phone-screen.dark-mode .memory-card {
            background-color: #1c1c1e;
            border-left-color: #e6a753;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.08);
        }
        #phone-screen.dark-mode .memory-card .header {
            background-color: #2c2c2e;
            border-bottom-color: #38383a;
            margin: -15px -15px 8px -15px;
            padding: 12px 15px;
            border-radius: 12px 12px 0 0;
        }
        #phone-screen.dark-mode .memory-card .header .date,
        #phone-screen.dark-mode .memory-card .header .author,
        #phone-screen.dark-mode .memory-card .content {
            color: #e0e0e0;
        }
        #phone-screen.dark-mode #api-settings-screen,
        #phone-screen.dark-mode #font-settings-screen,
        #phone-screen.dark-mode #wallpaper-screen,
        #phone-screen.dark-mode #contact-picker-screen,
        #phone-screen.dark-mode #member-management-screen,
        #phone-screen.dark-mode #world-book-editor-screen,
        #phone-screen.dark-mode #world-book-list,
        #phone-screen.dark-mode .list-item:hover,
        #phone-screen.dark-mode .list-container,
        #phone-screen.dark-mode .form-container {
            background-color: #000000;
        }
        #phone-screen.dark-mode .form-group input, 
        #phone-screen.dark-mode .form-group select, 
        #phone-screen.dark-mode .form-group textarea {
            background-color: #1c1c1e;
            color: #ffffff;
            border-color: #38383a;
        }
        #phone-screen.dark-mode .form-button-secondary {
            background-color: #333;
            border-color: #555;
            color: #fff;
        }
        #phone-screen.dark-mode #font-preview {
            background-color: #1c1c1e;
            border-color: #38383a;
        }
        #phone-screen.dark-mode #font-preview p {
            color: #ffffff;
        }
        #phone-screen.dark-mode .qzone-post-item .post-nickname,
        #phone-screen.dark-mode .qzone-post-item .post-content {
            color: #f0f0f0; 
        }
        #phone-screen.dark-mode .favorite-item-card .fav-card-header .name,
        #phone-screen.dark-mode .favorite-item-card .fav-card-content {
            color: #f0f0f0; 
        }
        #phone-screen.dark-mode .favorite-item-card .fav-card-header .source {
            color: #8d8d92; 
        }
        #phone-screen.dark-mode .search-bar-container {
            background-color: #000000; 
        }
        #phone-screen.dark-mode #favorites-search-input {
            background-color: #1c1c1e; 
            border-color: #38383a;     
            color: #ffffff;            
        }
        #phone-screen.dark-mode #favorites-search-input::placeholder {
            color: #8d8d92; 
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 51px;
            height: 31px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e9e9eb; 
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 27px;
            width: 27px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        input:checked + .slider {
            background-color: #34c759; 
        }
        input:checked + .slider:before {
            transform: translateX(20px); 
        }
        #reply-preview-bar {
            display: none; 
            padding: 8px 12px;
            margin: 0 8px 8px 8px; 
            background-color: rgba(0, 0, 0, 0.05);
            border-left: 3px solid var(--accent-color);
            border-radius: 6px;
            position: relative;
            font-size: 13px;
            color: var(--text-secondary);
        }
        #phone-screen.dark-mode #reply-preview-bar {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .reply-preview-content .sender {
            font-weight: 600;
            color: var(--text-primary);
        }
        .reply-preview-content .text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: block; 
            max-width: 95%;
        }
        #cancel-reply-btn {
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            border-radius: 50%;
            background-color: rgba(0,0,0,0.1);
            cursor: pointer;
            font-size: 14px;
        }
        .quoted-message {
            padding: 6px 10px;
            margin-bottom: 6px;
            background-color: rgba(0, 0, 0, 0.04);
            border-left: 2px solid var(--accent-color);
            border-radius: 4px;
            font-size: 0.9em; 
            opacity: 0.8;
        }
        #phone-screen.dark-mode .quoted-message {
            background-color: rgba(255, 255, 255, 0.08);
            border-left-color: #a0cff1;
        }
        .quoted-message .quoted-sender {
            font-weight: 600;
            color: var(--accent-color);
        }
        #phone-screen.dark-mode .quoted-message .quoted-sender {
            color: #a0cff1;
        }
        .quoted-message .quoted-content {
            color: var(--text-secondary);
            white-space: normal;     
            word-break: break-word;  
            display: block;
        }
        #font-preview {
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: #f9f9f9; 
            transition: background-color 0.3s, border-color 0.3s;
        }
        #font-preview p {
            color: var(--text-primary);
        }
        #phone-screen.dark-mode #font-preview {
            background-color: #1c1c1e; 
            border-color: #38383a;     
        }
        #phone-screen.dark-mode #font-preview p {
            color: #ffffff;
        }
        .transfer-actions-content {
            background-color: #fff0f5; 
            border-radius: 20px;
            width: 290px;
            padding: 20px;
            box-shadow: 0 5px 25px rgba(255, 105, 180, 0.3); 
            text-align: center;
            position: relative;
            border: 1px solid #ffcce0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        .transfer-actions-header {
            font-size: 20px;
            font-weight: bold;
            color: #a35c7b; 
            margin-bottom: 15px;
        }
        .transfer-actions-body p {
            font-size: 15px;
            color: #555;
            margin: 0 0 25px 0;
            line-height: 1.5;
        }
        .transfer-actions-footer {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }
        .transfer-actions-footer .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            color: white;
        }
        .transfer-actions-footer .action-btn:active {
            transform: scale(0.95);
        }
        .transfer-actions-footer .action-btn.accept {
            background: linear-gradient(135deg, #ff85b3, #ff69b4);
            box-shadow: 0 4px 10px rgba(255, 105, 180, 0.4);
        }
        .transfer-actions-footer .action-btn.decline {
            background: linear-gradient(135deg, #c2c2c2, #a0a0a0);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .transfer-actions-content .cancel-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            background-color: rgba(0, 0, 0, 0.1);
            color: #a35c7b;
            font-size: 20px;
            line-height: 28px;
            cursor: pointer;
        }
        .unread-count-wrapper {
            flex-shrink: 0;
            width: 40px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 20px; 
        }
        .unread-count {
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            background-color: #ff3b30; 
            color: white;
            font-size: 13px;
            font-weight: 500;
            line-height: 20px;
            text-align: center;
            border-radius: 10px; 
            box-shadow: 0 1px 2px rgba(0,0,0,0.15);
            display: none; 
            justify-content: center;
            align-items: center;
        }
        #call-history-screen {
            background-color: #f0f2f5;
        }
        .call-record-card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-left: 5px solid var(--accent-color);
        }
        .call-record-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        .call-record-card .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        .call-record-card .card-header .duration {
            font-weight: 500;
            color: var(--text-primary);
        }
        .call-record-card .card-body {
            display: flex;
            align-items: center;
        }
        .call-record-card .participants-avatars {
            display: flex;
            align-items: center;
        }
        .call-record-card .participant-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .call-record-card .participant-avatar:not(:first-child) {
            margin-left: -12px;
        }
        .call-record-card .participants-names {
            margin-left: 12px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 15px;
        }
        #transcript-modal-body {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 15px;
        }
        .transcript-entry {
            padding: 8px 12px;
            border-radius: 10px;
            max-width: 85%;
            line-height: 1.5;
            word-break: break-word;
        }
        .transcript-entry.user {
            background-color: #dcf8c6; 
            align-self: flex-end;
        }
        .transcript-entry.assistant {
            background-color: #ffffff;
            align-self: flex-start;
        }
        #chat-list-title {
            cursor: pointer;
        }
        .call-record-card .card-body {
            display: flex;
            flex-direction: column;
            gap: 8px; 
        }
        .call-record-card .custom-title {
            font-size: 16px;
            font-weight: 600; 
            color: var(--text-primary);
            padding-bottom: 8px; 
            border-bottom: 1px solid var(--border-color); 
            margin-bottom: 4px; 
        }
        .call-record-card .participants-info {
            display: flex;
            align-items: center;
        }
        .call-record-card .participants-names {
            margin-left: 12px;
            font-weight: 500; 
            font-size: 14px; 
            color: var(--text-secondary); 
        }
        .voice-transcript {
            font-size: 14px;         
            line-height: 1.6;        
            color: var(--text-secondary); 
            padding: 8px 12px;       
            margin-top: 6px;         
            background-color: rgba(0, 0, 0, 0.04); 
            border-radius: 6px;      
            word-break: break-word;  
            display: none;           
        }
        #phone-screen.dark-mode .voice-transcript {
            background-color: rgba(255, 255, 255, 0.1); 
        }
        .loading-spinner {
            display: none; 
            width: 16px;
            height: 16px;
            border: 2px solid rgba(0, 0, 0, 0.2);
            border-top-color: var(--accent-color); 
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 8px; 
        }
        @keyframes spin {
            to {
        transform: rotate(360deg);
            }
        }
        #shared-history-viewer-content {
            display: flex;
            flex-direction: column; 
            gap: 20px; 
            padding: 15px; 
        }
        #music-player-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 50;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 60px;
            background-color: rgba(0,0,0,0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-50px);
            transition: opacity 0.4s ease-out, transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #music-player-overlay.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .music-player-window { 
            width: 70%; 
            min-height: 420px;
            background-color: rgba(255, 255, 255, 0.6); 
            backdrop-filter: blur(20px); 
            -webkit-backdrop-filter: blur(20px); 
            border-radius: 25px; 
            box-shadow: 0 8px 32px 0 rgba(25, 25, 25, 0.37); 
            border: 1px solid rgba(255, 255, 255, 0.18); 
            padding: 25px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #1f1f1f; 
            position: relative;
            justify-content: space-between;
            padding-bottom: 15px;
        }
        .music-player-top-actions {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            width: calc(100% - 30px);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .top-left-cluster {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        #music-return-btn, #music-exit-btn {
            background: none;
            border: none;
            font-size: 28px;
            font-weight: 300;
            cursor: pointer;
            color: #555;
            padding: 5px;
            line-height: 1;
        }
        #music-exit-btn {
            font-size: 24px;
            font-weight: 400;
        }
        .music-progress-bar-container {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .time-display {
            font-size: 11px;
            color: #888;
            width: 35px;
            text-align: center;
            flex-shrink: 0;
            font-family: 'SF Mono', 'Menlo', monospace;
        }
        .progress-bar {
            flex-grow: 1;
            height: 5px;
            background-color: #e5e5e5;
            border-radius: 2.5px;
            cursor: pointer;
        }
        .progress-bar-fill {
            width: 0%;
            height: 100%;
            background-color: #333;
            border-radius: 2.5px;
        }
        #music-lyrics-container {
            width: 100%;
            height: 192px;
            overflow: hidden;
            position: relative;
            -webkit-mask-image: linear-gradient(transparent, black 20%, black 80%, transparent);
            mask-image: linear-gradient(transparent, black 20%, black 80%, transparent);
        }
        #music-lyrics-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        .lyric-line {
            padding: 4px 0;
            font-size: 14px;
            color: #666;
            text-align: center;
            line-height: 1.5;
            transition: all 0.5s ease;
            opacity: 0.7;
            transform: scale(0.95);
        }
        .lyric-line.active {
            font-size: 16px;
            color: #000;
            opacity: 1;
            transform: scale(1);
        }
        .music-player-controls-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .music-controls {
            margin-top: 0;
        }
        #music-return-btn, #music-exit-btn, #music-playlist-btn {
            position: relative;
        }
        #music-return-btn { top: -2px; }
        #music-playlist-btn { top: -3px; }
        .playlist-item-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .playlist-action-btn {
            font-size: 18px;
            color: #888;
            cursor: pointer;
            transition: color 0.2s;
        }
        .playlist-action-btn:hover { color: #000; }
        .delete-track-btn { font-size: 24px; color: #ff3b30; }
        .delete-track-btn:hover { color: #c00; }
        .lyrics-btn { font-weight: 500; }
        .message-bubble .avatar {
            width: 34px;
            height: 34px;
            border-radius: 20%;
            object-fit: cover;
            flex-shrink: 0; 
        }
        .recalled-message-placeholder {
            align-self: center; 
            padding: 4px 12px;
            margin: 5px 0;
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
            cursor: pointer; 
        }
        #phone-screen.dark-mode .recalled-message-placeholder {
            background-color: rgba(255, 255, 255, 0.15);
        }
        @keyframes recall-animation {
          from {
            opacity: 1;
            transform: scale(1);
          }
          to {
            opacity: 0;
            transform: scale(0.8);
          }
        }
        .message-wrapper.recalled-animation {
          animation: recall-animation 0.3s ease-out forwards;
        }
        .recalled-message-placeholder {
            white-space: nowrap; 
            display: inline-block; 
            padding: 4px 12px;
        }
        .world-book-group-container {
            border-bottom: 1px solid var(--border-color);
        }
        .world-book-group-container:first-child {
            border-top: 1px solid var(--border-color);
        }
        .world-book-group-header {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            cursor: pointer;
            background-color: #f7f7f7;
        }
        .world-book-group-header .arrow {
            font-size: 14px;
            margin-right: 8px;
            transition: transform 0.2s ease;
        }
        .world-book-group-header.collapsed .arrow {
            transform: rotate(-90deg);
        }
        .world-book-group-header .group-name {
            font-weight: 600;
            font-size: 15px;
        }
        .world-book-group-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .world-book-group-content.collapsed {
            max-height: 0;
        }
        #phone-screen.dark-mode .world-book-group-header {
            background-color: #1c1c1e;
        }
        .chat-list-item.pinned {
            background-color: #f0f2f5; 
        }
        #phone-screen.dark-mode .chat-list-item.pinned {
            background-color: #2c2c2e; 
        }
        #chat-input-area {
            display: flex;
            flex-direction: column;
            flex-shrink: 0; 
            background-color: var(--secondary-bg); 
        }
        #chat-input-actions-top {
            flex-shrink: 0; 
            padding-bottom: 8px; 
        }
        #chat-input-main-row {
            flex-shrink: 0; 
        }
        #chat-input-area {
            position: relative; 
            z-index: 20;      
            flex-shrink: 0;
            padding: 8px;
            background-color: rgba(247, 247, 247, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        #chat-at-mention-popup {
            bottom: 100%; 
            left: 8px;    
            right: 8px;   
            width: auto;  
            margin-bottom: 5px; 
        }
        #announcement-board-modal .modal-content {
            height: 70%;
            background-color: #f0f2f5;
        }
        #announcement-board-content {
            padding: 15px;
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px; 
        }
        #announcement-board-content .message-wrapper {
            max-width: 100%; 
            align-self: center;
        }
        #announcement-board-content .timestamp {
            display: none; 
        }
        .announcement-item-wrapper {
            position: relative; 
            padding: 10px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .announcement-item-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
            font-weight: bold;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            line-height: 1;
            border-radius: 50%;
        }
        .announcement-item-actions:hover {
            background-color: #f0f0f0;
        }
        .pinned-indicator {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 28px;
            height: 28px;
            background-color: #ffc107;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: 2px solid white;
        }
        .reposted-content-wrapper {
            background-color: #f7f7f8;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
        }
        #phone-screen.dark-mode .reposted-content-wrapper {
            background-color: #2c2c2e;
            border-color: #38383a;
        }
        .reposted-content-wrapper .post-footer,
        .reposted-content-wrapper .post-feedback-icons,
        .reposted-content-wrapper .post-likes-section {
            display: none;
        }
        .reposted-content-wrapper .post-header {
            margin-bottom: 8px;
        }
        .reposted-content-wrapper .post-avatar {
            width: 32px;
            height: 32px;
        }
        .reposted-content-wrapper .post-nickname {
            font-size: 14px;
        }
        .location-share-card {
            width: 230px;
            border-radius: 10px;
            overflow: hidden; 
            background-color: var(--secondary-bg);
            border: 1px solid #f0f0f0;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            cursor: pointer; 
        }
        .card-text-area {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
        }
        .card-text-primary {
            font-size: 16px;
            font-weight: 600;
            color: #222;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .card-text-secondary {
            font-size: 12px;
            color: #a0a0a0;
        }
        .card-map-area {
            height: 100px; 
            display: flex;
            justify-content: center;
            align-items: center;
            background-size: cover;
            background-position: center;
            background-color: #FFF0F5; 
        }
        .message-bubble.user .location-share-card .card-map-area {
            background-color: #F0FFF8;
        }
        .card-pin-icon {
            font-size: 40px;
            color: #FF6B6B; 
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.4); 
        }
        @keyframes breathing-light {
            0% {
        box-shadow: 0 0 6px rgba(0, 123, 255, 0.4);
            }
            50% {
        box-shadow: 0 0 18px 4px rgba(0, 123, 255, 0.8);
            }
            100% {
        box-shadow: 0 0 6px rgba(0, 123, 255, 0.4);
            }
        }
        .chat-list-item .avatar.is-acting {
            animation: breathing-light 2s ease-in-out infinite;
            border: 1.5px solid rgba(0, 123, 255, 0.7);
        }
        .comment-sticker-btn {
            background: none;
            border: none;
            padding: 5px; 
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .comment-sticker-btn:hover {
            color: var(--text-primary); 
        }
        .comment-sticker-btn svg {
            width: 22px;
            height: 22px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        #qzone-sticker-panel {
            position: absolute; 
            width: 280px;
            height: 200px;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            z-index: 1010; 
            display: none; 
            flex-direction: column;
            overflow: hidden;
        }
        #qzone-sticker-grid {
            flex-grow: 1;
            overflow-y: auto;
            padding: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
        }
        #qzone-sticker-grid .sticker-item {
            position: relative;
            aspect-ratio: 1 / 1;
            background-color: white;
            border-radius: 8px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .comment-text .comment-sticker {
            max-width: 100px;  
            max-height: 100px; 
            display: block;
            background-color: transparent;
        }
        .comment-item .comment-text:has(.comment-sticker) {
            line-height: 1;
        }
        .change-frame-btn {
            padding: 6px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            margin-left: 10px;
        }
        #avatar-frame-modal .modal-content {
            height: 70%;
        }
        #avatar-frame-modal .modal-body {
            padding: 0;
            display: flex;
            flex-direction: column;
        }
        .frame-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        .frame-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            font-weight: 500;
            cursor: pointer;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
        }
        .frame-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }
        .frame-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
        }
        .frame-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 15px;
        }
        .frame-item {
            aspect-ratio: 1 / 1;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            background-color: #f0f0f0;
            background-size: cover;
            background-position: center;
            padding: 5px;
            transition: all 0.2s ease;
            position: relative;
        }
        .frame-item.selected {
            border-color: var(--accent-color);
            transform: scale(1.05);
        }
        .frame-item .preview-avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }
        .frame-item .preview-frame {
            position: absolute;
            top: -7px;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .avatar-group {
            width: 34px;
            flex-shrink: 0; 
            position: relative;
            transition: width 0.2s ease;
        }
        .avatar-group.has-frame {
            width: 34px; 
        }
        .message-bubble .avatar {
            width: 34px;
            height: 34px;
            border-radius: 20%; 
            object-fit: cover;
        }
        .avatar-with-frame {
            position: relative; 
            width: 38px;
            height: 38px;
            margin: 0 auto;
            transition: all 0.2s ease;
        }
        .avatar-group.has-frame .avatar-with-frame {
            width: 43px;
            height: 43px;
        }
        .avatar-with-frame .avatar-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; 
            height: 100%;
            border-radius: 50%; 
            object-fit: cover;
            z-index: 1; 
        }
        .avatar-with-frame .avatar-frame {
            position: absolute;
            width: 120%;  
            height: 120%; 
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2; 
            pointer-events: none; 
        }
.message-bubble {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    max-width: 100%;
}
.message-bubble.user { 
    flex-direction: row-reverse; 
}
.message-bubble .content {
    flex: 1;
    min-width: 0;
    overflow-wrap: break-word; 
    word-wrap: break-word;     
    position: relative;
    font-size: var(--chat-font-size, 16px);
    padding: 8px 12px;
    line-height: 1.5;
}
.message-bubble .avatar-group {
    flex-shrink: 0 !important;
}
        #chat-interface-screen .message-bubble .avatar-group.has-frame .avatar-with-frame {
            width: 34px !important;
            height: 34px !important;
        }
        #chat-interface-screen .message-bubble .avatar-with-frame .avatar-img {
            width: 100% !important;
            height: 100% !important;
        }
        .message-bubble.is-link-share .content,
        .message-bubble.is-transfer .content,
        .message-bubble.is-waimai-request .content,
        .message-bubble.is-red-packet .content,
        .message-bubble.is-poll .content,
        .message-bubble.is-location-share .content,
        .message-bubble.is-sticker .content,
        .message-bubble.is-ai-image .content {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #chat-list-screen .avatar-frame {
            display: none;
        }
        #chat-list-screen .avatar-group {
            width: 45px;
            height: 45px;
        }
        #chat-list-screen .avatar-group.has-frame .avatar-with-frame,
        #chat-list-screen .avatar-group.has-frame .avatar-img {
            width: 45px;
            height: 45px;
        }
        #chat-list-screen .avatar-img,
        #chat-list-screen .avatar {
            border-radius: 50%;
        }
        #chat-list .chat-list-item .avatar-group {
            margin-right: 15px !important; 
        }
        #chat-list .chat-list-item .avatar {
            margin-right: 0; 
        }
        .comment-item {
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px; 
            padding: 4px 6px; 
            margin: 0 -6px; 
            border-radius: 4px;
        }
        .comment-item:hover {
            background-color: #f0f2f5;
        }
        #phone-screen.dark-mode .comment-item:hover {
            background-color: #2c2c2e;
        }
        .comment-item .comment-text {
            flex-grow: 1; 
            word-break: break-word; 
        }
        .legacy-comment-item {
            line-height: 1.5;
            padding: 4px 6px; 
            color: var(--text-secondary); 
        }
        .message-bubble.is-link-share .content,
        .message-bubble.is-transfer .content,
        .message-bubble.is-waimai-request .content,
        .message-bubble.is-red-packet .content,
        .message-bubble.is-poll .content,
        .message-bubble.is-location-share .content,
        .message-bubble.is-sticker .content,
        .message-bubble.is-ai-image .content {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #chat-interface-screen .message-bubble .avatar-group.has-frame .avatar-with-frame {
            width: 34px !important;
            height: 34px !important;
        }
        #chat-interface-screen .message-bubble .avatar-with-frame .avatar-img {
            width: 100% !important;
            height: 100% !important;
        }
        .message-bubble.is-sticker,
        .message-bubble.is-voice-message,
        .message-bubble.is-transfer,
        .message-bubble.is-ai-image,
        .message-bubble.is-waimai-request,
        .message-bubble.is-red-packet,
        .message-bubble.is-poll,
        .message-bubble.is-link-share,
        .message-bubble.is-location-share {
            flex: initial; 
            min-width: auto; 
        }
        .message-bubble.is-sticker .content,
        .message-bubble.is-voice-message .content,
        .message-bubble.is-transfer .content,
        .message-bubble.is-ai-image .content,
        .message-bubble.is-waimai-request .content,
        .message-bubble.is-red-packet .content,
        .message-bubble.is-poll .content,
        .message-bubble.is-link-share .content,
        .message-bubble.is-location-share .content {
            flex: initial; 
            padding: 0;
            background: transparent;
            box-shadow: none;
            border: none;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }
        #announcement-board-content .message-wrapper {
            align-self: flex-start !important;
        }
        #announcement-board-content .message-bubble.user {
            flex-direction: row !important;
        }
        #announcement-board-content .message-wrapper.user {
            flex-direction: row !important;
        }
        #chat-interface-screen > .header {
            position: absolute !important; 
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100 !important; 
        }
        #chat-interface-screen #chat-messages {
            margin-top: 0 !important; 
        }
        #music-player-overlay {
            z-index: 200 !important;
        }
        #chat-interface-screen {
            position: relative !important;
            height: 100%;
            width: 100%;
            overflow: hidden; 
        }
        #chat-interface-screen > .header {
            position: absolute !important;
            top: 0;
            left: 0;
            right: 0; 
            width: auto !important; 
            z-index: 100 !important; 
        }
        #chat-interface-screen #chat-input-area {
            position: absolute !important;
            bottom: 0;
            left: 0;
            right: 0;
            width: auto !important;
            z-index: 100 !important;
            padding-bottom: calc(8px + env(safe-area-inset-bottom)); 
        }
        #chat-interface-screen #chat-messages {
            height: 100% !important; 
            width: 100% !important;
            overflow-y: auto !important; 
            box-sizing: border-box !important; 
            margin-top: 0 !important; 
            padding-top: calc(120px + env(safe-area-inset-top)) !important; 
            padding-bottom: calc(120px + env(safe-area-inset-bottom)) !important;
        }
        .post-deleted-placeholder {
            align-self: center;
            padding: 4px 12px;
            margin: 5px 0;
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--text-secondary);
            font-size: 12px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
            cursor: pointer; 
        }
        #phone-screen.dark-mode .post-deleted-placeholder {
            background-color: rgba(255, 255, 255, 0.15);
        }
        .spoiler {
            background-color: #333; 
            color: #333;           
            padding: 0 4px;         
            border-radius: 4px;     
            cursor: pointer;        
            transition: all 0.2s ease-in-out; 
        }
        .spoiler:hover, .spoiler:active {
            background-color: #e0e0e0; 
            color: inherit;           
        }
        .memory-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px; 
            border-radius: 50%; 
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .memory-action-btn svg {
            width: 18px;  
            height: 18px;
            stroke: var(--text-secondary); 
            transition: stroke 0.2s;
        }
        .memory-action-btn:hover {
            background-color: #e9ecef; 
        }
        #phone-screen.dark-mode .memory-action-btn:hover {
            background-color: #38383a;
        }
        .memory-action-btn.edit-memory-btn:hover svg {
            stroke: var(--accent-color);
        }
        .memory-action-btn.delete-memory-btn:hover svg {
            stroke: #ff3b30;
        }
        #sticker-grid.management-mode .sticker-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-radius: 10px;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        #sticker-grid.management-mode .sticker-item.selected::after {
            border-color: var(--accent-color);
        }
        #sticker-grid.management-mode .sticker-item .delete-btn {
            display: block;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid white;
        }
        #sticker-action-bar {
            display: none; 
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
        }
        #sticker-action-bar button {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
        #ai-response-editor-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .ai-response-editor-block {
            background-color: #f9f9f9;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
        }
        .ai-response-editor-block textarea {
            width: 100%;
            min-height: 80px; 
            resize: vertical;
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 8px;
            font-size: 14px; 
            font-family: monospace; 
            box-sizing: border-box;
        }
        .ai-response-editor-block .format-helpers {
            margin-top: 8px;
            margin-bottom: 0; 
        }
        .ai-response-editor-block .delete-block-btn {
            float: right;
            margin-top: -5px;
            background: none;
            border: none;
            color: #ff3b30;
            font-size: 20px;
            cursor: pointer;
        }
        #phone-screen.dark-mode .ai-response-editor-block {
            background-color: #2c2c2e;
            border-color: #38383a;
        }
        #phone-screen.dark-mode .ai-response-editor-block textarea {
            background-color: #1c1c1e;
            color: #f0f0f0;
            border-color: #4a4a4e;
        }
.offline-dialogue {
    font-weight: 500;
}
.offline-description {
    display: block; 
    color: inherit; 
    font-style: normal; 
    margin-top: 4px; 
    white-space: pre-wrap; 
    line-height: 1.6;
}
.offline-description em {
    color: var(--text-secondary); 
}
#phone-screen.dark-mode .offline-description {
    color: inherit; 
}
        .message-bubble .content {
            transition: background-color 0.5s ease-out;
        }
        .message-bubble.highlighted .content {
            background-color: rgba(0, 123, 255, 0.2) !important;
        }
        #gomoku-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 350px;
            z-index: 50;
            pointer-events: none; 
            overflow: hidden;     
            display: none;        
        }
        #gomoku-content-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent !important;
            backdrop-filter: none !important;
            box-shadow: none !important;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            box-sizing: border-box;
            transition: transform 0.3s ease-out;
            transform: translateY(-100%);
            pointer-events: auto;
        }
        #phone-screen.dark-mode #gomoku-content-wrapper {
            background-color: rgba(28, 28, 30, 0.9);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        #gomoku-overlay.visible #gomoku-content-wrapper {
            transform: translateY(0);
        }
        #chat-messages {
            transition: padding-top 0.3s ease-out;
        }
        #gomoku-board {
            background-color: #e4b591;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            cursor: pointer;
        }
        #gomoku-controls {
            width: 100%;
            text-align: center;
            flex-shrink: 0;
        }
        #close-gomoku-btn {
            padding: 6px 15px;
            border-radius: 15px;
            border: 1px solid var(--text-secondary);
            background-color: rgba(255,255,255,0.5);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
        }
        #phone-screen.dark-mode #close-gomoku-btn {
            background-color: rgba(0,0,0,0.2);
            border-color: var(--text-secondary);
        }
        #gomoku-overlay {
            pointer-events: none;
        }
        #gomoku-board,
        #gomoku-controls {
            pointer-events: auto;
        }
        #product-grid {
            flex-grow: 1; 
            overflow-y: auto; 
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            padding: 10px;
            padding-bottom: 80px;
        }
        .product-item {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.04);
            display: flex;         
            flex-direction: column;
            cursor: pointer;
            position: relative;
        }
        .product-image {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
        }
        .product-info {
            padding: 12px 10px;
            flex-grow: 1;      
            display: flex;
            flex-direction: column;
        }
        .product-name {
            font-size: 13px;
            color: #333;
            line-height: 1.4;
            min-height: 36px;
        }
        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;      
        }
        .product-price {
            font-size: 16px;
            font-weight: 700;
            color: #ff5722;
        }
        .product-price::before { content: '¬•'; font-size: 12px; }
        .add-to-cart-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 15px;
            background: linear-gradient(90deg, #ff9800, #ff5722);
            color: white;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
        }
        .product-management-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
            z-index: 7;
        }
        .product-management-overlay button {
            padding: 8px 20px;
            border: 1px solid white;
            background-color: rgba(255,255,255,0.2);
            color: white;
            border-radius: 15px;
            cursor: pointer;
        }
        .product-management-overlay .delete-product-btn {
            border-color: #ff8a80;
            color: #ff8a80;
        }
        #shopping-screen.management-mode .product-footer {
            display: none;
        }
        #cart-title {
            position: static;
            transform: none;
        }
        #cart-items-list { padding: 10px; display: flex; flex-direction: column; gap: 10px; }
        .cart-item {
            display: flex; align-items: flex-start; gap: 12px; background-color: white;
            padding: 12px; border-radius: 12px;
        }
        .cart-item-checkbox { margin-top: 28px; }
        .cart-item-image { width: 80px; height: 80px; object-fit: cover; border-radius: 8px; flex-shrink: 0; }
        .cart-item-info { flex-grow: 1; display: flex; flex-direction: column; }
        .cart-item-name { font-weight: 500; font-size: 14px; line-height: 1.4; }
        .cart-item-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 10px;}
        .cart-item-price { color: #ff5722; font-weight: bold; font-size: 16px; }
        .quantity-control { display: flex; align-items: center; gap: 4px; }
        .quantity-btn {
            width: 26px; height: 26px; border: none; background-color: #f7f8fa;
            border-radius: 4px; font-weight: 500; cursor: pointer; color: #666;
        }
        .quantity-display { font-weight: 500; min-width: 30px; text-align: center; }
        #cart-footer {
            position: absolute; bottom: 0; left: 0; width: 100%; display: flex;
            justify-content: space-between; align-items: center; padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            background-color: white; border-top: 1px solid var(--border-color); box-sizing: border-box;
        }
        #cart-footer .select-all-label { display: flex; align-items: center; gap: 5px; }
        #cart-footer .cart-summary { text-align: right; }
        #cart-footer .cart-subtext { font-size: 11px; color: #999; }
        #checkout-btn {
            padding: 10px 25px; border: none; border-radius: 20px;
            background: linear-gradient(90deg, #ff9800, #ff5722);
            color: white; font-size: 15px; font-weight: 500; cursor: pointer;
        }
        .gift-card {
            width: 220px; 
            box-sizing: border-box; 
            border-radius: 12px; 
            background-color: var(--secondary-bg); 
            border: 1px solid #eee; 
            padding: 12px;
            cursor: pointer; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        }
        .gift-header { display: flex; align-items: center; gap: 8px; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0; }
        .gift-header-icon { width: 20px; height: 20px; color: #ff9800; }
        .gift-header-text { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .gift-items-preview { padding: 12px 0; display: flex; flex-direction: column; gap: 8px; }
        .gift-preview-item { display: flex; align-items: center; gap: 8px; }
        .gift-preview-img { width: 32px; height: 32px; object-fit: cover; border-radius: 4px; flex-shrink: 0; }
        .gift-preview-name { flex-grow: 1; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .gift-preview-quantity { font-size: 12px; color: var(--text-secondary); }
        .gift-footer { font-size: 12px; color: var(--text-secondary); text-align: right; }
        #gift-receipt-body { font-family: 'Helvetica Neue', Arial, sans-serif; padding: 15px; background-color: #f7f8fa; }
        .receipt-header { text-align: center; padding-bottom: 15px; border-bottom: 1px solid #ddd; }
        .receipt-header h3 { margin: 0 0 5px 0; font-size: 20px; }
        .receipt-header p { margin: 0; font-size: 12px; color: #888; }
        .receipt-items-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .receipt-items-table th, .receipt-items-table td { padding: 10px 5px; font-size: 13px; }
        .receipt-items-table thead th { border-bottom: 1px solid #333; text-align: left; }
        .receipt-items-table .item-name { width: 50%; }
        .receipt-items-table .item-qty { text-align: center; }
        .receipt-items-table .item-price, .receipt-items-table .item-subtotal { text-align: right; }
        .receipt-total { padding-top: 15px; border-top: 1px solid #333; text-align: right; font-size: 16px; font-weight: bold; }
        .receipt-footer { text-align: center; margin-top: 25px; font-size: 12px; color: #888; }
        .product-item {
            position: relative; 
        }
.product-management-overlay {
    position: absolute;
    bottom: 0; 
    left: 0;
    width: 100%;
    background-color: rgba(0,0,0,0.6); 
    display: none; 
    justify-content: center; 
    align-items: center;
    gap: 15px; 
    padding: 10px 0; 
    border-radius: 0 0 8px 8px; 
    z-index: 5; 
    transition: opacity 0.2s;
}
        #shopping-screen.management-mode .product-management-overlay {
            display: flex; 
        }
        .product-management-overlay button {
            padding: 8px 20px;
            border: 1px solid white;
            background-color: rgba(255,255,255,0.2);
            color: white;
            border-radius: 15px;
            cursor: pointer;
        }
        .product-management-overlay .delete-product-btn {
            border-color: #ff8a80;
            color: #ff8a80;
        }
        #shopping-screen.management-mode .add-to-cart-btn {
            display: none;
        }
        .message-bubble.is-card-like {
            flex: initial; 
            min-width: auto; 
        }
        .message-bubble.is-card-like .content {
            flex: initial; 
            padding: 0;
            background: transparent;
        }
        #go-to-cart-btn {
            display: flex;
            align-items: center; 
            gap: 4px; 
        }
        #gift-recipient-list .contact-picker-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }
        #gift-recipient-list .contact-picker-item:last-child {
            border-bottom: none;
        }
        #gift-recipient-list .contact-picker-item .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 15px;
            transition: all 0.2s ease;
        }
        #gift-recipient-list .contact-picker-item.selected .checkbox {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }
        #gift-recipient-list .contact-picker-item .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }
        #gift-recipient-list .contact-picker-item .name {
            font-weight: 500;
        }
        #ai-heart-rate-display {
            display: none !important;
        }
        #global-lyrics-bar {
            position: absolute;
            z-index: 20;
            display: flex;
            align-items: center;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            background-color: rgba(0, 0, 0, 0.05);
            padding: 4px 12px;
            border-radius: 12px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease, top 0.3s ease, bottom 0.3s ease, left 0.3s ease, right 0.3s ease, transform 0.3s ease;
            pointer-events: none;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 65%;
        }
        #phone-screen.dark-mode #global-lyrics-bar {
            color: #a0a0a0;
            background-color: rgba(255, 255, 255, 0.1);
        }
        #global-lyrics-bar.visible {
            opacity: 1;
            visibility: visible;
        }
        #phone-screen.dark-mode #global-lyrics-bar {
            color: #a0a0a0;
            background-color: rgba(255, 255, 255, 0.1);
        }
        #world-book-screen {
            background-color: #f0f2f5;
            display: flex; 
            flex-direction: column;
        }
        #phone-screen.dark-mode #world-book-screen {
            background-color: #000000;
        }
        #world-book-tabs {
            display: flex;
            overflow-x: auto; 
            padding: 10px 15px 0 15px;
            flex-shrink: 0; 
            border-bottom: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            -ms-overflow-style: none;  
            scrollbar-width: none;  
        }
        #world-book-tabs::-webkit-scrollbar {
            display: none; 
        }
        .world-book-tab {
            padding: 8px 16px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px; 
            transition: all 0.2s ease-in-out;
            white-space: nowrap; 
        }
        .world-book-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            font-weight: 600;
        }
        #phone-screen.dark-mode .world-book-tab.active {
            color: #ffffff;
        }
        #world-book-content-container {
            flex-grow: 1;
            overflow-y: auto;
        }
        .world-book-category-pane {
            display: none; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 15px;
            padding: 15px;
        }
        .world-book-category-pane.active {
            display: grid;
        }
.world-book-card {
    background-color: var(--secondary-bg);
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-width: 0;
    word-break: break-all;
}
        .world-book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        #phone-screen.dark-mode .world-book-card {
            box-shadow: 0 2px 8px rgba(255,255,255,0.05);
        }
        .world-book-card .card-title {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; 
        }
        .world-book-card .card-content-preview {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3; 
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        #rendering-rules-screen {
            background-color: #f0f2f5;
            display: flex; 
            flex-direction: column;
        }
        #phone-screen.dark-mode #rendering-rules-screen {
            background-color: #000000;
        }
        #rules-tabs {
            display: flex;
            overflow-x: auto;
            padding: 10px 15px 0 15px;
            flex-shrink: 0;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #rules-tabs::-webkit-scrollbar {
            display: none;
        }
        .rules-tab {
            padding: 8px 16px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
            transition: all 0.2s ease-in-out;
            white-space: nowrap;
        }
        .rules-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            font-weight: 600;
        }
        #phone-screen.dark-mode .rules-tab.active {
            color: #ffffff;
        }
        #rules-content-container {
            flex-grow: 1;
            overflow-y: auto;
        }
        .rules-category-pane {
            display: none; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 15px;
            padding: 15px;
        }
        .rules-category-pane.active {
            display: grid;
        }
        .rule-card {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 8px; 
            border-left: 5px solid #6c757d; 
        }
        .rule-card.enabled {
            border-left-color: #28a745; 
        }
        .rule-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        }
        #phone-screen.dark-mode .rule-card {
            box-shadow: 0 2px 8px rgba(255,255,255,0.05);
        }
        .rule-card .card-title {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .rule-card .card-content-preview {
            font-size: 12px;
            font-family: monospace; 
            color: var(--text-secondary);
            background-color: #f0f2f5;
            padding: 5px 8px;
            border-radius: 4px;
            word-break: break-all;
        }
        #phone-screen.dark-mode .rule-card .card-content-preview {
            background-color: #2c2c2e;
        }
        .control-btn.regenerate-btn {
            background-color: rgba(255, 255, 255, 0.2);
            background-size: 55%; 
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4"/><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>');
        }
        .control-btn.propel-btn {
            background-color: rgba(255, 255, 255, 0.2);
            background-size: 55%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon></svg>');
        }
.message-bubble.is-raw-html .content {
    padding: 0 !important; 
    background: transparent !important; 
    border: none !important; 
    box-shadow: none !important; 
}
#phone-screen {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-touch-callout: none;
}
#home-screen #clock-container,
#home-screen #app-grid,
#home-screen #home-widgets-container {
    display: none !important;
}
#home-screen {
    background: linear-gradient(135deg, #6DD5FA, #2980B9);
    background-size: cover;
    background-position: center;
    padding: 20px;
    padding-top: calc(20px + env(safe-area-inset-top));
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: space-between; 
    align-items: center;
    height: 100%;
}
#main-content-area {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 30px; 
    align-items: center;
    margin-top: 20px; 
}
#profile-widget {
    position: relative; 
    width: 100%;
    max-width: 380px;
    flex-shrink: 0;
}
#profile-banner-img {
    display: block; 
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 24px 24px 0 0; 
    position: relative;
    z-index: 1; 
}
#profile-widget .profile-avatar-container {
    position: absolute;
    top: 80px; 
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background-color: white; 
    padding: 4px; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 3; 
}
#profile-avatar-img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
#profile-widget .profile-info {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 24px;
    margin-top: -24px; 
    padding-top: 44px; 
    min-height: 120px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 15px;
    padding-right: 15px;
    padding-bottom: 15px;
    text-align: center;
    color: #1c1c1e;
    position: relative;
    z-index: 2; 
}
#profile-widget::before {
    display: none !important;
}
#profile-avatar-img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
#profile-widget::before {
    display: none !important;
}
#profile-avatar-img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
#profile-username { font-size: 18px; font-weight: 600; margin: 0 0 2px 0; }
#profile-sub-username { font-size: 13px; color: #8a8a8a; margin: 0 0 10px 0; }
#profile-bio { font-size: 14px; margin: 0 0 12px 0; color: #333; }
#profile-location {
    font-size: 12px; color: #8a8a8a; margin: 0 auto; display: inline-flex;
    align-items: center; gap: 4px; background-color: rgba(0,0,0,0.05);
    padding: 3px 9px; border-radius: 10px;
}
#desktop-layout {
    display: grid;
    grid-template-columns: 1fr 1.1fr;
    gap: 20px;
    width: 100%;
    align-items: start;
}
#desktop-widget-column {
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.widget-header {
    font-size: 14px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.8);
    margin: 0 0 5px 5px;
}
.desktop-widget {
    background-color: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 18px;
    padding: 12px 15px;
    color: #1f1f1f; 
    font-weight: 500;
    font-size: 13px;
    display: flex;
    align-items: center;
}
.desktop-widget.text-only {
    background-color: transparent; 
    border: none;                  
    padding: 0;                    
    box-shadow: none;              
}
.desktop-widget.icon-left { justify-content: flex-start; gap: 10px; }
.desktop-widget.icon-right {
    justify-content: flex-end; 
    gap: 10px;                 
}
.desktop-widget img { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; }
.desktop-widget p, .desktop-widget span { margin: 0; }
#desktop-app-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    align-content: start;
}
#desktop-dock {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    padding: 15px 25px;
    display: flex;
    justify-content: center;
    gap: 30px;
    width: fit-content;
    flex-shrink: 0;
    margin-bottom: calc(20px + env(safe-area-inset-bottom));
}
.desktop-app-icon {
    display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; text-align: center;
}
.icon-bg-desktop {
    width: 55px; height: 55px; border-radius: 14px; background-color: #f0f2f5; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: transform 0.2s ease; overflow: hidden;
}
.icon-bg-desktop img {
    width: 100%; height: 100%; object-fit: cover; border-radius: 0;
}
.desktop-app-icon .label {
    color: #333; font-size: 13px; font-weight: 500;
}
.desktop-app-icon:active .icon-bg-desktop {
    transform: scale(0.9);
}
.editable-text:hover, .editable-image:hover {
    outline: 2px dashed rgba(255, 255, 255, 0.8);
    cursor: pointer;
    opacity: 0.9;
}
.editable-text, .editable-image {
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}
.editable-text:hover, .editable-image:hover {
    outline: 2px dashed rgba(255, 255, 255, 0.8);
    opacity: 0.9;
    border-radius: 4px; 
}
#profile-widget .profile-info {
    background: transparent !important;
    position: relative;
    z-index: 1; 
}
#profile-widget .profile-info::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 24px;
    mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
    z-index: -1;
}
#chat-settings-screen {
    display: flex;
    flex-direction: column;
    background-color: #f0f2f5; 
}
#phone-screen.dark-mode #chat-settings-screen {
     background-color: #000000; 
}
#chat-settings-screen .form-container {
    flex-grow: 1;      
    overflow-y: auto;  
    padding-top: 100px;  
    margin-top: -80px;   
}
.search-result-item {
    display: flex;
    flex-direction: column;
    padding: 12px 18px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}
.search-result-item:hover {
    background-color: rgba(0, 0, 0, 0.1);
}
#phone-screen.dark-mode .search-result-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}
.search-result-item .title {
    font-weight: 500;
    font-size: 15px;
    color: var(--text-primary);
}
.search-result-item .artist {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 4px;
}
.search-result-item .source {
    font-size: 10px;
    color: var(--accent-color);
    background-color: rgba(0, 123, 255, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    margin-left: 8px;
}
#music-player-cover {
    width: 180px;
    height: 180px;
    border-radius: 15px;
    object-fit: cover;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    margin-bottom: 25px; 
    transition: opacity 0.5s ease-in-out; 
}
#music-visual-container {
    position: relative;
    width: 220px;
    height: 220px;
    margin-bottom: 25px;
    cursor: pointer;
}
#vinyl-view, #inline-lyrics-view {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 0.5s ease, transform 0.5s ease;
}
#vinyl-view {
    background-color: #222;
    border-radius: 50%;
    padding: 18px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3), 
                inset 0 0 0 2px rgba(255, 255, 255, 0.05);
    background-image: repeating-radial-gradient(circle, #333, #333 1px, #222 1px, #222 2px);
    box-sizing: border-box;
}
#vinyl-view #music-player-cover {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    margin: 0; 
}
#inline-lyrics-view {
    opacity: 0;
    transform: scale(1.1);
    pointer-events: none;
    padding: 10px;
    box-sizing: border-box;
}
#music-visual-container.lyrics-active #vinyl-view {
    opacity: 0;
    transform: scale(0.9);
}
#music-visual-container.lyrics-active #inline-lyrics-view {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
}
#inline-lyrics-view #music-lyrics-container {
    width: 100%;
    height: 100%;
}
#music-info-top {
    text-align: center; 
    flex-shrink: 0;
    margin-bottom: 20px; 
}
#music-player-song-title,
#music-player-artist,
#music-time-counter {
    margin-bottom: 5px; 
}
#music-visual-container {
    margin-bottom: 15px; 
}
@keyframes spin-vinyl {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
#vinyl-view.spinning {
  animation: spin-vinyl 12s linear infinite;
}
#single-lyric-display {
    height: 40px;          
    line-height: 40px;     
    width: 100%;           
    margin-top: 15px;      
    text-align: center;    
    font-size: 14px;       
    color: #333;           
    font-weight: 500;      
    transition: opacity 0.3s ease; 
    white-space: nowrap;           
    overflow: hidden;              
    text-overflow: ellipsis;       
}
#music-visual-container.lyrics-active + #single-lyric-display {
    display: none;
}
#character-profile-modal {
    background-color: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}
.character-profile-content {
    width: 320px;
    height: 75vh;
    max-height: 580px;
    background-color: #f0f2f5;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    display: flex;
    flex-direction: column;
    position: relative;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
     overflow: visible; 
    padding-top: 40px; 
}
.profile-history-icon-btn { /* <--- Ê†∏ÂøÉ‰øÆÊîπ1Ôºö‰ªé ID (#) Êîπ‰∏∫Á±ª (.) */
    /* Ê†∏ÂøÉ‰øÆÊîπ2ÔºöÁßªÈô§‰∫Ü position, top, right, z-index Ëøô‰∫õÁªùÂØπÂÆö‰ΩçÂ±ûÊÄß */
    width: 36px;
    height: 36px;
    background: none;
    border: none;
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
    padding: 0;
}
#profile-history-icon-btn:hover { background-color: rgba(0,0,0,0.05); }
.profile-history-icon-btn svg { width: 20px; height: 20px; stroke: #b0b0b0; stroke-width: 2; }
#profile-main-content, #profile-thoughts-history-view {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}
#profile-main-content {
    padding: 0 25px 25px 25px; 
    gap: 20px; 
    flex-grow: 1;
    overflow-y: auto;
}
.profile-header {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-shrink: 0;
    margin-bottom: 10px; 
}
#profile-avatar { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
.profile-info { display: flex; flex-direction: column; }
#profile-name { font-size: 20px; font-weight: 600; color: #1f1f1f; }
#profile-id { font-size: 14px; color: #8a8a8a; }
.profile-section {
    background-color: #ffffff; 
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06); 
    display: flex;
    flex-direction: column;
    gap: 12px; 
    flex-shrink: 0;
}
.profile-section-header {
    display: flex;
    align-items: center;
    gap: 10px; 
    padding-bottom: 12px;
    border-bottom: 1px solid #f0f0f0; 
}
.profile-section-icon {
    font-size: 20px;
    opacity: 0.5;
}
.profile-section label {
    font-size: 15px;
    font-weight: 600;
    color: #555; 
    margin: 0; 
}
.profile-section p {
    font-size: 15px;
    color: #333;
    line-height: 1.7;
    margin: 0;
    white-space: pre-wrap;
}
#profile-thoughts-history-view { display: none; padding: 0 25px 25px 25px; }
#profile-thoughts-history-view .profile-header { justify-content: space-between; padding-bottom: 15px; }
#profile-thoughts-history-view .profile-header span { font-size: 18px; font-weight: 600; }
#history-back-btn { width: 36px; height: 36px; background: none; border: none; cursor: pointer; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s; padding: 0; }
#history-back-btn:hover { background-color: rgba(0,0,0,0.05); }
#history-back-btn svg { width: 22px; height: 22px; stroke: #a0a0a0; stroke-width: 2.5; }
#thoughts-history-list {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 5px;
    margin-right: -10px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.thought-card { background-color: #ffffff; border-radius: 16px; padding: 15px 20px; border: 1px solid #eee; }
.thought-header { font-size: 12px; color: #b0b0b0; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #f0f0f0; }
.thought-content .label { display: flex; align-items: center; gap: 6px; font-weight: 600; color: #a0a0a0; font-size: 13px; margin-bottom: 6px; }
.thought-content .label svg { width: 16px; height: 16px; }
.thought-content .text { font-size: 14px; color: #555; line-height: 1.7; white-space: pre-wrap; padding-left: 22px; }
.thought-content .jottings { margin-top: 15px; }
#profile-main-content::-webkit-scrollbar,
#thoughts-history-list::-webkit-scrollbar { display: none; }
#profile-main-content, #thoughts-history-list { -ms-overflow-style: none; scrollbar-width: none; }
.character-profile-content {
    background-color: #ffffff !important;
}
#character-profile-modal .jottings .label {
    display: none;
}
#character-profile-modal .thought-content .text {
    padding-left: 0;
}
#qzone-more-actions-btn {
    font-size: 24px;      
    font-weight: bold;    
    padding: 0 10px;      
    border-radius: 50%;   
    line-height: 1;       
    position: relative;
    top: -2px;            
    transition: background-color 0.2s;
}
#qzone-more-actions-btn:hover {
    background-color: rgba(0,0,0,0.05); 
}
#phone-screen.dark-mode #qzone-more-actions-btn:hover {
    background-color: rgba(255,255,255,0.1);
}
#clear-posts-list {
    overflow-y: auto; 
    flex-grow: 1;
}
.clear-posts-item {
    display: flex;
    align-items: center;
    padding: 12px 18px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
    transition: background-color 0.2s;
}
.clear-posts-item:hover {
    background-color: #f5f5f5;
}
.clear-posts-item .checkbox {
    width: 22px;
    height: 22px;
    border: 2px solid #ccc;
    border-radius: 50%;
    margin-right: 15px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
}
.clear-posts-item.selected .checkbox {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}
.clear-posts-item.selected .checkbox::after {
    content: '‚úî';
    font-size: 14px;
    font-weight: bold;
}
.clear-posts-item .name {
    font-weight: 500;
}
.clear-posts-item.danger-option .name {
    color: #ff3b30;
    font-weight: 600;
}
.thought-card {
    position: relative; 
}
.thought-delete-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    border: none;
    background-color: rgba(0,0,0,0.05);
    color: var(--text-secondary);
    font-size: 20px;
    line-height: 26px;
    text-align: center;
    cursor: pointer;
    opacity: 0; 
    transition: all 0.2s ease-in-out;
}
.thought-card:hover .thought-delete-btn {
    opacity: 1;
}
.thought-delete-btn:hover {
    background-color: #ff3b30;
    color: white;
}
.search-result-item {
    display: flex;       
    align-items: center; 
    padding: 12px 18px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}
.search-result-item:hover {
    background-color: rgba(0, 0, 0, 0.05);
}
#phone-screen.dark-mode .search-result-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}
.search-result-item .search-result-info {
    flex-grow: 1;
    pointer-events: none; 
}
.search-result-item .music-search-checkbox {
    width: 20px;
    height: 20px;
    margin-right: 15px;
    flex-shrink: 0;
}
#music-search-results-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#music-search-results-modal .modal-footer {
    display: flex;
    justify-content: space-around;
}
#music-search-results-modal .modal-footer button {
    width: 45%; 
}
.bg-upload-container {
    width: 100%;
    justify-content: center;
    gap: 15px; 
}
.bg-upload-container .form-button-secondary {
    flex-grow: 1; 
    flex-basis: 0; 
    max-width: 180px; 
    margin-top: 0;
    padding: 12px; 
    font-size: 15px;
    font-weight: 600; 
    border-radius: 8px; 
    border: none; 
    background-color: #e9e9eb; 
    color: #1c1c1e; 
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
}
.bg-upload-container .form-button-secondary:active {
    transform: scale(0.98); 
}
#remove-global-bg-btn {
    background-color: #ffebee;
    color: #c62828;
}
#character-profile-modal .character-profile-content {
    position: relative; 
    overflow: visible;  
    padding-bottom: 35px; 
}
#character-profile-modal .character-profile-content::before {
    content: '';
    position: absolute;
    top: -10px; 
    left: 0;
    right: 0;
    height: 20px; 
    background-image: radial-gradient(circle at 50% 0, transparent 8px, #f0f2f5 8px);
    background-size: 25px 20px; 
    background-repeat: repeat-x;
}
#character-profile-modal .character-profile-content::after {
    content: '';
    position: absolute;
    bottom: -10px; 
    left: 0;
    right: 0;
    height: 20px; 
    background-image: radial-gradient(circle at 50% 100%, transparent 8px, #f0f2f5 8px);
    background-size: 25px 20px; 
    background-repeat: repeat-x;
}
#character-profile-modal .character-profile-content {
    border-radius: 0;         
    background-color: #ffffff; 
}
#character-profile-modal .character-profile-content::before {
    background-image: radial-gradient(circle at 50% 0, transparent 8px, #ffffff 8px);
}
#character-profile-modal .character-profile-content::after {
    background-image: radial-gradient(circle at 50% 100%, transparent 8px, #ffffff 8px);
}
#character-profile-modal .thought-header {
    position: relative;
    width: 100%;
    padding-bottom: 15px; 
    margin-bottom: 25px; 
    border-bottom: 2px dashed #e0e0e0; 
}
#character-profile-modal .thought-header::before {
    content: '';
    position: absolute;
    bottom: -11px;
    left: -35px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color:  rgba(0, 0, 0, 0.3);
}
#character-profile-modal .thought-header::after {
    content: '';
    position: absolute;
    bottom: -11px;
    right: -35px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color:  rgba(0, 0, 0, 0.3);
}
#character-profile-modal .thought-header {
    height: 140px;         
    flex-shrink: 0;
    padding: 10px;         
    padding-bottom: 25px;  
    box-sizing: border-box;
    border-bottom: 2px dashed #e0e0e0; 
    margin-bottom: 25px;
    position: relative;     
    background-image: url('https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1758340625111_qdqqd_zqr2cl.jpeg'); 
    background-size: cover;
    background-position: center top;
    border-radius: 0;      
}
#profile-photo-slot {
    display: none; 
}
#character-profile-modal #profile-main-content .thought-header {
    box-sizing: border-box;
    background-image: url('https://s3plus.meituan.net/opapisdk/op_ticket_885190757_1758340625111_qdqqd_zqr2cl.jpeg');
    background-size: cover;
    background-position: center top;
    border-bottom: 2px dashed #e0e0e0;
    margin-bottom: 15px;
    background-clip: content-box; 
    -webkit-background-clip: content-box; 
}
#character-profile-modal #profile-main-content .thought-header::before,
#character-profile-modal #profile-main-content .thought-header::after {
    content: '';
    position: absolute;
    bottom: -11px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.3);
}
#character-profile-modal #profile-main-content .thought-header::before {
    left: -35px;
}
#character-profile-modal #profile-main-content .thought-header::after {
    right: -35px;
}
#character-profile-modal #thoughts-history-list .thought-card .thought-header {
    height: auto;
    padding: 0;
    padding-bottom: 8px; 
    margin-bottom: 12px;
    background-image: none; 
    border: none; 
    border-bottom: 1px solid #f0f0f0; 
}
#character-profile-modal #thoughts-history-list .thought-card .thought-header::before,
#character-profile-modal #thoughts-history-list .thought-card .thought-header::after {
    display: none !important; 
}
#character-profile-modal #profile-main-content .label {
    display: flex !important;
}
#character-profile-modal #profile-main-content .text {
    font-family: "SimSun", "Songti SC", serif; 
    font-size: 16px; 
}
#character-profile-modal .thought-content .label {
    color: #000000 !important;
}
#character-profile-modal .thought-content .text {
    color: #000000 !important;
}
#character-profile-modal #profile-main-content {
    overflow-x: hidden;
}
        #sticker-category-tabs {
            display: flex;
            overflow-x: auto;
            padding: 0 15px; 
            flex-shrink: 0;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #sticker-category-tabs::-webkit-scrollbar {
            display: none;
        }
        .sticker-category-tab {
            padding: 10px 16px; 
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px; 
            transition: all 0.2s ease-in-out;
            white-space: nowrap; 
        }
        .sticker-category-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
            font-weight: 600;
        }
        #phone-screen.dark-mode .sticker-category-tab.active {
            color: #ffffff;
        }
        #sticker-grid.management-mode .sticker-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-radius: 10px;
            box-sizing: border-box;
            transition: border-color 0.2s;
            pointer-events: none; 
        }
        #sticker-grid.management-mode .sticker-item.selected::after {
            border-color: var(--accent-color);
        }
        #sticker-grid.management-mode .sticker-item .delete-btn {
            display: block;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid white;
        }
        #sticker-action-bar {
            display: none; 
            flex-shrink: 0;
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            justify-content: space-between; 
            align-items: center;
        }
        #sticker-action-bar .select-all-label {
            font-size: 16px;
            color: var(--text-primary);
            cursor: pointer;
        }
        #sticker-action-bar button {
            padding: 10px 25px;
            border-radius: 20px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
#character-selection-screen { background-color: #f0f2f5; }
#phone-screen.dark-mode #character-selection-screen { background-color: #000; }
#character-grid {
    padding: 0; 
    overflow-y: auto; 
    flex-grow: 1;
}
.character-select-item {
    display: flex;
    flex-direction: row;     
    align-items: center;     
    cursor: pointer;
    padding: 12px 20px;      
    border-bottom: 1px solid var(--border-color); 
    gap: 15px;               
    transition: background-color 0.2s; 
}
.character-select-item:hover {
    background-color: #f5f5f5; 
}
.character-select-item .avatar {
    width: 45px;             
    height: 45px;
    border-radius: 50%;      
    object-fit: cover;
    margin-bottom: 0;        
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: transform 0.2s ease;
    flex-shrink: 0;          
}
.character-select-item .name {
    font-weight: 500;
    font-size: 16px;         
    color: var(--text-primary);
}
#character-phone-screen { background-size: cover; background-position: center; }
.char-screen { width: 100%; height: 100%; position: absolute; top: 0; left: 0; display: flex; flex-direction: column; overflow: hidden; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
.char-screen.active { opacity: 1; visibility: visible; z-index: 2; }
#char-home-screen { justify-content: flex-start; align-items: center; box-sizing: border-box; padding: 0 20px; }
#char-clock-container { text-align: center; color: white; text-shadow: 0 3px 8px rgba(0,0,0,0.4); margin-top: calc(60px + env(safe-area-inset-top)); flex-shrink: 0; margin-bottom: 100px; }
#char-main-time { font-size: 88px; font-weight: 600; letter-spacing: -2px; font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif; }
#char-main-date { font-size: 22px; font-weight: normal; }
#char-app-grid { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; }
#char-qq-screen, #char-memo-screen, #char-diary-screen, #char-usage-screen, 
#char-album-screen, #char-browser-screen, #char-taobao-screen {
     background-color: var(--secondary-bg);
}
.memo-item, .diary-item, .usage-item { padding: 15px 20px; border-bottom: 1px solid var(--border-color); cursor: pointer; }
.memo-item .content, .diary-item .content { font-size: 16px; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.diary-item .date, .usage-item .timestamp { font-size: 12px; color: var(--text-secondary); margin-bottom: 5px; }
.usage-item .action { font-size: 15px; color: var(--text-primary); }
#char-album-grid, #myphone-album-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); 
    gap: 5px;
    padding: 5px;
}
.char-photo-item {
    aspect-ratio: 1 / 1; 
    background-size: cover;
    background-position: center;
    background-color: #e9ecef;
}
.char-browser-item {
    padding: 12px 20px;
    border-bottom: 1px solid var(--border-color);
}
.char-browser-item .title {
    font-weight: 500;
    font-size: 15px;
    color: var(--text-primary);
    margin-bottom: 4px;
}
.char-browser-item .url {
    font-size: 12px;
    color: var(--accent-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
#char-product-grid, #myphone-taobao-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
}
.char-product-item {
    background-color: var(--secondary-bg);
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.04);
    display: flex;
    flex-direction: column;
}
.char-product-item .product-image {
    width: 100%;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-radius: 8px 8px 0 0;
}
.char-product-item .product-info {
    padding: 12px 10px;
    flex-grow: 1;
}
.char-product-item .product-name {
    font-size: 13px;
    color: #333;
    line-height: 1.4;
    min-height: 36px;
}
.char-product-item .product-price {
    font-size: 16px;
    font-weight: 700;
    color: #ff5722;
    margin-top: 8px;
}
.char-product-item .product-price::before { content: '¬•'; font-size: 12px; }
#char-qq-screen .list-container {
    padding: 0; 
}
#transcript-modal-body {
    display: flex;
    flex-direction: column;
    gap: 20px; 
    padding: 15px; 
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #transcript-modal-body {
    background-color: #000000;
}
#chat-list .chat-list-item,
#char-chat-list .chat-list-item {
    display: flex;
    align-items: center;
    gap: 15px; 
}
#chat-list .chat-list-item .avatar-group,
#char-chat-list .chat-list-item .avatar-group {
    flex-shrink: 0;
}
#chat-list .chat-list-item .info,
#char-chat-list .chat-list-item .info {
    flex-grow: 1;
    min-width: 0; 
}
#char-qq-conversation-screen .list-container,
#myphone-qq-conversation-screen .list-container {
    display: flex;
    flex-direction: column;
    gap: 20px; 
    padding: 15px; 
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #char-qq-conversation-screen .list-container,
#phone-screen.dark-mode #myphone-qq-conversation-screen .list-container {
    background-color: #000000;
}
#char-qq-screen, 
#char-memo-screen, 
#char-diary-screen, 
#char-usage-screen, 
#char-album-screen, 
#char-browser-screen, 
#char-taobao-screen,
#char-browser-article-screen,
#char-wallet-screen {
     background-color: var(--secondary-bg);
}
#char-memo-detail-content {
    width: 100%;
    height: 100%;
    border: none;
    background-color: transparent;
    font-size: 16px;
    line-height: 1.7; 
    padding: 15px 20px; 
    box-sizing: border-box;
    resize: none; 
    outline: none; 
    font-family: inherit; 
    color: var(--text-primary); 
}
#char-memo-detail-screen {
    background-color: var(--secondary-bg);
}
#char-memo-detail-screen .header {
    background-color: var(--secondary-bg); 
    border-bottom: 1px solid var(--border-color); 
    padding-bottom: 10px;
}
#char-memo-detail-title {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-weight: 600; 
}
#char-memo-detail-screen .form-container {
    padding: 0;
}
#char-memo-detail-content {
    background-color: var(--secondary-bg); 
    padding: 15px 20px; 
    font-size: 17px; 
    line-height: 1.7; 
    color: var(--text-primary);
}
#char-diary-detail-screen {
    background-color: #FDFBF5; 
}
#phone-screen.dark-mode #char-diary-detail-screen {
    background-color: #2c2c2e; 
}
#char-diary-detail-content-wrapper {
    padding: 0;
    overflow-y: auto; 
}
#char-diary-detail-content {
    padding: 25px 20px; 
    font-family: Georgia, 'Times New Roman', Times, serif; 
    font-size: 16px;
    line-height: 1.8; 
    color: #383838; 
}
#phone-screen.dark-mode #char-diary-detail-content {
    color: #e0e0e0;
}
#char-diary-detail-content > p:first-of-type {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 20px;
    text-align: center;
}
#char-diary-detail-content strong {
    font-weight: 600; 
}
#char-diary-detail-content .spoiler {
    background-color: #333;
    color: #333;
    padding: 0 4px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}
#char-diary-detail-content .spoiler:hover {
    background-color: #e0e0e0;
    color: inherit;
}
@import url('https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&display=swap');
#char-diary-detail-content .diary-highlight {
    background-color: #FFFACD; 
    padding: 1px 4px;
    border-radius: 3px;
    margin: 0 2px;
}
#char-diary-detail-content .diary-underline {
    border-bottom: 2px dotted #FFB6C1; 
    text-decoration: none; 
    padding-bottom: 1px;
}
#char-diary-detail-content .diary-emphasis {
    color: #DB7093; 
    font-weight: bold;
}
#char-diary-detail-content .diary-handwritten {
    font-family: 'Zhi Mang Xing', cursive; 
    font-size: 1.1em; 
    color: #1a1a1a; 
}
#char-diary-detail-content .diary-messy {
    font-family: 'Zhi Mang Xing', cursive;
    font-size: 1.1em;
    color: #1a1a1a;
    transform: rotate(-2deg); 
    display: inline-block; 
    margin: 0 2px;
}
#char-diary-detail-content .diary-censored {
    background-color: #222;
    color: #222; 
    user-select: none; 
    padding: 0 3px;
    border-radius: 2px;
}
.diary-censored:hover, .diary-censored:active {
  background-color: #E0E0E0; 
  color: inherit; 
  cursor: pointer; 
}
#char-amap-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #char-amap-screen {
    background-color: #000000;
}
#char-amap-list {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 18px; 
}
.char-amap-item {
    background-color: var(--secondary-bg);
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    display: flex;
    flex-direction: column; 
}
.amap-item-header {
    display: flex;
    align-items: flex-start; 
    gap: 12px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 12px;
    margin-bottom: 12px;
}
.amap-item-icon {
    font-size: 24px;
    color: var(--accent-color);
    margin-top: 2px;
}
.amap-item-info {
    flex-grow: 1;
}
.amap-item-title {
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 4px;
}
.amap-item-address {
    font-size: 13px;
    color: var(--text-secondary);
}
.amap-item-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
.amap-item-comment {
    font-size: 14px;
    line-height: 1.6;
    white-space: pre-wrap; 
}
.amap-item-photo {
    width: 100%;
    height: 150px;
    border-radius: 8px;
    background-size: cover;
    background-position: center;
    cursor: pointer;
}
.amap-item-footer {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 10px;
    text-align: right;
}
#char-usage-list {
    padding: 10px 0; 
}
.char-usage-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 10px 20px;
    transition: background-color 0.2s;
}
.char-usage-item:hover {
    background-color: rgba(0,0,0,0.03);
}
.usage-item-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px; 
    object-fit: cover;
    flex-shrink: 0;
    background-color: #e9ecef;
}
.usage-item-info {
    flex-grow: 1; 
}
.usage-item-name {
    font-weight: 500;
    font-size: 16px;
}
.usage-item-category {
    font-size: 12px;
    color: var(--text-secondary);
}
.usage-item-time {
    font-size: 15px;
    color: var(--text-secondary);
    font-weight: 500;
    flex-shrink: 0;
}
#char-music-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #char-music-screen {
    background-color: #000000;
}
#char-music-list {
    padding: 0;
}
.char-music-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 20px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
}
.char-music-item:hover {
    background-color: rgba(0,0,0,0.03);
}
.music-item-cover {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
}
.music-item-info {
    flex-grow: 1;
    overflow: hidden; 
}
.music-item-name {
    font-weight: 500;
    font-size: 16px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.music-item-artist {
    font-size: 12px;
    color: var(--text-secondary);
}
#char-music-player-modal .modal-content {
    width: 400px !important; 
    height: auto !important; 
    max-height: 90vh;
    background-color: #f7f8fa !important; 
    border-radius: 12px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1) !important;
    color: #333 !important;
    display: flex;
    flex-direction: column;
}
#char-music-player-modal .char-player-header {
    flex-shrink: 0;
    padding: 12px 15px;
    border-bottom: 1px solid #e5e5e5;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
}
#char-music-player-modal .char-player-close-btn {
    background: none;
    border: none;
    font-size: 20px;
    color: #aaa;
    cursor: pointer;
}
#char-music-player-modal .char-player-close-btn:hover {
    color: #333;
}
#char-music-player-modal .char-player-body {
    padding: 30px 35px 20px 35px;
    text-align: center;
}
#char-music-player-modal #char-music-cover {
    width: 220px;
    height: 220px;
    border-radius: 10px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    margin-bottom: 20px;
    object-fit: cover;
}
#char-music-player-modal .char-player-progress-bar-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
}
#char-music-player-modal .char-player-progress-bar {
    flex-grow: 1;
    height: 4px;
    background-color: #e0e0e0;
    border-radius: 2px;
    cursor: pointer;
}
#char-music-player-modal #char-music-progress-fill {
    width: 0%;
    height: 100%;
    background-color: #555;
    border-radius: 2px;
}
#char-music-player-modal .char-player-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
}
#char-music-player-modal .char-player-controls .control-btn {
    background: none;
    border: none;
    color: #555;
    cursor: pointer;
    transition: color 0.2s;
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
}
#char-music-player-modal .char-player-controls .control-btn:hover {
    color: #000;
}
#char-music-player-modal .char-player-controls .control-btn.play {
    width: 50px;
    height: 50px;
    background-color: #f0f1f3;
    border-radius: 50%;
    color: #333;
}
#char-music-player-modal .char-player-controls .control-btn.mode {
    font-size: 14px;
    font-weight: 500;
    width: 50px;
}
#char-music-player-modal #char-music-lyrics {
    flex-grow: 1;
    overflow-y: auto;
    padding: 0 35px 25px 35px;
    font-size: 14px;
    line-height: 2;
    color: #888;
    text-align: center;
}
#char-music-player-modal #char-music-lyrics p.active {
    color: #000;
    font-weight: 600;
}
#char-music-player-modal #char-music-lyrics::-webkit-scrollbar {
    display: none;
}
#char-music-player-modal #char-music-lyrics {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
@keyframes spin-vinyl {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
#char-music-player-modal .modal-content {
    width: 340px !important; 
    height: auto !important;
    background-color: #f0f1f3 !important; 
    border-radius: 12px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1) !important;
    color: #333 !important;
    display: flex;
    flex-direction: column;
    padding: 20px; 
    position: relative;
}
#char-music-player-modal .modal-header {
    display: none !important;
}
#char-music-player-modal .char-player-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    font-weight: 300;
    color: #aaa;
    cursor: pointer;
    line-height: 1;
    z-index: 10;
}
#char-music-player-modal .char-player-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-grow: 1;
}
#char-music-player-modal .char-player-song-info {
    text-align: center;
    margin-bottom: 25px;
}
#char-music-player-modal #char-music-player-title {
    font-size: 20px;
    font-weight: 600;
    margin: 0 0 5px 0;
}
#char-music-player-modal #char-music-artist {
    font-size: 14px;
    color: #888;
    margin: 0;
}
#char-music-player-modal #char-vinyl-container {
    width: 210px;
    height: 210px;
    border-radius: 50%;
    background-color: #222;
    padding: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2), 
                inset 0 0 0 2px rgba(255, 255, 255, 0.05);
    background-image: repeating-radial-gradient(circle, #333, #333 1px, #222 1px, #222 2px);
    box-sizing: border-box;
    margin-bottom: 25px;
}
#char-music-player-modal #char-vinyl-container.spinning {
    animation: spin-vinyl 12s linear infinite;
}
#char-music-player-modal #char-music-cover {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
#char-music-player-modal #char-lyric-placeholder {
    color: #aaa;
    font-size: 18px;
    letter-spacing: 5px;
    margin-bottom: 25px;
}
#char-music-player-modal .char-player-footer {
    width: 100%;
    margin-top: auto; 
}
#char-music-player-modal .char-player-progress-bar-container {
    display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
}
#char-music-player-modal .char-player-progress-bar {
    flex-grow: 1; height: 4px; background-color: #e0e0e0; border-radius: 2px; cursor: pointer;
}
#char-music-player-modal #char-music-progress-fill {
    width: 0%; height: 100%; background-color: #555; border-radius: 2px;
}
#char-music-player-modal .char-player-controls {
    display: flex; align-items: center; justify-content: center; gap: 20px;
}
#char-music-player-modal .char-player-controls .control-btn {
    background: none; border: none; color: #555; cursor: pointer; transition: color 0.2s; padding: 5px;
    display: flex; align-items: center; justify-content: center;
}
#char-music-player-modal .char-player-controls .control-btn:hover { color: #000; }
#char-music-player-modal .char-player-controls .control-btn.play {
    width: 50px; height: 50px; background-color: #e0e1e3; border-radius: 50%; color: #333;
}
#char-music-player-modal .char-player-controls .control-btn.mode {
    font-size: 14px; font-weight: 500; width: 50px;
}
#char-music-player-modal #char-music-lyrics {
    /* display: none; */
}
@keyframes spin-vinyl {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
#char-music-player-modal .modal-content {
    width: 340px !important; 
    height: auto !important;
    background-color: #f0f1f3 !important; 
    border-radius: 12px !important;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1) !important;
    color: #333 !important;
    display: flex;
    flex-direction: column;
    padding: 20px; 
    position: relative;
}
#char-music-player-modal .modal-header {
    display: none !important;
}
#char-music-player-modal .char-player-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    font-weight: 300;
    color: #aaa;
    cursor: pointer;
    line-height: 1;
    z-index: 10;
}
#char-music-player-modal .char-player-body {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-grow: 1;
}
#char-music-player-modal .char-player-song-info {
    text-align: center;
    margin-bottom: 25px;
}
#char-music-player-modal #char-music-player-title {
    font-size: 20px;
    font-weight: 600;
    margin: 0 0 5px 0;
}
#char-music-player-modal #char-music-artist {
    font-size: 14px;
    color: #888;
    margin: 0;
}
#char-music-player-modal #char-vinyl-container {
    width: 210px;
    height: 210px;
    border-radius: 50%;
    background-color: #222;
    padding: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2), 
                inset 0 0 0 2px rgba(255, 255, 255, 0.05);
    background-image: repeating-radial-gradient(circle, #333, #333 1px, #222 1px, #222 2px);
    box-sizing: border-box;
    margin-bottom: 25px;
}
#char-music-player-modal #char-vinyl-container.spinning {
    animation: spin-vinyl 12s linear infinite;
}
#char-music-player-modal #char-music-cover {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
}
#char-music-player-modal #char-music-lyrics {
    width: 100%;
    height: 50px; 
    overflow: hidden; 
    position: relative;
    margin-bottom: 25px;
    font-size: 14px;
    line-height: 25px; 
    color: #888;
    text-align: center;
    transition: all 0.3s ease;
}
#char-music-player-modal #char-music-lyrics p {
    margin: 0;
    transition: all 0.3s ease;
}
#char-music-player-modal #char-music-lyrics p.active {
    color: #000;
    font-weight: 600;
    font-size: 16px; 
}
#char-music-player-modal .char-player-footer {
    width: 100%;
    margin-top: auto; 
}
#char-music-player-modal .char-player-progress-bar-container {
    display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
}
#char-music-player-modal .char-player-progress-bar {
    flex-grow: 1; height: 4px; background-color: #e0e0e0; border-radius: 2px; cursor: pointer;
}
#char-music-player-modal #char-music-progress-fill {
    width: 0%; height: 100%; background-color: #555; border-radius: 2px;
}
#char-music-player-modal .char-player-controls {
    display: flex; align-items: center; justify-content: center; gap: 20px;
}
#char-music-player-modal .char-player-controls .control-btn {
    background: none; border: none; color: #555; cursor: pointer; transition: color 0.2s; padding: 5px;
    display: flex; align-items: center; justify-content: center;
}
#char-music-player-modal .char-player-controls .control-btn:hover { color: #000; }
#char-music-player-modal .char-player-controls .control-btn.play {
    width: 50px; height: 50px; background-color: #e0e1e3; border-radius: 50%; color: #333;
}
#char-music-player-modal .char-player-controls .control-btn.mode {
    font-size: 14px; font-weight: 500; width: 50px;
}
#chat-list .chat-list-item {
    gap: 15px !important;
    justify-content: flex-start !important;
}
#chat-list .chat-list-item .avatar-group {
    margin-right: 0 !important;
}
#douban-screen {
    background-color: #F6F6F1; 
}
#phone-screen.dark-mode #douban-screen {
    background-color: #1a1a1a;
}
#douban-posts-list {
    padding: 0; 
    display: flex;
    flex-direction: column;
}
.douban-post-item {
    background-color: var(--secondary-bg);
    padding: 12px 15px;
    border: none;
    box-shadow: none;
    border-bottom: 1px solid var(--border-color); 
    cursor: pointer;
    transition: background-color 0.2s;
}
.douban-post-item:hover {
    background-color: #f9f9f9;
}
#phone-screen.dark-mode .douban-post-item:hover {
    background-color: #2c2c2e;
}
.douban-post-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
}
.douban-post-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
}
.douban-author-info {
    flex-grow: 1;
}
.douban-author-name {
    font-weight: 500;
    color: var(--text-primary);
    font-size: 14px;
}
.douban-group-name {
    font-size: 12px;
    color: #007722; 
    font-weight: 500;
}
.douban-post-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-primary);
}
.douban-post-content {
    font-size: 14px;
    color: #555;
    line-height: 1.7;
    white-space: pre-wrap;
    word-break: break-word;
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
#phone-screen.dark-mode .douban-post-content {
    color: #dcdcdc;
}
.douban-post-footer {
    margin-top: 15px;
    padding-top: 10px;
    border-top: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    color: var(--text-secondary);
}
.douban-post-actions {
    display: flex;
    gap: 20px;
}
.douban-post-actions span {
    display: flex;
    align-items: center;
    gap: 6px; 
    color: var(--text-secondary); 
}
.douban-post-actions svg {
    width: 18px;
    height: 18px;
    fill: currentColor; 
    position: relative;
    top: -1px; 
}
.douban-feather-btn {
    font-size: 24px;
    padding: 0;
    width: 38px;
    height: 38px;
    line-height: 38px;
    text-align: center;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0; 
    margin-right: 8px; 
    background-color: #f0f2f5;
    color: #555;
    transition: background-color 0.2s;
}
.douban-feather-btn:hover {
    background-color: #e2e6ea;
}
.douban-feather-btn svg {
    width: 20px;
    height: 20px;
}
#douban-post-detail-screen {
    background-color: #F6F6F1; 
}
#phone-screen.dark-mode #douban-post-detail-screen {
    background-color: #1a1a1a;
}
#douban-detail-content-wrapper {
    background-color: var(--secondary-bg);
    padding: 0; 
    padding-bottom: 80px; 
}
#douban-post-detail-body {
    padding: 20px 18px 25px 18px; 
    border-bottom: 1px solid #f0f0f0;
}
#phone-screen.dark-mode #douban-post-detail-body {
    border-bottom-color: #38383a;
}
.douban-post-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 15px;
    line-height: 1.5;
}
.douban-detail-content {
    white-space: pre-wrap;
    line-height: 1.8;
    font-size: 15px;
    color: #333;
}
#phone-screen.dark-mode .douban-detail-content {
    color: #dcdcdc;
}
.douban-comments-section {
    margin-top: 0;
    padding: 15px 18px;
}
.douban-comments-section h4 {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    margin: 0 0 15px 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #f0f0f0;
}
#phone-screen.dark-mode .douban-comments-section h4 {
    border-bottom-color: #38383a;
}
.douban-comment-item {
    display: flex;
    gap: 12px;
    padding: 15px 0;
    border-bottom: 1px solid #f0f0f0;
}
.douban-comment-item:last-child {
    border-bottom: none;
}
#phone-screen.dark-mode .douban-comment-item {
    border-bottom-color: #38383a;
}
.douban-comment-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    flex-shrink: 0;
}
.douban-comment-body {
    flex-grow: 1;
}
.douban-comment-author {
    font-weight: 500;
    font-size: 14px;
    color: var(--text-primary);
}
.douban-comment-text {
    font-size: 14px;
    color: #555;
    margin-top: 6px;
    line-height: 1.7;
    word-break: break-word;
}
#phone-screen.dark-mode .douban-comment-text {
    color: #b0b0b0;
}
#douban-comment-footer {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 10px 18px; 
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    box-sizing: border-box; 
    background-color: rgba(247, 247, 247, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid var(--border-color); 
}
#douban-send-comment-btn {
    background-color: #007722; 
}
#douban-screen .header .header-actions {
    flex-shrink: 0;
    display: flex;       
    align-items: center; 
}
.header .action-btn svg {
    width: 24px;   
    height: 24px;
    display: block; 
}
.header .action-btn {
    min-width: 30px; 
    display: flex;
    align-items: center;
    justify-content: center;
}
.header .header-left-actions {
    display: flex;
    align-items: center;
    gap: 15px; 
}
        .char-photo-item {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px; 
            box-sizing: border-box;
        }
        .char-photo-description {
            font-size: 13px;
            color: var(--text-secondary); 
            text-align: center;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 5; 
            overflow: hidden;
            word-break: break-all; 
        }
        .char-product-description-overlay {
            width: 100%;
            aspect-ratio: 1 / 1; 
            background-color: #f7f8fa; 
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px; 
            box-sizing: border-box;
            border-bottom: 1px solid #eee; 
            border-radius: 8px 8px 0 0; 
        }
        .char-product-description-overlay .char-photo-description,
        .char-browser-image-description { 
            font-size: 14px; 
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.6;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 6; 
            overflow: hidden;
            word-break: break-all;
        }
        .char-browser-image-description {
            padding: 40px 20px; 
        }
.char-product-status {
    font-size: 12px;
    color: #8a8a8a; 
    background-color: #f0f2f5; 
    padding: 3px 8px;
    border-radius: 10px;
}
#search-history-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #search-history-screen {
    background-color: #000000;
}
#search-results-list {
    flex-grow: 1;
    overflow-y: auto;
}
.date-separator {
    text-align: center;
    color: var(--text-secondary);
    font-size: 12px;
    padding: 10px 0;
    font-weight: 500;
}
#phone-screen.dark-mode #search-bar input {
    background-color: #1c1c1e;
    color: #ffffff;
    border-color: #38383a;
}
        #home-screen {
            flex-direction: column;
            padding: 0; 
        }
        #home-screen-pages-container {
            flex-grow: 1; 
            width: 100%;
            overflow: hidden; 
            position: relative;
        }
        #home-screen-pages {
            display: flex;
            width: 300%; 
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .home-screen-page {
            width: 33.333%; 
            height: 100%;
            padding: 20px;
            padding-top: calc(20px + env(safe-area-inset-top));
            padding-bottom: 0; 
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #home-screen-pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 10px 0;
            padding-bottom: calc(10px + env(safe-area-inset-bottom) / 2);
            flex-shrink: 0;
        }
        .pagination-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            transition: all 0.3s ease;
        }
        .pagination-dot.active {
            background-color: white;
            transform: scale(1.1);
        }
.draggable-button-item {
    padding: 8px 12px;
    background-color: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    cursor: grab;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s, box-shadow 0.2s;
    user-select: none;
}
.draggable-button-item:active {
    cursor: grabbing;
}
.draggable-button-item svg {
    width: 18px;
    height: 18px;
    stroke-width: 2;
}
.draggable-button-item.dragging {
    opacity: 0.5;
    background-color: #e0e0e0;
}
.draggable-button-item.drag-over {
    background-color: #d0eaff;
    box-shadow: 0 0 0 2px var(--accent-color);
}
.draggable-button-item.dragging {
    opacity: 0.5;
    background-color: #e0e0e0;
    position: relative; 
    z-index: 10;
}
#button-order-editor {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.scrollable-content-preview {
    max-height: 35vh;
    overflow-y: auto;
    background-color: #f0f2f5;
    padding: 10px 15px;
    border-radius: 8px;
    text-align: left;
    white-space: pre-wrap; 
    border: 1px solid var(--border-color);
}
.wizard-step {
    display: none; 
    flex-direction: column;
    width: 100%;
    height: 100%;
}
.wizard-step.active {
    display: flex; 
}
#data-clear-char-list .clear-posts-item,
#data-clear-type-list .clear-posts-item {
    padding: 12px 18px;
}
#data-clear-wizard-modal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
#data-clear-wizard-modal .modal-header label {
    font-size: 14px;
    font-weight: normal;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
}
#tutorial-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #tutorial-screen {
    background-color: #000000;
}
.entry-content-container {
    display: none; 
    margin-top: 8px; 
}
.toggle-content-btn {
    background: none;
    border: 1px solid #ccc;
    color: var(--text-secondary);
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 5px;
    cursor: pointer;
}
#update-notice-modal {
    position: fixed; 
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    display: none; 
    align-items: center;
    justify-content: center;
    z-index: 2000; 
    opacity: 0;
    transition: opacity 0.3s ease;
}
#update-notice-modal.visible {
    display: flex;
    opacity: 1;
}
.update-notice-content {
    background-color: var(--secondary-bg);
    width: 300px;
    border-radius: 14px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}
#update-notice-modal.visible .update-notice-content {
    transform: scale(1);
}
.update-notice-body {
    padding: 20px;
    font-size: 15px;
    line-height: 1.6;
    color: #333;
    max-height: 60vh; 
    overflow-y: auto; 
}
.update-notice-footer {
    border-top: 1px solid #dbdbdb;
    display: flex;
}
.update-notice-footer button {
    flex: 1;
    background: none;
    border: none;
    padding: 14px;
    font-size: 17px;
    cursor: pointer;
    color: var(--accent-color);
}
.update-notice-footer button:first-child {
    border-right: 1px solid #dbdbdb;
    font-weight: 600;
}
#message-actions-modal .custom-modal-footer {
    flex-wrap: wrap; 
    padding: 10px;   
    gap: 10px;       
    justify-content: flex-start; 
}
#message-actions-modal .custom-modal-footer button:not(#cancel-message-action-btn) {
    flex-grow: 1;
    flex-basis: 75px; 
    border: none;
    background-color: #f0f2f5;
    border-radius: 8px;
    padding: 12px 5px; 
    font-size: 16px;
    font-weight: 500;
}
#message-actions-modal #cancel-message-action-btn {
    width: 100%; 
    flex-basis: 100%; 
    margin-top: 8px;
    border-radius: 8px;
    background-color: #f0f2f5;
    font-weight: 600;
}
input, textarea, select {
    font-size: 16px !important;
}
#favorite-diary-btn.active svg {
    fill: #ffc107; 
    color: #ffc107;
}
.favorite-item-card .diary-title {
    font-weight: 600;
    display: block;
    margin-bottom: 8px;
    font-size: 15px;
}
.favorite-item-card .diary-content-preview {
    font-size: 13px;
    opacity: 0.8;
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 3; 
    -webkit-box-orient: vertical;
    overflow: hidden;
}
.favorite-item-card .diary-content-preview {
    font-size: 13px;
    opacity: 0.8;
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 3; 
    -webkit-box-orient: vertical;
    overflow: hidden;
}
#npc-list-view {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #npc-list-view {
    background-color: #000;
}
#chat-lock-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px; 
}
.spectator-actions-container {
    display: flex;
    gap: 12px; 
    align-items: center;
}
#chat-lock-content .lock-action-btn.secondary {
    background-color: transparent; 
    color: var(--accent-color);   
    border: 1px solid var(--accent-color); 
    padding: 8px 18px; 
    font-size: 14px;
}
.spectator-actions-container .lock-action-btn.secondary svg {
    width: 20px;  
    height: 20px; 
    stroke: currentColor; 
}
.music-player-window {
    position: relative;
    background-color: rgba(255, 255, 255, 0.75);
}
.music-player-window::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: var(--music-bg-image);
    background-size: cover;
    background-position: center;
    filter: blur(15px) brightness(0.8);
    z-index: -1;
    border-radius: inherit; 
    transition: background-image 0.5s ease-in-out;
}
.music-player-window.bg-clear::before {
    filter: none;
}
#toggle-blur-btn {
    background: none;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    color: #333;
    width: 44px;
    height: 44px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.2s ease;
    border-radius: 50%;
    background-color: rgba(0, 0, 0, 0.05);
}
#toggle-blur-btn.active {
    background-color: var(--accent-color); 
    color: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.music-player-window.fullscreen {
    width: 100%;
    height: 100%;
    max-height: 100%; 
    border-radius: 0; 
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
}
#music-player-overlay.fullscreen-active {
    padding-top: 0;
    align-items: stretch; 
}
#toggle-fullscreen-btn {
    background: none;
    border: none;
    font-size: 22px; 
    cursor: pointer;
    color: #555;
    padding: 5px;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}
#toggle-fullscreen-btn:hover {
    color: #000;
}
#toggle-fullscreen-btn .icon-minimize {
    display: none;
}
.music-player-window.fullscreen #toggle-fullscreen-btn .icon-maximize {
    display: none;
}
.music-player-window.fullscreen #toggle-fullscreen-btn .icon-minimize {
    display: block;
}
#music-player-avatar-display {
    display: none; 
    width: 100%;
    padding: 15px 20px;
    box-sizing: border-box;
    justify-content: space-between; 
    align-items: center;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1); 
    margin-bottom: 10px;
}
.music-player-window.fullscreen #music-player-avatar-display.visible {
    display: flex;
}
.participant-display-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
#show-avatars-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    display: none; 
    align-items: center;
    justify-content: center;
    opacity: 0.6;
    transition: opacity 0.2s;
}
.music-player-window.fullscreen #show-avatars-btn {
    display: flex;
}
#show-avatars-btn:hover {
    opacity: 1;
}
#show-avatars-btn.active {
    opacity: 1;
}
.douban-settings-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.douban-settings-item label {
    margin-bottom: 0;
    flex-grow: 1; 
}
.douban-settings-controls {
    display: flex;
    align-items: center;
    gap: 8px; 
    flex-shrink: 0; 
}
.douban-settings-controls input {
    width: 60px;
    text-align: center;
}
#time-zone-search-input {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: 8px; 
    border: 1px solid var(--border-color);
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 16px; 
}
#phone-screen.dark-mode #time-zone-search-input {
    background-color: #1c1c1e;
    color: #ffffff;
    border-color: #38383a;
}
#werewolf-game-screen {
    background-color: #2c2c2e; 
    color: white;
}
#werewolf-player-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 15px;
    padding: 15px;
    flex-shrink: 0;
    border-bottom: 1px solid #444;
}
.werewolf-player-avatar {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    position: relative;
}
.werewolf-player-avatar img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 2px solid #888;
    transition: all 0.3s;
}
.werewolf-player-avatar .player-name {
    font-size: 12px;
    font-weight: 500;
    text-shadow: 0 1px 2px black;
}
.werewolf-player-avatar.dead img {
    filter: grayscale(100%);
    border-color: #ff3b30;
}
.werewolf-player-avatar.dead .player-name {
    color: #ff3b30;
    text-decoration: line-through;
}
#werewolf-log {
    padding: 15px;
    background: none;
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.werewolf-log-entry {
    background-color: rgba(255, 255, 255, 0.08);
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.6;
}
.werewolf-log-entry.system {
    text-align: center;
    color: #ffc107;
    font-style: italic;
    background-color: rgba(255, 193, 7, 0.1);
}
.werewolf-log-entry .speaker {
    font-weight: bold;
}
#werewolf-action-bar {
    padding: 10px 15px;
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    background-color: rgba(0,0,0,0.3);
    flex-shrink: 0;
    text-align: center;
}
#werewolf-next-step-btn {
    width: 100%;
}
#werewolf-role-card {
    background: linear-gradient(135deg, #4a4a4a, #2a2a2a);
    border: 1px solid #666;
    border-radius: 12px;
    padding: 20px;
    color: white;
}
#werewolf-role-name {
    font-size: 22px;
    font-weight: bold;
    color: #ffc107;
    margin-bottom: 10px;
}
#werewolf-role-description {
    font-size: 14px;
    line-height: 1.6;
}
.werewolf-selection-item {
    display: flex;
    align-items: center;
    padding: 12px 18px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-color);
}
.werewolf-selection-item.selected {
    background-color: var(--accent-color);
    color: white;
}
.werewolf-selection-item img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 15px;
}
.werewolf-selection-item .name {
    font-weight: 500;
}
        #werewolf-game-screen #werewolf-action-bar {
            background-color: rgba(0, 0, 0, 0.3); 
            border-top: 1px solid rgba(255, 255, 255, 0.1); 
            padding: 10px 15px; 
            padding-bottom: calc(10px + env(safe-area-inset-bottom)); 
        }
        #werewolf-game-screen #werewolf-user-input {
            flex-grow: 1; 
            border: none;
            padding: 10px 15px;
            border-radius: 20px; 
            background-color: rgba(255, 255, 255, 0.1); 
            color: #f0f0f0; 
            font-size: 16px; 
            resize: none; 
            height: 40px; 
            box-sizing: border-box;
        }
        #werewolf-game-screen #werewolf-user-input::placeholder {
            color: #8d8d92; 
        }
        #werewolf-game-screen #input-actions-wrapper button {
            height: 40px;
            padding: 0 15px;
            border-radius: 20px;
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer;
            flex-shrink: 0; 
        }
        #werewolf-game-screen #werewolf-wait-reply-btn {
            background-color: #555; 
        }
        #werewolf-game-screen #werewolf-finish-speech-btn {
            background-color: #c62828; 
        }
#sticker-search-container {
    padding: 10px 15px; 
    flex-shrink: 0; 
    border-bottom: 1px solid var(--border-color); 
    background-color: var(--secondary-bg); 
}
#sticker-search-input {
    width: 100%;
    padding: 10px 15px;
    font-size: 16px; 
    border: 1px solid var(--border-color);
    border-radius: 18px; 
    background-color: #f0f2f5; 
    box-sizing: border-box;
    outline: none; 
    -webkit-appearance: none; 
}
#sticker-search-input:focus {
    border-color: var(--accent-color); 
    background-color: var(--secondary-bg); 
}
#phone-screen.dark-mode #sticker-search-input {
    background-color: #2c2c2e;
    color: #f0f0f0;
    border-color: #38383a;
}
#phone-screen.dark-mode #sticker-search-input:focus {
    background-color: #38383a;
}
.message-bubble .content {
    transition: background-color 0.5s ease-out;
}
.message-bubble.highlighted .content {
    background-color: rgba(0, 123, 255, 0.2) !important;
}
.loader-container {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px 0;
    width: 100%;
    height: 44px; 
    box-sizing: border-box;
}
.spinner {
    width: 24px;
    height: 24px;
    border: 3px solid rgba(0, 0, 0, 0.1); 
    border-top-color: var(--accent-color); 
    border-radius: 50%;
    animation: spin 1s linear infinite; 
}
#phone-screen.dark-mode .spinner {
    border: 3px solid rgba(255, 255, 255, 0.2);
    border-top-color: #fff; 
}
#reading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 150; 
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none; 
    display: none; 
}
#reading-window {
    width: 90%;
    max-width: 340px;
    height: 60vh;
    max-height: 480px;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 18px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.18);
    display: flex;
    flex-direction: column;
    pointer-events: auto; 
    position: absolute; 
    transition: transform 0.3s ease, opacity 0.3s ease, visibility 0s 0.3s; 
}
#phone-screen.dark-mode #reading-window {
    background-color: rgba(40, 40, 42, 0.7);
}
.reading-header {
    cursor: move;
    user-select: none;
    -webkit-user-select: none;
    flex-shrink: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    border-bottom: 1px solid var(--border-color);
    gap: 10px;
    flex-wrap: nowrap;
}
#reading-title {
    font-weight: 600;
    flex: 1;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.reading-controls {
    flex-shrink: 0;
}
.reading-controls button {
    background: none; border: none; color: var(--text-secondary); padding: 4px 8px;
    border-radius: 4px; cursor: pointer; font-size: 14px; transition: background-color 0.2s;
}
.reading-controls button:hover {
    background-color: rgba(0,0,0,0.1);
}
#minimize-reading-btn {
    font-weight: bold; font-size: 16px; line-height: 1;
}
#reading-window.minimized {
    transform: scale(0.8); 
    opacity: 0;           
    pointer-events: none; 
    visibility: hidden;   
}
#reading-restore-btn {
    position: absolute;
    top: 50%;
    right: 15px; 
    transform: translateY(-50%); 
    width: 50px; 
    height: 50px;
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px; 
    cursor: move; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    pointer-events: auto; 
    z-index: 160; 
    transition: transform 0.2s; 
}
#reading-restore-btn:active {
    transform: translateY(-50%) scale(0.95);
}
#phone-screen.dark-mode #reading-restore-btn {
    background-color: rgba(50, 50, 52, 0.8);
}
#reading-content {
    flex-grow: 1; 
    overflow-y: auto; 
    padding: 15px;
    font-size: 15px; 
    line-height: 1.8;
    white-space: pre-wrap; 
    word-break: break-word;  
}
.reading-footer {
    flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;
    padding: 12px 15px; border-top: 1px solid var(--border-color);
}
#page-indicator {
    font-size: 14px; 
    color: var(--text-secondary);
    cursor: pointer; 
    transition: color 0.2s;
}
#page-indicator:hover {
    color: var(--accent-color); 
}
.reading-footer button {
    padding: 6px 15px; border-radius: 15px; border: none;
    background-color: var(--accent-color); color: white; cursor: pointer;
}
.reading-footer button:disabled {
    background-color: #ccc;
}
#phone-screen.dark-mode .reading-footer button:disabled {
    background-color: #555;
}
#reading-library-search-container {
    padding: 10px 15px;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0; 
}
#reading-library-search-input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-sizing: border-box;
    font-size: 16px; 
    -webkit-appearance: none; 
}
#phone-screen.dark-mode #reading-library-search-input {
    background-color: #2c2c2e;
    color: #f0f0f0;
    border-color: #38383a;
}
.voice-message-body {
    display: flex;
    align-items: center;
    cursor: pointer;
    min-width: 80px;
    max-width: 220px;
    padding: 8px 12px;
}
.message-bubble.user .voice-message-body {
    color: #1a3d00;
    flex-direction: row-reverse;
}
.message-bubble.ai .voice-message-body {
    color: var(--text-primary);
}
.voice-play-btn {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: none;
    background-color: rgba(0, 0, 0, 0.1);
    color: currentColor;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    flex-shrink: 0;
    transition: background-color 0.2s;
}
.voice-play-btn:hover {
    background-color: rgba(0, 0, 0, 0.2);
}
.voice-spinner {
    width: 20px;
    height: 20px;
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-top-color: var(--accent-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    display: none; 
    margin: 4px;
}
.voice-duration {
    font-size: 14px;
    font-weight: 500;
    margin: 0 10px;
    flex-shrink: 0;
}
.message-bubble.user .voice-duration {
    color: #3e6224;
}
#product-category-tabs {
    display: flex;
    overflow-x: auto; 
    padding: 10px 15px 0 15px;
    flex-shrink: 0;
    border-bottom: 1px solid var(--border-color);
    background-color: var(--secondary-bg);
    -ms-overflow-style: none;  
    scrollbar-width: none;  
}
#product-category-tabs::-webkit-scrollbar {
    display: none; 
}
.product-category-tab {
    padding: 8px 16px;
    cursor: pointer;
    border: none;
    background-color: transparent;
    font-size: 15px;
    font-weight: 500;
    color: var(--text-secondary);
    border-bottom: 2px solid transparent; 
    margin-bottom: -1px; 
    transition: all 0.2s ease-in-out;
    white-space: nowrap; 
    flex-shrink: 0; 
}
.product-category-tab.active {
    color: #FF5722; 
    border-bottom-color: #FF5722; 
    font-weight: 600; 
}
#phone-screen.dark-mode .product-category-tab.active {
    color: #FF8A65; 
    border-bottom-color: #FF8A65;
}
#product-category-tabs {
    overflow-x: auto;      
    white-space: nowrap;   
    -webkit-overflow-scrolling: touch; 
    scrollbar-width: none;             
    -ms-overflow-style: none;          
}
#product-category-tabs::-webkit-scrollbar {
    display: none; 
}
.product-category-tab {
    flex-shrink: 0;
}
        #shopping-screen.management-mode .product-item {
            cursor: pointer;
        }
        #shopping-screen.management-mode .product-management-overlay {
            display: none;
        }
        #shopping-screen.management-mode .product-item::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 22px;
            height: 22px;
            border: 2px solid #ccc;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            transition: all 0.2s ease;
            z-index: 6; 
        }
        #shopping-screen.management-mode .product-item.selected::before {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            content: '‚úî';
            color: white;
            font-size: 14px;
            text-align: center;
            line-height: 22px;
        }
        #shopping-screen.management-mode .product-item:not(.selected) {
            opacity: 0.8;
        }
        #shopping-action-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            width: auto;
            padding: 10px 15px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom));
            background-color: rgba(247, 247, 247, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid var(--border-color);
            box-sizing: border-box;
            z-index: 5;
            display: none; 
            justify-content: space-between;
            align-items: center;
        }
        #shopping-action-bar .select-all-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            color: var(--text-primary);
            cursor: pointer;
        }
        #shopping-action-bar .action-bar-btn {
            padding: 10px 25px;
            border-radius: 20px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            background-color: #ff3b30;
            color: white;
        }
.polaroid-widget-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 30px; 
    flex-shrink: 0;
    margin-top: 20px; 
}
.polaroid-photos {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px; 
}
.polaroid-photo {
    background-color: white;
    padding: 8px 8px 15px 8px; 
    border-radius: 4px;
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.2); 
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.25s;
    width: 80px; 
    flex-shrink: 0;
}
.polaroid-photo:hover {
    transform: scale(1.1) rotate(0deg) !important; 
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
    z-index: 10; 
}
.polaroid-photo img {
    width: 100%;
    display: block;
    aspect-ratio: 1 / 1; 
    object-fit: cover;
}
.polaroid-widget-title {
    margin-top: 15px;
    font-size: 13px;
    font-weight: 500;
    color: white; 
    text-shadow: 0 1px 3px rgba(0,0,0,0.4); 
}
#page-2-app-container {
    display: grid;
    grid-template-columns: 155px 1fr; 
    gap: 15px;
    width: 100%;
    padding-top: 20px;
    align-items: start;
}
.app-subgrid {
    display: grid;
    grid-template-columns: 1fr 1fr; 
    gap: 15px; 
}
.large-widget {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px; 
}
.large-widget-img {
    width: 100%;
    aspect-ratio: 1 / 1; 
    border-radius: 22px; 
    object-fit: cover;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.large-widget-label {
    color: white;
    font-size: 13px;
    font-weight: 500;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}
.small-widget {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}
.small-widget-icon-wrapper {
    width: 55px;
    height: 55px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.small-widget-img {
    width: 100%;     
    height: 100%;    
    object-fit: cover; 
    border-radius: 14px; 
}
.small-widget-label {
    color: white;
    font-size: 13px;
    font-weight: 500;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}
#page-2-app-container .small-widget-label {
    color: #000 !important;       
    text-shadow: none !important; 
}
#phone-screen.dark-mode #char-diary-list .list-item .item-title,
#phone-screen.dark-mode #char-diary-list .list-item .item-content,
#phone-screen.dark-mode #char-memo-list .list-item .item-title,
#phone-screen.dark-mode #char-memo-list .list-item .item-content,
#phone-screen.dark-mode #char-browser-history .char-browser-item .title,
#phone-screen.dark-mode #char-usage-list .usage-item-name,
#phone-screen.dark-mode #char-music-list .music-item-name {
    color: #f0f0f0; 
}
#phone-screen.dark-mode #char-diary-list .list-item .item-content,
#phone-screen.dark-mode #char-browser-history .char-browser-item .url,
#phone-screen.dark-mode #char-usage-list .usage-item-category,
#phone-screen.dark-mode #char-music-list .music-item-artist {
    color: #a0a0a0; 
}
#phone-screen.dark-mode #char-diary-detail-content .diary-highlight {
    background-color: rgba(255, 223, 100, 0.2); 
    color: #FFD700; 
}
#phone-screen.dark-mode #char-diary-detail-content .diary-underline {
    border-bottom-color: #FF85B3; 
}
#phone-screen.dark-mode #char-diary-detail-content .diary-emphasis {
    color: #FF85B3; 
}
#phone-screen.dark-mode #char-diary-detail-content .diary-handwritten,
#phone-screen.dark-mode #char-diary-detail-content .diary-messy {
    color: #dcdcdc; 
}
#phone-screen.dark-mode .spoiler {
    background-color: #444; 
    color: #444;           
}
#phone-screen.dark-mode .spoiler:hover, 
#phone-screen.dark-mode .spoiler:active {
    background-color: #555; 
    color: #fff;           
}
#avatar-frame-modal .frame-grid.management-mode .frame-item {
    cursor: pointer;
}
#avatar-frame-modal .frame-grid.management-mode .frame-item:has(.delete-btn)::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    width: calc(100% + 4px);
    height: calc(100% + 4px);
    border: 3px solid transparent;
    border-radius: 12px;
    box-sizing: border-box;
    transition: border-color 0.2s;
    pointer-events: none; 
}
#avatar-frame-modal .frame-grid.management-mode .frame-item.selected::after {
    border-color: var(--accent-color);
}
#frame-action-bar {
    display: none; 
    flex-shrink: 0;
    padding: 10px 15px;
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    background-color: rgba(247, 247, 247, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid var(--border-color);
    justify-content: space-between;
    align-items: center;
}
#frame-action-bar .select-all-label {
    font-size: 16px;
    color: var(--text-primary);
    cursor: pointer;
}
#frame-action-bar .action-bar-btn {
    padding: 10px 25px;
    border-radius: 20px;
    border: none;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    background-color: #ff3b30;
    color: white;
}
#favorite-memo-btn.active svg {
    fill: #ffc107; 
    color: #ffc107;
}
.favorite-item-card .memo-title {
    font-weight: 600;
    display: block;
    margin-bottom: 8px;
    font-size: 15px;
}
#chat-interface-screen .back-btn {
    position: relative; 
}
.back-btn .unread-indicator {
    position: absolute;
    top: -2px;
    right: -10px;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    background-color: #ff3b30;
    color: white;
    font-size: 11px;
    font-weight: bold;
    line-height: 18px;
    text-align: center;
    border-radius: 9px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    display: none;
    z-index: 20; 
    transform: scale(0.8);
}
#phone-screen.dark-mode .back-btn .unread-indicator {
    border: 1px solid #333;
}
#favorite-article-btn.active svg {
    fill: #ffc107; 
    color: #ffc107;
}
.modal,
#custom-modal-overlay,
#transfer-modal,
#battery-alert-modal,
#photo-viewer-modal,
#character-profile-modal,
#update-notice-modal {
    background-color: transparent !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
}
#character-profile-modal .jottings .label {
    display: flex !important;
}
#total-image-size-display{ /* <--- Âú®ËøôÈáåÊ∑ªÂä†‰∫Ü ID */
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 15px;
    padding: 8px 12px;
    background-color: #f0f2f5;
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

#phone-screen.dark-mode #total-image-size-display{ /* <--- Âú®ËøôÈáåÊ∑ªÂä†‰∫Ü ID */
    background-color: #2c2c2e; 
    border-color: #38383a;
}

#total-image-size-display #image-size-label{ /* <--- Êñ∞Â¢û */
    font-weight: 500;
}

#total-image-size-display #image-size-value,
#token-count-display #token-count-value,
#message-count-display #message-count-value { /* <--- Êñ∞Â¢û */
    font-weight: 600;
    color: var(--text-primary);
}

/* ‚ñº‚ñº‚ñº RealImagÂ§öÂõæÂ∏ÉÂ±ÄÊ†∑Âºè ‚ñº‚ñº‚ñº */
/* Â§öÂõæÂÆπÂô® */
.post-images-grid {
    display: grid;
    gap: 8px;  /* ÂõæÁâá‰πãÈó¥ÁöÑÂõ∫ÂÆöÈó¥Ë∑ù */
    margin-top: 10px;
}

/* ÂçïÂº†ÂõæÁâá - Â§ßÂõæÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-1 {
    grid-template-columns: 1fr;
    justify-items: start;
}
.post-images-grid.grid-1 .realimag-image,
.post-images-grid.grid-1 .naiimag-image {
    max-width: 280px;
    max-height: 280px;
    width: auto;
    height: auto;
}

/* 2Âº†ÂõæÁâá - Ê®™ÂêëÂπ∂ÊéíÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-2 {
    grid-template-columns: auto auto;
    gap: 5px;
    justify-content: start;
}
.post-images-grid.grid-2 .realimag-image,
.post-images-grid.grid-2 .naiimag-image {
    max-width: 135px;
    max-height: 135px;
    width: auto;
    height: auto;
}

/* 3Âº†ÂõæÁâá - Ê®™ÂêëÊéíÂàóÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-3 {
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
}
.post-images-grid.grid-3 .realimag-image {
    max-width: 130px;
    max-height: 130px;
    width: auto;
    height: auto;
}

/* 4Âº†ÂõæÁâá - 2x2ÊñπÊ†ºÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-4 {
    grid-template-columns: repeat(2, 1fr);
    gap: 5px;
}
.post-images-grid.grid-4 .realimag-image {
    max-width: 195px;
    max-height: 195px;
    width: auto;
    height: auto;
}

/* 5Âº†ÂõæÁâá - ‰∏ä2‰∏ã3ÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-5 {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 5px;
}
.post-images-grid.grid-5 .realimag-image:nth-child(1),
.post-images-grid.grid-5 .realimag-image:nth-child(2) {
    grid-column: span 3;
    max-width: 195px;
    max-height: 195px;
    width: auto;
    height: auto;
}
.post-images-grid.grid-5 .realimag-image:nth-child(n+3) {
    grid-column: span 2;
    max-width: 130px;
    max-height: 130px;
    width: auto;
    height: auto;
}

/* 6Âº†ÂõæÁâá - 3x2ÁΩëÊ†ºÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-6 {
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
}
.post-images-grid.grid-6 .realimag-image {
    max-width: 130px;
    max-height: 130px;
    width: auto;
    height: auto;
}

/* 7-9Âº†ÂõæÁâá - 3x3‰πùÂÆ´Ê†ºÔºåÁ≠âÊØî‰æãÁº©Êîæ */
.post-images-grid.grid-7,
.post-images-grid.grid-8,
.post-images-grid.grid-9 {
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
}
.post-images-grid.grid-7 .realimag-image,
.post-images-grid.grid-8 .realimag-image,
.post-images-grid.grid-9 .realimag-image {
    max-width: 130px;
    max-height: 130px;
    width: auto;
    height: auto;
}

/* ÂõæÁâáÂü∫Á°ÄÊ†∑Âºè - ÂÆåÊï¥ÊòæÁ§∫ÔºåÁ≠âÊØî‰æãÁº©ÊîæÔºå‰∏çË£ÅÂâ™ */
.post-images-grid .realimag-image,
.post-images-grid .naiimag-image {
    object-fit: contain;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s;
}
.post-images-grid .realimag-image:hover,
.post-images-grid .naiimag-image:hover {
    transform: scale(1.05);
}
/* ‚ñ≤‚ñ≤‚ñ≤ RealImagÂ§öÂõæÂ∏ÉÂ±ÄÊ†∑ÂºèÁªìÊùü ‚ñ≤‚ñ≤‚ñ≤ */
/* „Äê‰øÆÂ§ç„ÄëËß£ÂÜ≥Â§úÈó¥Ê®°Âºè‰∏ãÊµèËßàÂô®ÂíåË∂≥ËøπÈ°µÈù¢ÊñáÂ≠óÈ¢úËâ≤‰∏çÊ≠£Á°ÆÁöÑÈóÆÈ¢ò */
#phone-screen.dark-mode #browser-content {
    color: #dcdcdc; /* ÊµèËßàÂô®ÊñáÁ´†Ê≠£ÊñáÈ¢úËâ≤ */
}
#phone-screen.dark-mode #browser-content .article-title {
    color: #ffffff; /* ÊµèËßàÂô®ÊñáÁ´†Ê†áÈ¢òÈ¢úËâ≤ */
}
#phone-screen.dark-mode #browser-content .article-meta {
    color: #8d8d92; /* ÊµèËßàÂô®ÊñáÁ´†ÂÖÉÊï∞ÊçÆÔºàÊù•Ê∫êÔºâÈ¢úËâ≤ */
    border-bottom-color: #38383a;
}
#phone-screen.dark-mode .amap-item-title {
    color: #f0f0f0; /* Ë∂≥Ëøπ - Âú∞ÁÇπÊ†áÈ¢òÈ¢úËâ≤ */
}
#phone-screen.dark-mode .amap-item-comment {
    color: #dcdcdc; /* Ë∂≥Ëøπ - ËØÑËÆ∫ÂÜÖÂÆπÈ¢úËâ≤ */
}
/* „Äê‰øÆÂ§ç„ÄëCPhone ÊµèËßàÂô®ËØ¶ÊÉÖÈ°µÂú®Â§úÈó¥Ê®°Âºè‰∏ãÁöÑÊñáÂ≠óÈ¢úËâ≤ */
#phone-screen.dark-mode #char-article-content {
    color: #dcdcdc; /* ËÆæÁΩÆ‰∏∫ÊµÖÁÅ∞Ëâ≤Ôºå‰ΩøÂÖ∂Âú®Ê∑±Ëâ≤ËÉåÊôØ‰∏äÂèØËßÅ */
}
#char-article-content {
    color: #333; /* CPhone ÊµèËßàÂô®ÊñáÁ´†Ê≠£Êñá - ÁôΩÂ§©Ê®°ÂºèÈªòËÆ§È¢úËâ≤ */
}

#open-nai-gallery-btn svg path {
    fill: currentColor;
    stroke: none;
}

#nai-gallery-panel {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 65%; /* ÁîªÂªäÈù¢ÊùøÈ´òÂ∫¶ */
    background-color: rgba(242, 242, 247, 0.85);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border-top: 1px solid var(--border-color);
    border-radius: 20px 20px 0 0;
    z-index: 200;
    display: flex;
    flex-direction: column;
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    visibility: hidden;
}

#nai-gallery-panel.visible {
    transform: translateY(0);
    visibility: visible;
}

#nai-gallery-panel-header {
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    border-bottom: 1px solid var(--border-color);
}
#nai-gallery-panel-header .title {
    font-weight: 600;
}
#nai-gallery-panel-header .panel-btn {
    font-size: 16px;
    padding: 5px 10px;
    cursor: pointer;
    color: var(--accent-color);
}

#nai-gallery-grid {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 15px;
}

.nai-gallery-item {
    position: relative;
    display: flex;
    flex-direction: column; 
    align-items: center;    
    gap: 6px;               
    cursor: pointer;
    /* ÁßªÈô§‰∫ÜËÉåÊôØ„ÄÅÈò¥ÂΩ±Á≠âÂ±ûÊÄßÔºåÂõ†‰∏∫ÂÆÉ‰ª¨Â∞ÜÁßªÂà∞Â≠êÂÖÉÁ¥†‰∏ä */
}
/* Êñ∞Â¢ûÔºöNAIÁöÑÂõæÁâáÂÆπÂô®ÔºåÊ†∑ÂºèÊ®°‰ªø .sticker-image-container */
.nai-image-container {
    position: relative; /* Áî®‰∫éÂÆö‰ΩçÂÜÖÈÉ®ÁöÑ controls */
    width: 100%;
    aspect-ratio: 1 / 1;
    background-color: white;
    border-radius: 10px;
    background-size: contain; /* Ê†∏ÂøÉ‰øÆÊîπÔºö‰øùÊåÅÂõæÁâáÂÆåÊï¥ */
    background-repeat: no-repeat;
    background-position: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    overflow: hidden; /* ÈöêËóèÊ∫¢Âá∫ÁöÑ controls */
}

/* Êñ∞Â¢ûÔºöNAIÁöÑÊñáÂ≠óÊ†áÁ≠æÔºåÊ†∑ÂºèÊ®°‰ªø .sticker-name */
.nai-gallery-name {
    font-size: 12px;
    color: var(--text-secondary);
    width: 100%;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.nai-image-container .nai-gallery-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 4px;
    background: rgba(0,0,0,0.4);
    display: none; /* ‰ªÖÂú®ÁÆ°ÁêÜÊ®°Âºè‰∏ãÊòæÁ§∫ */
    justify-content: space-around;
    align-items: center;
}

.nai-gallery-controls button {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    padding: 2px;
}
.nai-gallery-controls svg {
    width: 16px;
    height: 16px;
}

#nai-gallery-grid.management-mode .nai-gallery-controls {
    display: flex;
}

#nai-gallery-grid.management-mode .nai-gallery-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 4px solid transparent;
    border-radius: 10px;
    box-sizing: border-box;
    transition: border-color 0.2s;
    pointer-events: none; 
}

#nai-gallery-grid.management-mode .nai-gallery-item.selected::after {
    border-color: var(--accent-color);
}

#nai-gallery-action-bar {
    display: none; 
    flex-shrink: 0;
    padding: 10px 15px;
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    background-color: rgba(247, 247, 247, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid var(--border-color);
    justify-content: space-between; 
    align-items: center;
    gap: 10px; /* <-- Êñ∞Â¢û‰∫ÜÈó¥Ë∑ù */
}

#nai-gallery-action-bar .select-all-label {
    font-size: 16px;
    color: var(--text-primary);
    cursor: pointer;
    flex-grow: 1; /* <-- Êñ∞Â¢ûÔºåËÆ©‚ÄúÂÖ®ÈÄâ‚ÄùÂç†ÊçÆÂâ©‰ΩôÁ©∫Èó¥ */
}
#nai-gallery-action-bar .action-bar-btn {
    padding: 10px 15px; /* <-- ‰øÆÊîπ‰∫ÜÂÜÖËæπË∑ù */
    border-radius: 20px;
    border: none;
    font-size: 14px; /* <-- ‰øÆÊîπ‰∫ÜÂ≠óÂè∑ */
    font-weight: 600;
    cursor: pointer;
    background-color: #ff3b30;
    color: white;
    flex-shrink: 0; /* <-- Êñ∞Â¢ûÔºåÈò≤Ê≠¢ÊåâÈíÆË¢´ÂéãÁº© */
}

/* ÈÄÇÈÖçÊöóÈªëÊ®°Âºè */
#phone-screen.dark-mode #nai-gallery-panel {
    background-color: rgba(28, 28, 30, 0.85);
    border-top-color: #38383a;
}
#phone-screen.dark-mode #nai-gallery-panel-header {
    border-bottom-color: #38383a;
}
#phone-screen.dark-mode #nai-gallery-grid {
    background-color: #000;
}
#phone-screen.dark-mode #nai-gallery-action-bar {
    background-color: rgba(28, 28, 30, 0.9);
    border-top-color: #38383a;
}
#phone-screen.dark-mode #nai-gallery-action-bar .select-all-label {
    color: #f0f0f0;
}
/* --- NAI ÂõæÁâáÈáçÊñ∞ÁîüÊàêÊåâÈíÆ (V3 - ÊÇ¨ÂÅúÊòæÁ§∫‰øÆÂ§çÁâà) --- */
.nai-image-wrapper {
    position: relative; /* ÂÖ≥ÈîÆÔºöÂøÖÈ°ªÊúâËøôË°åÔºåÁî®‰∫éÊåâÈíÆÂÆö‰ΩçÔºÅ */
    display: inline-block;
    line-height: 0;
}

.nai-regenerate-btn {
    position: absolute;
    bottom: 10px; /* ‰ªéÂ∫ïÈÉ®ÂÅèÁßª 10px */
    right: 10px;  /* ‰ªéÂè≥‰æßÂÅèÁßª 10px */
    width: 32px;
    height: 32px;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    
    /* Ê†∏ÂøÉ‰øÆÂ§çÔºöÈªòËÆ§ËÆæÁΩÆ‰∏∫ÈÄèÊòéÔºåÂç≥ÈöêËóè */
    opacity: 0; 
    
    transition: opacity 0.2s ease-in-out;
    z-index: 5;
}

/* Ê†∏ÂøÉ‰øÆÂ§çÔºöÂΩìÈº†Ê†áÊÇ¨ÂÅúÂú® *ÂõæÁâáÂåÖË£πÂ±Ç* ‰∏äÊó∂ÔºåÊâçÊòæÁ§∫ÊåâÈíÆ */
.nai-image-wrapper:hover .nai-regenerate-btn {
    opacity: 0.85; /* ÊÇ¨ÂÅúÊó∂ÊòæÁ§∫ */
}

/* ÊåâÈíÆÊú¨Ë∫´ÁöÑÊÇ¨ÂÅúÊïàÊûúÔºàÂèò‰∫ÆÔºâ */
.nai-regenerate-btn:hover {
    opacity: 1 !important; /* Á°Æ‰øùÊÇ¨ÂÅúÂú®ÊåâÈíÆ‰∏äÊó∂Êõ¥‰∫Æ */
    background-color: rgba(0, 0, 0, 0.8);
}

.nai-regenerate-btn svg {
    width: 16px;
    height: 16px;
}

/* Âä†ËΩΩ‰∏≠Áä∂ÊÄÅ */
.nai-regenerate-btn.loading {
    pointer-events: none;
    opacity: 1; /* Âä†ËΩΩÊó∂Âº∫Âà∂ÊòæÁ§∫ */
}
.nai-regenerate-btn.loading svg {
    animation: spin 1s linear infinite;
}

/* ‰øÆÂ§çÊöóÈªëÊ®°Âºè‰∏ãÁöÑÊ†∑Âºè */
#phone-screen.dark-mode .nai-regenerate-btn {
    background-color: rgba(30, 30, 30, 0.7);
    border-color: rgba(255, 255, 255, 0.2);
}
/* --- NAI ÂõæÁâáÈáçÊñ∞ÁîüÊàêÊåâÈíÆ ÁªìÊùü --- */
/* ‚ñº‚ñº‚ñº „ÄêÊñ∞ÂäüËÉΩ„ÄëÊâãÊú∫Â§ñÊ°ÜÊ†∑Âºè (374x674px Á≤æÁ°ÆÁâà) ‚ñº‚ñº‚ñº */

/* 1. ÊâãÊú∫Â§ñÊ°ÜÁöÑËÉåÊôØ (‰Ω†ÊÉ≥Ë¶ÅÁöÑÁôΩËâ≤) */
body.frame-mode-active {
    background-color: #f0f2f5; /* ‰øùÊåÅÁôΩËâ≤ËÉåÊôØ */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
    overflow: hidden; 
}

/* Âú®ÊöóÈªëÊ®°Âºè‰∏ãÔºåËÉåÊôØÂàô‰∏∫ÊµÖÁÅ∞Ëâ≤ */
body.dark-mode.frame-mode-active {
    background-color: #f0f2f5;
}

/* 2. ÊâãÊú∫Â§ñÊ°ÜÊú¨Ë∫´ (‰ΩøÁî®‰Ω†ËÆ°ÁÆóÁöÑÁ≤æÁ°ÆÂ∞∫ÂØ∏) */
body.frame-mode-active #phone-screen {
    /* ÊÄªÂÆΩÂ∫¶: 374px
      ÊÄªÈ´òÂ∫¶: 674px
      (Ëøô‰ºö‰ΩøÂÜÖÈÉ®ÂÜÖÂÆπÂå∫ÂüüÁ≤æÁ°Æ‰∏∫ 350x650px)
    */
    width: 374px;
    height: 700px;
    
    /* 12px ÁöÑÈªëËâ≤ËæπÊ°Ü */
    border: 12px solid #ffffff;
    
    /* ÈÄÇÈÖçÁöÑÂúÜËßí */
    border-radius: 54px; 
    
    /* ÁßªÈô§ÂÜÖËæπË∑ù (padding) Êù•ÂåπÈÖç‰Ω†ÁöÑËÆ°ÁÆó */
    /* padding: 0; (ÁßªÈô§) */

    /* Ë¶ÜÁõñÂÖ®Â±èÊ†∑Âºè */
    min-height: auto; 
    max-width: 100%;
    max-height: 95vh; /* ÊúÄÂ§ßÈ´òÂ∫¶ÔºåÈò≤Ê≠¢Ê∫¢Âá∫ */
    box-shadow: inset 0 0 0 1px #000, 0 10px 35px rgba(0, 0, 0, 0.1);
    box-sizing: border-box; 
    position: relative; 
    overflow: hidden; 
}

/* 3. Â±èÂπïÂÜÖÈÉ®ÁöÑÂúÜËßíÈÅÆÁΩ© */
body.frame-mode-active #phone-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    
    /* ÂÜÖÈÉ®ÂúÜËßí (ÊØî 54px Â∞è 12px) */
    border-radius: 42px; 
    
    /* ÁßªÈô§ÂÜÖËæπÊ°ÜÔºåÂõ†‰∏∫ÂÆÉ‰∏çÂÜçÈúÄË¶Å */
    /* border: 0; (ÁßªÈô§) */
    
    pointer-events: none;
    z-index: 1000; 
    
    /* Ê∑ªÂä†‰∏Ä‰∏™ÈùûÂ∏∏ÁªÜÂæÆÁöÑÂÜÖÈò¥ÂΩ±ÔºåÊ®°ÊãüÂ±èÂπïÁéªÁíÉÊÑü */
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
}

/* 4. Ê®°ÊãüÁÅµÂä®Â≤õ (Dynamic Island) */
body.frame-mode-active #phone-screen::after {
    content: '';
    position: absolute;
    top: 22px; 
    left: 50%;
    transform: translateX(-50%);
    /* Ë∞ÉÊï¥‰∏∫Êõ¥ÂçèË∞ÉÁöÑÁÅµÂä®Â≤õÂ∞∫ÂØ∏ (Â∑≤Áº©Â∞è) */
    width: 100px;  /* <-- Â∑≤‰ªé 120px ÂáèÂ∞è */
    height: 25px;  /* <-- Â∑≤‰ªé 28px ÂáèÂ∞è */
    background-color: #000; 
    border-radius: 12.5px; /* <-- Ë∞ÉÊï¥ÂúÜËßí‰ª•‰øùÊåÅÂΩ¢Áä∂ */
    z-index: 1002; 
}

/* [Êñ∞Â¢û] ÂΩìÊâãÊú∫Â§ñÊ°ÜÊøÄÊ¥ªÊó∂ÔºåÁ≠âÊØîÁº©Â∞è‰∏ªÂ±èÂπïÂíåCPhone/MYPhoneÂÜÖÂÆπ‰ª•ÈÄÇÂ∫îÂ±èÂπï (V3 - ÊúÄÁªàÂ∏ÉÂ±Ä‰øÆÂ§çÁâà) */
body.frame-mode-active #home-screen-pages-container,
body.frame-mode-active #char-clock-container,
body.frame-mode-active #char-app-grid,
body.frame-mode-active #myphone-layout-container {
    transform: scale(0.9);
    transform-origin: top center;
    transition: transform 0.3s ease, margin-top 0.3s ease, margin-bottom 0.3s ease; /* Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú */
}

/* EPhone ‰∏ªÂ±èÂπïÁöÑÂ∏ÉÂ±Ä‰øÆÊ≠£ */
body.frame-mode-active #home-screen-pages-container {
    margin-bottom: -55px;
}
body.frame-mode-active #home-screen-pagination {
    transform: scale(0.9);
}
body.frame-mode-active #desktop-dock {
    transform: scale(0.9);
    margin-bottom: -5px;
}

/* ‚ñº‚ñº‚ñº CPhone Â∏ÉÂ±ÄÁöÑÊ†∏ÂøÉ‰øÆÊ≠£ ‚ñº‚ñº‚ñº */
body.frame-mode-active #char-clock-container {
    /* ÊõøÊç¢ÈªòËÆ§ÁöÑÂ§ßÈó¥Ë∑ùÔºåÁªô‰∏Ä‰∏™ÈÄÇÂêàÊ°ÜÂÜÖËßÜÂõæÁöÑ‰∏äËæπË∑ù */
    margin-top: 60px;
    /* Â§ßÂπÖÂáèÂ∞è‰∏ãËæπË∑ùÔºåÊää‰∏ãÈù¢ÁöÑAppÂõæÊ†áÊãâ‰∏äÊù• */
    margin-bottom: 50px;
}

body.frame-mode-active #char-app-grid {
    /* ÁßªÈô§‰πãÂâçËøá‰∫éÊøÄËøõÁöÑË¥üËæπË∑ùÔºåËÆ©ÂÆÉËá™ÁÑ∂ÊéíÂàóÂú®Êó∂Èíü‰∏ãÊñπ */
    margin-top: 0;
}

/* ‚ñº‚ñº‚ñº MYPhone Â∏ÉÂ±ÄÁöÑÊ†∏ÂøÉ‰øÆÊ≠£ ‚ñº‚ñº‚ñº */
body.frame-mode-active #myphone-layout-container {
    /* ÈÄÇÈÖçÊ°ÜÂÜÖËßÜÂõæÁöÑ‰∏ä‰∏ãËæπË∑ù */
    margin-top: 60px;
    margin-bottom: 50px;
}
/* ‚ñ≤‚ñ≤‚ñ≤ ‰øÆÊ≠£ÁªìÊùü ‚ñ≤‚ñ≤‚ñ≤ */
#dynamic-island-content {
    position: absolute;
    top: 22px; /* ‰∏éÊâãÊú∫Â§ñÊ°ÜÁöÑÂàòÊµ∑‰º™ÂÖÉÁ¥†‰ΩçÁΩÆÂÆåÂÖ®ÈáçÂêà */
    left: 50%;
    transform: translateX(-50%);
    width: 120px; /* ÈªòËÆ§ÂÆΩÂ∫¶Ôºå‰∏éÂàòÊµ∑‰∏ÄËá¥ */
    height: 28px; /* ÈªòËÆ§È´òÂ∫¶Ôºå‰∏éÂàòÊµ∑‰∏ÄËá¥ */
    background-color: #000;
    border-radius: 14px;
    z-index: 1003; /* Á°Æ‰øùÂú®ÂàòÊµ∑‰º™ÂÖÉÁ¥†‰πã‰∏ä */
    
    display: flex;
    align-items: center;
    padding: 3px;
    box-sizing: border-box;
    
    /* Ê†∏ÂøÉÂä®ÁîªÔºöÂÆΩÂ∫¶„ÄÅÈÄèÊòéÂ∫¶ÁöÑÂèòÂåñÈÉΩÂ∏¶ËøáÊ∏°ÊïàÊûú */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* ÈªòËÆ§Áä∂ÊÄÅÔºöÂÆåÂÖ®ÈÄèÊòéÔºå‰∏çÂèØËßÅÔºå‰∏çÂìçÂ∫îÁÇπÂáª */
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
    overflow: hidden; /* ÈöêËóèÂÜÖÈÉ®Ê∫¢Âá∫ÁöÑÂÜÖÂÆπ */
}

/* 2. ÂΩìÈü≥‰πêÊí≠ÊîæÊó∂ÔºåÁÅµÂä®Â≤õ‚ÄúÂ±ïÂºÄ‚Äù */
/* ËßÑÂàô 1: Âú®ÊúâÊ°ÜÊ®°Âºè‰∏ãÔºåË∞ÉÊï¥ÂõûÂàòÊµ∑ÁöÑ‰ΩçÁΩÆÂπ∂Â±ïÂºÄ */
body.frame-mode-active #phone-screen.dynamic-island-active #dynamic-island-content {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    width: 190px;
    top: 22px; /* Ë¶ÜÁõñÈªòËÆ§ÂÄºÔºåÂØπÈΩêÂàòÊµ∑ */
}

/* ËßÑÂàô 2: Âú®Êó†Ê°ÜÊ®°Âºè‰∏ãÔºåÂú®È°∂ÈÉ®Â±ïÂºÄ */
body:not(.frame-mode-active) #phone-screen.dynamic-island-active #dynamic-island-content {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    width: 190px;
    /* (ËøôÈáå‰ºö‰ΩøÁî®Êàë‰ª¨Âú®Á¨¨6303Ë°åËÆæÁΩÆÁöÑÊñ∞topÂÄº) */
}

/* 3. ÂêåÊó∂ÔºåÈöêËóèÊéâÂéüÊù•ÁöÑÂàòÊµ∑‰º™ÂÖÉÁ¥†ÔºåÈò≤Ê≠¢ÈáçÂè† */
body.frame-mode-active #phone-screen.dynamic-island-active::after {
    opacity: 0;
}

/* 4. Â≤õÂÜÖÁöÑ‰∏ìËæëÂ∞ÅÈù¢ */
#island-album-art {
    width: 22px; /* È´òÂ∫¶28px - ‰∏ä‰∏ãÂêÑ3pxÂÜÖËæπË∑ù = 22px */
    height: 22px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 8px;
    flex-shrink: 0; /* Èò≤Ê≠¢Ë¢´ÂéãÁº© */
}

/* 5. Ê≠åËØçÁöÑÂÆπÂô®ÔºåÁî®‰∫éË£ÅÂâ™ÊªöÂä®ÊñáÂ≠ó */
#island-lyric-container {
    flex-grow: 1; /* Âç†ÊçÆÂâ©‰ΩôÊâÄÊúâÁ©∫Èó¥ */
    overflow: hidden; /* „ÄêÂÖ≥ÈîÆ„ÄëË£ÅÂâ™ÊéâË∂ÖÂá∫ÈÉ®ÂàÜÁöÑÊ≠åËØç */
    white-space: nowrap; /* „ÄêÂÖ≥ÈîÆ„ÄëÂº∫Âà∂Ê≠åËØç‰∏çÊç¢Ë°å */
}
#island-lyric-container.center-content {
    display: flex;
    justify-content: center;
}
/* 6. Ê≠åËØçÊñáÂ≠óÊú¨Ë∫´ */
#island-lyric-text {
    color: #aeaeae; /* ÊüîÂíåÁöÑÁÅ∞Ëâ≤ */
    font-size: 13px;
    font-weight: 500;
    display: inline-block; /* Âä®ÁîªÈúÄË¶Å */
    transition: opacity 0.2s ease-in-out;
}
/* ÊÇ®ÂèØ‰ª•Âú® L2910 ÈôÑËøëÊâæÂà∞ .frame-mode-active ÁöÑÁõ∏ÂÖ≥Ê†∑Âºè
   ÁÑ∂ÂêéÂú®ËøôÈôÑËøëÊ∑ªÂä†‰∏ãÈù¢ÁöÑÊñ∞ËßÑÂàô
*/

body.frame-mode-active #main-content-area {
    /* * Âú®ËøôÈáå‰øÆÊîπÊÇ®ÊÉ≥Ë¶ÅÁöÑË∑ùÁ¶ª„ÄÇ
     * ÂéüÊú¨ÊòØ 30pxÔºåÊÇ®ÂèØ‰ª•ÊîπÊàê 40px Êàñ 50px Êù•Â¢ûÂ§ßÈó¥Ë∑ù„ÄÇ
     * * ËØ∑Ê≥®ÊÑèÔºöÂú®ÊúâÊ°ÜÊ®°Âºè‰∏ãÔºåÊï¥‰∏™‰∏ªÈ°µË¢´ transform: scale(0.9) Áº©Â∞è‰∫ÜÔºå
     * ÊâÄ‰ª•ÊÇ®ËÆæÁΩÆ 50pxÔºåËßÜËßâ‰∏äÁúãËµ∑Êù•‰ºöÊòØ 45px„ÄÇ
     */
    gap:10px; 
}
/* ‰ªÖÂú®ÊúâÊ°ÜÊ®°Âºè‰∏ãÔºå‰øÆÊîπÁªÑ‰ª∂Ë∑ùÁ¶ªÈ°∂ÈÉ®ÁöÑÈó¥Ë∑ù */
body.frame-mode-active #main-content-area {
    /* * ÂéüÊú¨ÊòØ 20px„ÄÇ
     * ÊÇ®ÂèØ‰ª•ÊîπÊàê 0px Êù•ËÆ©ÂÆÉÊõ¥Èù†‰∏äÔºå
     * ÊàñËÄÖÊîπÊàê 40px Êù•ËÆ©ÂÆÉÊõ¥Èù†‰∏ã„ÄÇ
     */
    margin-top: 0px; 
}
/* ‰ªÖÂú®ÊúâÊ°ÜÊ®°Âºè‰∏ãÔºåË∞ÉÊï¥„ÄêÁ¨¨‰∫åÈ°µ„ÄëÁöÑÈó¥Ë∑ù */
body.frame-mode-active .home-screen-page:nth-child(2) .polaroid-widget-container {
    
    /* 1. ‰øÆÊîπËøô‰∏™Êù•Ë∞ÉÊï¥ [ÊãçÁ´ãÂæó] ‰∏é [Â±èÂπïÈ°∂ÈÉ®] ÁöÑË∑ùÁ¶ª (Âéü‰∏∫ 20px) */
    /* ÊÇ®ÂèØ‰ª•ÊîπÊàê 0px Êàñ 10px Êù•ËÆ©ÂÆÉÊõ¥Èù†‰∏ä */
    margin-top: 0px;

    /* 2. ‰øÆÊîπËøô‰∏™Êù•Ë∞ÉÊï¥ [ÊãçÁ´ãÂæó] ‰∏é [‰∏ãÊñπÂ∫îÁî®/Â∞èÁªÑ‰ª∂] ÁöÑË∑ùÁ¶ª (Âéü‰∏∫ 30px) */
    /* ÊÇ®ÂèØ‰ª•ÊîπÊàê 40px Êàñ 50px Êù•Â¢ûÂ§ßÂÆÉ‰ª¨‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    margin-bottom: 10px;
}
/* „Äê‰øÆÂ§ç„ÄëÂú®ÊúâÊ°ÜÊ®°Âºè‰∏ãÔºåÂ¢ûÂä†ËÅäÂ§©È°µÈù¢Â§¥ÈÉ®ÁöÑÈ°∂ÈÉ®ÂÜÖËæπË∑ùÔºå‰ª•ÈÅøÂºÄÁÅµÂä®Â≤õ */
body.frame-mode-active #chat-interface-screen > .header {
    /* * ÁÅµÂä®Â≤õÂå∫ÂüüÂ§ßÁ∫¶Âú® 22px + 25px = 47px ÁªìÊùü„ÄÇ
     * Êàë‰ª¨ÂèØ‰ª•ËÆæÁΩÆ 55px Êàñ 60px Êù•ÁªôÂÆÉÁïôÂá∫‰∏Ä‰∫õÂëºÂê∏Á©∫Èó¥„ÄÇ
     */
    padding-top: 48px !important; 
}
body:not(.frame-mode-active) #phone-screen.dynamic-island-active #chat-interface-screen > .header {
    padding-top: 48px !important;
}
/* --- Ê≠åËØçÂæ™ÁéØÊªöÂä® (Marquee) Âä®Áîª --- */

/* 1. ÈªòËÆ§Áä∂ÊÄÅÔºöÂ±Ö‰∏≠ (Áî®‰∫éÁü≠Ê≠åËØç) */
#island-lyric-container.center-content {
    display: flex;
    justify-content: center;
}
#island-lyric-container.center-content #island-lyric-text.scrolling {
    animation: none; /* Áü≠Ê≠åËØç‰∏çÈúÄË¶ÅÊªöÂä® */
}
#island-lyric-container.center-content #island-lyric-text span + span {
    display: none; /* Áü≠Ê≠åËØçÂè™ÊòæÁ§∫‰∏Ä‰∏™ */
}

/* 2. ÊªöÂä®ÂÆπÂô®ÔºöÂÜÖÈÉ®Êúâ‰∏§‰∏™span */
#island-lyric-text.scrolling {
    /* ‰ΩøÁî® --marquee-duration ÂèòÈáè‰Ωú‰∏∫Âä®ÁîªÊó∂ÈïøÔºå‰ªéJS‰º†ÂÖ• */
    animation: marquee var(--marquee-duration, 10s) linear infinite;
    display: block; /* ÂøÖÈ°ªÊòØ block ÊâçËÉΩÂ∫îÁî® transform */
    width: fit-content; /* Á°Æ‰øùÂÆΩÂ∫¶Áî±ÂÜÖÂÆπÊíëÂºÄ */
}

/* 3. ‰∏§‰∏™spanÂπ∂Êéí */
#island-lyric-text.scrolling span {
    display: inline-block;
    padding-right: 50px; /* ‰∏§‰∏™Ê≠åËØç‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    white-space: nowrap;
}

/* 4. ÂÆö‰πâÂä®Áîª */
@keyframes marquee {
    0% {
        transform: translateX(0%);
    }
    100% {
        /* * ÊªöÂä® 50% ÁöÑÂÆΩÂ∫¶„ÄÇ
         * Âõ†‰∏∫Êàë‰ª¨ÁöÑÊÄªÂÆΩÂ∫¶ÊòØ‰∏§‰∏™ <span>ÔºåÊâÄ‰ª•ÊªöÂä® 50% 
         * ÊÑèÂë≥ÁùÄÁ¨¨‰∏Ä‰∏™ <span> ÂàöÂ•ΩÂÆåÂÖ®ÁßªÂá∫ÔºåÁ¨¨‰∫å‰∏™ <span> ÂÆåÁæéÊé•‰∏ä„ÄÇ
         */
        transform: translateX(-50%); 
    }
}

/* „ÄêÊñ∞ÂäüËÉΩ„ÄëÂàÜÁ¶ªÁä∂ÊÄÅÊ†è / Áúü¬∑ÂÖ®Â±èÊ®°Âºè v2.0 */

/* ÂΩì body Ê†áÁ≠æÊã•Êúâ detach-mode-active Á±ªÊó∂ÔºåÂ∫îÁî®‰ª•‰∏ãÊ†∑Âºè */
body.detach-mode-active #phone-screen {
    /* Ê†∏ÂøÉ‰øÆÊîπ1Ôºö‰øùÊåÅÂõ∫ÂÆöÂÆö‰ΩçÔºå‰ΩÜÂè™ÂÆö‰πâ‰∏âËæπ */
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;

    /* Ê†∏ÂøÉ‰øÆÊîπ2ÔºöËøôÊòØÊúÄÂÖ≥ÈîÆÁöÑ‰∏ÄÊ≠•ÔºÅ
       ËÆ©ÂÖÉÁ¥†ÁöÑÈ°∂ÈÉ®‰ªé‚ÄúÂÆâÂÖ®Âå∫ÂüüÁöÑÂ∫ïÈÉ®‚ÄùÂºÄÂßãÔºåËÄå‰∏çÊòØÂ±èÂπïÁöÑÁªùÂØπÈ°∂ÈÉ®„ÄÇ
       env(safe-area-inset-top) ‰ºöËá™Âä®Ëé∑ÂèñÂàòÊµ∑ÊàñÁä∂ÊÄÅÊ†èÁöÑÈ´òÂ∫¶„ÄÇ*/
    top: env(safe-area-inset-top);

    /* Ê†∏ÂøÉ‰øÆÊîπ3ÔºöÁßªÈô§Âõ∫ÂÆöÁöÑ height Â±ûÊÄßÔºåËÆ© top Âíå bottom Ëá™Âä®ÂÜ≥ÂÆöÈ´òÂ∫¶ */
    height: auto;
    width: auto; /* ÂêåÊ†∑ÁßªÈô§Âõ∫ÂÆöÁöÑ width */

    /* ÁßªÈô§ÊâãÊú∫Â§ñÊ°ÜÊ†∑ÂºèÔºåÂÆûÁé∞ÁúüÊ≠£ÁöÑÂÖ®Â±èÊÑü */
    border-radius: 0;
    border: none;
    box-shadow: none;

    /* ÂÖ∂‰ªñÂ∏ÉÂ±ÄÂ±ûÊÄß‰øùÊåÅ‰∏çÂèò */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    background-color: var(--secondary-bg);
}

/* Âú®Ê≠§Ê®°Âºè‰∏ãÔºåÈöêËóèÊ®°ÊãüÁöÑÂàòÊµ∑ÂíåÂ±èÂπïÂúÜËßíÈÅÆÁΩ©ÔºåÂõ†‰∏∫Êàë‰ª¨Ë¶ÅÊòæÁ§∫Áâ©ÁêÜÁöÑ */
body.detach-mode-active #phone-screen::after,
body.detach-mode-active #phone-screen::before {
    display: none;
}
/* „ÄêÂÖ®Â±Ä‰øÆÂ§ç„ÄëÂ∞ÜDockÊ†èÂíåÂàÜÈ°µÁÇπÁöÑ‰ΩçÁΩÆÂõ∫ÂÆöÂú®Êõ¥‰ΩéÁöÑ‰ΩçÁΩÆÔºåÂøΩÁï•Â∫ïÈÉ®ÂÆâÂÖ®Âå∫ */
#home-screen-pagination {
    /* ÁßªÈô§ calc Âíå env() */
    padding-bottom: 10px;
}

#desktop-dock {
    /* ÁßªÈô§ calc Âíå env() */
    margin-bottom: 20px;
}
/* ======================================= */
/* ‚ñº‚ñº‚ñº „ÄêÊñ∞ÂäüËÉΩ„ÄëÁÆÄÊ¥ÅËÅäÂ§©ÁïåÈù¢ (Minimal Chat UI) ‚ñº‚ñº‚ñº */
/* ======================================= */

/* 1. ÈªòËÆ§ÈöêËóè‚Äú+‚ÄùÂè∑Â±ïÂºÄÊåâÈíÆ */
#chat-expand-btn {
    display: none;
    flex-shrink: 0;
    width: 40px; /* ‰∏éÂèëÈÄÅÊåâÈíÆÂêåÈ´ò */
    height: 40px;
    font-size: 28px;
    font-weight: 300;
    line-height: 38px; /* ÂûÇÁõ¥Â±Ö‰∏≠ */
    padding: 0;
    background-color: var(--secondary-bg);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    transition: transform 0.3s ease, background-color 0.2s, color 0.2s;
}

/* 2. ÂΩìÁÆÄÊ¥ÅÊ®°ÂºèÂºÄÂêØÊó∂ (body‰∏ä‰ºöÊúâËøô‰∏™class) */
body.minimal-chat-ui-active #chat-input-actions-top {
    /* ÈªòËÆ§ÈöêËóèÂ∑•ÂÖ∑Ê†è */
    display: none;
}
body.minimal-chat-ui-active #chat-input-main-row {
    /* Á°Æ‰øù‚Äú+‚ÄùÊåâÈíÆÂíåËæìÂÖ•Ê°ÜÂ∫ïÂØπÈΩê */
    align-items: flex-end;
}
body.minimal-chat-ui-active #chat-expand-btn {
    /* ÊòæÁ§∫‚Äú+‚ÄùÊåâÈíÆ */
    display: flex;
    justify-content: center;
    align-items: center;
}
body.minimal-chat-ui-active #chat-input {
    /* ‰øÆÂ§ç‚Äú+‚ÄùÊåâÈíÆÂá∫Áé∞ÂêéÔºåËæìÂÖ•Ê°ÜÊ≤°ÊúâËá™Âä®ÈÄÇÂ∫îÂÆΩÂ∫¶ÁöÑÈóÆÈ¢ò */
    flex-grow: 1;
}

/* 3. ÂΩìÁî®Êà∑ÁÇπÂáª‚Äú+‚ÄùÂè∑ÔºåÂ∑•ÂÖ∑Ê†èÂ±ïÂºÄÊó∂ (body‰∏ä‰ºö‰∏¥Êó∂Ê∑ªÂä†Ëøô‰∏™class) */
body.minimal-chat-ui-active.chat-actions-expanded #chat-input-actions-top {
    /* ÈáçÊñ∞ÊòæÁ§∫Â∑•ÂÖ∑Ê†è */
    display: flex;
}
body.minimal-chat-ui-active.chat-actions-expanded #chat-expand-btn {
    /* ‚Äú+‚ÄùÂè∑ÊóãËΩ¨45Â∫¶ÂèòÊàê‚Äúx‚ÄùÂè∑ */
    transform: rotate(45deg);
    background-color: #f0f2f5;
    color: #8a8a8a;
}
#phone-screen.dark-mode body.minimal-chat-ui-active.chat-actions-expanded #chat-expand-btn {
    background-color: #3e3e42;
    color: #8d8d92;
}

/* 4. ÊöóÈªëÊ®°Âºè‰∏ãÁöÑ‚Äú+‚ÄùÊåâÈíÆ */
#phone-screen.dark-mode #chat-expand-btn {
    background-color: #3e3e42;
    color: #f0f0f0;
    border: 1px solid #38383a;
}
/* ‚ñ≤‚ñ≤‚ñ≤ ÁÆÄÊ¥ÅËÅäÂ§©ÁïåÈù¢Ê†∑ÂºèÁªìÊùü ‚ñ≤‚ñ≤‚ñ≤ */


/* 1. ÂΩìÁÆÄÊ¥ÅÊ®°ÂºèÂºÄÂêØ (‰∏îÂ∑•ÂÖ∑Ê†èÊäòÂè†Êó∂)ÔºåÂáèÂ∞èËÅäÂ§©ÂàóË°®ÁöÑÂ∫ïÈÉ®ÂÜÖËæπË∑ù */
body.minimal-chat-ui-active #chat-interface-screen #chat-messages {
    /* ÂéüÊú¨ÊòØ 150pxÔºåÊàë‰ª¨ÊääÂÆÉÁº©Â∞èÂà∞ 80pxÔºåÂàöÂ•ΩÂÆπÁ∫≥ÂçïË°åËæìÂÖ•Ê°Ü */
    padding-bottom: calc(80px + env(safe-area-inset-bottom)) !important;
    /* Á°Æ‰øùËøáÊ∏°Âπ≥Êªë */
    transition: padding-bottom 0.3s ease;
}

/* 2. ÂΩìÁÆÄÊ¥ÅÊ®°ÂºèÂºÄÂêØ (‰∏îÂ∑•ÂÖ∑Ê†èÂ±ïÂºÄÊó∂)ÔºåÊÅ¢Â§çÂéüÊù•ÁöÑÂÜÖËæπË∑ù */
body.minimal-chat-ui-active.chat-actions-expanded #chat-interface-screen #chat-messages {
    /* ÊÅ¢Â§ç 150pxÔºå‰∏∫Â±ïÂºÄÁöÑÂõæÊ†áË°åËÖæÂá∫Á©∫Èó¥ */
    padding-bottom: calc(120px + env(safe-area-inset-bottom)) !important;
}
/* --- Êñ∞Â¢ûÔºöÂäüËÉΩÈîÅÂÆöÊ†∑Âºè --- */
.locked-feature {
    opacity: 0.7; /* ËÆ©ÊåâÈíÆÁúãËµ∑Êù•ÊúâÁÇπÁÅ∞ */
    position: relative; /* ‰∏∫ÂõæÊ†áÂÆö‰Ωç */
    cursor: help; /* Èº†Ê†áÊÇ¨ÂÅúÊó∂ÊòæÁ§∫Â∏ÆÂä©ÂõæÊ†á */
}



/* Âú®ÊöóÈªëÊ®°Âºè‰∏ãËÆ©ÈîÅÊõ¥Ê∏ÖÊô∞ */
#phone-screen.dark-mode .locked-feature::after {
    background-color: rgba(0, 0, 0, 0.5);
}
/* „ÄêÊñ∞ÂäüËÉΩ„ÄëPINÁ†ÅÊøÄÊ¥ªÂºπÁ™óÊ†∑Âºè */
#pin-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
    display: none; /* ÈªòËÆ§ÈöêËóè */
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

#pin-modal-overlay.visible {
    display: flex; /* ÊøÄÊ¥ªÊó∂ÊòæÁ§∫ */
}

#pin-modal-content .form-group {
    margin-bottom: 15px;
}

/* Ëß£ÂÜ≥ÊÇ®Êó†Ê≥ïÂ§çÂà∂ÁöÑÈóÆÈ¢òÔºöËÆ©Ëøô‰∏™ËæìÂÖ•Ê°ÜÁúãËµ∑Êù•ÂÉè‰∏™ÊòæÁ§∫Ê°ÜÔºå‰ΩÜÂÜÖÂÆπÂèØÈÄâ */
#pin-device-id-display {
    -webkit-user-select: text; /* ÂÖºÂÆπ Safari */
    user-select: text; /* Ê†áÂáÜ */
    cursor: text;
    background-color: #f0f2f5;
    color: #555;
    border: 1px dashed #ccc;
    font-size: 14px !important; /* Á°Æ‰øùÂ≠ó‰ΩìÂ§ßÂ∞èÊ≠£Á°Æ */
    padding: 10px !important;
}

#phone-screen.dark-mode #pin-device-id-display {
    background-color: #2c2c2e;
    color: #f0f0f0;
    border-color: #38383a;
}

#character-profile-modal .thought-content .text:has(div),
#character-profile-modal .thought-content .text:has(table) {
    padding: 0 !important;
    font-family: inherit !important; /* ÊÅ¢Â§çÈªòËÆ§Â≠ó‰ΩìÔºåËÆ©Âç°ÁâáËá™Â∑±ÊéßÂà∂ */
    font-size: inherit !important;
    line-height: normal !important; /* ÊÅ¢Â§çÊ≠£Â∏∏ÁöÑË°åÈ´ò */
    color: inherit !important;
    background: none !important;
    white-space: normal !important; /* ÂÖÅËÆ∏Âç°ÁâáÊ≠£Â∏∏Êç¢Ë°åÂíåÂ∏ÉÂ±Ä */
}
.quick-reply-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0; /* Èò≤Ê≠¢Âú®flexÂ∏ÉÂ±Ä‰∏≠Ë¢´ÂéãÁº© */
}

.quick-reply-item:last-child {
    border-bottom: none;
}

.quick-reply-text {
    font-size: 16px;
    color: var(--text-primary);
    cursor: pointer;
    flex-grow: 1; /* Âç†ÊçÆ‰∏ªË¶ÅÁ©∫Èó¥ */
    padding-right: 15px; /* ÂíåÊåâÈíÆ‰øùÊåÅË∑ùÁ¶ª */
    word-break: break-all; /* ‰øÆÂ§çÈïøÊñáÊú¨Ê∫¢Âá∫ */
    white-space: pre-wrap; /* ÊîØÊåÅÊç¢Ë°åÁ¨¶ÊòæÁ§∫ */
}

.quick-reply-text:hover {
    color: var(--accent-color);
}

.quick-reply-actions {
    display: flex;
    gap: 10px;
    flex-shrink: 0; /* Èò≤Ê≠¢ÊåâÈíÆË¢´ÂéãÁº© */
}

.quick-reply-edit-btn,
.quick-reply-delete-btn {
    background: none;
    border: none;
    padding: 5px;
    cursor: pointer;
    color: var(--text-secondary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}
.quick-reply-edit-btn:hover {
    background-color: #e9e9eb;
    color: var(--accent-color);
}
.quick-reply-delete-btn:hover {
    background-color: #ffebee;
    color: #ff3b30;
}

#phone-screen.dark-mode .quick-reply-item {
    border-bottom-color: #38383a;
}
#phone-screen.dark-mode .quick-reply-text:hover {
    color: #58a6ff;
}
#phone-screen.dark-mode .quick-reply-edit-btn:hover {
    background-color: #3a3a3c;
    color: #58a6ff;
}
#phone-screen.dark-mode .quick-reply-delete-btn:hover {
    background-color: #5c1f24;
    color: #ff8080;
}

/* Á°Æ‰øù modal-body ÂèØ‰ª•ÊªöÂä® */
#quick-reply-modal .modal-body {
    overflow-y: auto;
}
#char-music-player-modal #char-music-lyrics {
    /* display: none;  <-- Âà†Èô§Ëøô‰∏ÄË°åÔºåÊàñËÄÖÊîπ‰∏∫‰∏ãÈù¢ËøôÊ†∑: */
    display: block; 
    width: 100%;
    height: 60px; /* Áªô‰∏™Âõ∫ÂÆöÈ´òÂ∫¶ */
    overflow: hidden;
    position: relative;
    margin-bottom: 20px;
    font-size: 14px;
    line-height: 20px;
    color: #888;
    text-align: center;
    transition: all 0.3s ease;
    mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent);
    -webkit-mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent);
}

.char-player-minimize-btn {
    position: absolute;
    top: 15px;
    right: 85px; /* ÊîæÂú®ÂÖ≥Èó≠ÊåâÈíÆÂ∑¶Ëæπ */
    background: none;
    border: none;
    color: #aaa;
    cursor: pointer;
    line-height: 1;
    z-index: 10;
    padding: 5px; /* Áªô‰∫àÁÇπÂáªÂå∫Âüü */
    display: flex; /* Áî®‰∫éÂ±Ö‰∏≠SVG */
    align-items: center; /* Áî®‰∫éÂ±Ö‰∏≠SVG */
    justify-content: center; /* Áî®‰∫éÂ±Ö‰∏≠SVG */
}
.char-player-minimize-btn:hover {
    color: #333;
}

/* 3. Ê∑ªÂä†ÊÇ¨ÊµÆÊÅ¢Â§çÁêÉÊ†∑Âºè */
#char-music-restore-btn {
    position: absolute;
    top: 120px;
    right: 15px;
    width: 45px;
    height: 45px;
    background: transparent; /* 1. Êîπ‰∏∫ÂÆåÂÖ®ÈÄèÊòé */
    backdrop-filter: none; /* 2. ÁßªÈô§ÊØõÁéªÁíÉ */
    -webkit-backdrop-filter: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: none; /* 3. ÁßªÈô§Èò¥ÂΩ± */
    z-index: 900; /* Á°Æ‰øùÂú®ÊúÄ‰∏äÂ±Ç */
    cursor: pointer;
    animation: float-music 3s ease-in-out infinite;
    border: none; /* 4. ÁßªÈô§ËæπÊ°Ü */
}

@keyframes float-music {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}
.video-call-top-bar #minimize-call-btn {
    position: absolute;
    left: 20px;
    top: 48px; /* ÈÄÇÈÖçÈ°∂ÈÉ®ÁöÑ padding-top */
    background: none;
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
    padding: 5px;
    z-index: 11;
    opacity: 0.7;
    transition: opacity 0.2s;
    pointer-events: auto;
}
.video-call-top-bar #minimize-call-btn:hover {
    opacity: 1;
}
#video-call-restore-btn {
    position: absolute;
    top: 120px; /* ÈªòËÆ§ÊòæÁ§∫‰ΩçÁΩÆÔºåÂíåÈü≥‰πêÊåâÈíÆÈîôÂºÄ‰∏ÄÁÇπ */
    right: 15px;
    width: 45px;
    height: 45px;
    background-color: #4cd964; /* ÁªøËâ≤Ôºå‰ª£Ë°®ÈÄöËØù‰∏≠ */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    z-index: 900; /* Á°Æ‰øùÂú®ÊúÄ‰∏äÂ±Ç */
    cursor: pointer;
    animation: pulse 1.5s infinite; /* Â§çÁî®ÂÖÖÁîµ/Êù•ÁîµÁöÑÂëºÂê∏Âä®Áîª */
    border: 2px solid rgba(255, 255, 255, 0.3);
}
.nai-image-wrapper {
    position: relative; 
    display: inline-block;
    line-height: 0;
}

/* DING: Âú®ËøôÈáåÊ∑ªÂä†Êñ∞ËßÑÂàô */
.bubble-image-controls {
    position: absolute;
    bottom: 10px;
    right: 10px;
    display: flex;
    gap: 8px;
    z-index: 5;
}

/* DING: ÊâæÂà∞Á∫¶ 10235 Ë°åÁöÑ .nai-regenerate-btn ËßÑÂàôÂπ∂Â∞ÜÂÖ∂‰øÆÊîπ‰∏∫Ôºö */
.nai-regenerate-btn,
.nai-upload-imgbb-btn {
    position: static; 
    width: 32px;
    height: 32px;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    
  
    opacity: 0; 
    
    transition: opacity 0.2s ease-in-out;
}

/* DING: ÊâæÂà∞Á∫¶ 10260 Ë°åÁöÑ hover ËßÑÂàôÂπ∂‰øÆÊîπÈÄâÊã©Âô®Ôºö */
.nai-image-wrapper:hover .nai-regenerate-btn,
.nai-image-wrapper:hover .nai-upload-imgbb-btn {
    opacity: 1; 
}

/* DING: ÊâæÂà∞Á∫¶ 10266 Ë°åÁöÑ hover ËßÑÂàôÂπ∂‰øÆÊîπÈÄâÊã©Âô®Ôºö */
.nai-regenerate-btn:hover,
.nai-upload-imgbb-btn:hover {
    opacity: 1 ; 
    background-color: rgba(0, 0, 0, 0.8);
}

/* DING: ÊâæÂà∞Á∫¶ 10272 Ë°åÁöÑ loading ËßÑÂàôÂπ∂‰øÆÊîπÈÄâÊã©Âô®Ôºö */
.nai-regenerate-btn.loading,
.nai-upload-imgbb-btn.loading {
    pointer-events: none;
    opacity: 1; 
}
.nai-regenerate-btn.loading svg,
.nai-upload-imgbb-btn.loading svg,
.nai-save-local-btn.loading svg{ /* DING: ÂêåÊ†∑‰øÆÊîπËøôÈáå */
    animation: spin 1s linear infinite;
}
/* DING: Âú® .nai-image-wrapper ËßÑÂàôÂêéÊ∑ªÂä† */
.bubble-image-wrapper {
    position: relative;
    display: inline-block; /* Á°Æ‰øù wrapper ÂåÖË£πÂõæÁâá */
    line-height: 0; /* ÁßªÈô§ÂõæÁâá‰∏ãÁöÑÁ©∫Èöô */
}

/* DING: Âú® .bubble-image-controls ËßÑÂàô (Á∫¶ 10243 Ë°å) ÂêéÊ∑ªÂä† */
.bubble-image-controls.user-controls {
    left: 10px; /* DING: Áî®Êà∑ÊåâÈíÆÂú®Â∑¶‰æß */
    right: auto;
}

/* DING: Âú® .nai-regenerate-btn, .nai-upload-imgbb-btn ËßÑÂàô (Á∫¶ 10250 Ë°å) ÂêéÊ∑ªÂä† */
.user-upload-imgbb-btn {
    position: static; 
    width: 32px;
    height: 32px;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    opacity: 0; /* DING: ÈªòËÆ§ÊòæÁ§∫ */
    transition: opacity 0.2s ease-in-out;
}

/* DING: Âú® .nai-image-wrapper:hover ... ËßÑÂàô (Á∫¶ 10271 Ë°å) ÂêéÊ∑ªÂä† */
.user-image-wrapper:hover .user-upload-imgbb-btn {
    opacity: 1; 
}

/* DING: Âú® .nai-regenerate-btn:hover, ... ËßÑÂàô (Á∫¶ 10277 Ë°å) ÂêéÊ∑ªÂä† */
.user-upload-imgbb-btn:hover {
    opacity: 1; 
    background-color: rgba(0, 0, 0, 0.8);
}

/* DING: Âú® .nai-regenerate-btn.loading, ... ËßÑÂàô (Á∫¶ 10283 Ë°å) ÂêéÊ∑ªÂä† */
.user-upload-imgbb-btn.loading {
    pointer-events: none;
    opacity: 1;
}
.user-upload-imgbb-btn.loading svg {
    animation: spin 1s linear infinite;
}
#nai-gallery-tabs {
    display: flex;
    justify-content: center;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(128, 128, 128, 0.15);
    border-radius: 8px;
    padding: 2px;
}

.nai-gallery-tab {
    padding: 5px 25px;
    border-radius: 7px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

.nai-gallery-tab.active {
    background-color: var(--secondary-bg);
    color: var(--text-primary);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

#phone-screen.dark-mode .nai-gallery-tabs {
    background-color: rgba(80, 80, 80, 0.5);
}
#phone-screen.dark-mode .nai-gallery-tab.active {
    background-color: #3e3e42;
}

/* NAIÁîªÂªä - È°µÈù¢ÂíåÁΩëÊ†ºÂÆπÂô® */
#nai-gallery-grid-container {
    flex-grow: 1;
    position: relative;
    overflow: hidden; /* ÈöêËóèÊú™ÊøÄÊ¥ªÁöÑÈ°µÈù¢ */
}

.nai-gallery-page {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow-y: auto;
    padding: 15px;
    box-sizing: border-box;
    
    display: grid; /* ‰∏§‰∏™È°µÈù¢ÈÉΩ‰ΩøÁî® grid Â∏ÉÂ±Ä */
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 15px;
    align-content: flex-start; /* Á°Æ‰øùÂÜÖÂÆπ‰ªéÈ°∂ÈÉ®ÂºÄÂßãÊéíÂàó */
    
    /* ÈªòËÆ§ÈöêËóè */
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s;
}

.nai-gallery-page.active {
    opacity: 1;
    visibility: visible;
    z-index: 1;
}

/* ÁßªÈô§ÊóßÁöÑ #nai-gallery-grid Â∏ÉÂ±ÄÔºåÂõ†‰∏∫ÂÆÉÁé∞Âú®Ë¢´ .nai-gallery-page Êõø‰ª£‰∫Ü */
#nai-gallery-grid {
    padding: 0;
    display: contents; /* ËÆ©ÊóßIDÂ§±ÊïàÔºåÂ∏ÉÂ±ÄÁî±Áà∂Á∫ß .nai-gallery-page ÊéßÂà∂ */
}
.nai-gallery-page.management-mode .nai-image-container {
    position: relative; /* ÂÖ≥ÈîÆÔºö‰∏∫‰º™ÂÖÉÁ¥†Êèê‰æõÂÆö‰ΩçÈîöÁÇπ */
}

/* ÈÄâ‰∏≠È°πÁöÑËìùËâ≤ÂçäÈÄèÊòéÈÅÆÁΩ© */
.nai-gallery-page.management-mode .nai-gallery-item.selected .nai-image-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 122, 255, 0.4); /* ÂçäÈÄèÊòéËìùËâ≤ */
    border: 3px solid #007aff; /* ËìùËâ≤ÂÆûÁ∫øËæπÊ°Ü */
    box-sizing: border-box; 
    border-radius: 8px; /* ÂåπÈÖç .nai-image-container ÁöÑÂúÜËßí */
    z-index: 1;
}

/* ÈÄâ‰∏≠È°πÂè≥‰∏äËßíÁöÑ‚Äú‚úî‚ÄùÂØπÂãæ */
.nai-gallery-page.management-mode .nai-gallery-item.selected .nai-image-container::before {
    content: '‚úî'; /* ‰ΩøÁî® Unicode ÂØπÂãæ */
    position: absolute;
    top: 6px;
    right: 6px;
    width: 22px;
    height: 22px;
    background-color: #007aff; /* ËìùËâ≤ËÉåÊôØ */
    color: white; /* ÁôΩËâ≤ÂØπÂãæ */
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: bold;
    z-index: 2; /* Á°Æ‰øùÂú®ÈÅÆÁΩ©‰πã‰∏ä */
    border: 2px solid white; /* ÁôΩËâ≤ÊèèËæπÔºåÊõ¥Ê∏ÖÊô∞ */
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}
#playlist-action-bar {
    display: none; 
    flex-shrink: 0;
    padding: 10px 15px;
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    background-color: rgba(247, 247, 247, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid var(--border-color);
    justify-content: space-between; 
    align-items: center;
}
#playlist-action-bar .select-all-label {
    font-size: 16px;
    color: var(--text-primary);
    cursor: pointer;
}
#playlist-action-bar .action-bar-btn {
    padding: 10px 20px;
    border-radius: 20px;
    border: none;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    background-color: #007bff;
    color: white;
}

/* Êí≠ÊîæÂàóË°®ÈÄâÊã©Ê®°ÂºèÊ†∑Âºè */
#music-playlist-panel.management-mode .playlist-item-checkbox {
    display: block;
    margin-right: 10px;
    flex-shrink: 0;
    width: 18px;
    height: 18px;
}
#music-playlist-panel.management-mode .playlist-item-actions {
    display: none; /* ÁÆ°ÁêÜÊ®°Âºè‰∏ãÈöêËóèÊ≠åÊõ≤ÁöÑÂçïÁã¨Êìç‰ΩúÊåâÈíÆ */
}
#music-playlist-panel.management-mode .playlist-item.selected {
    background-color: rgba(0, 123, 255, 0.2);
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #playlist-action-bar {
    background-color: rgba(28, 28, 30, 0.9);
    border-top-color: #38383a;
}
#phone-screen.dark-mode #playlist-action-bar .select-all-label {
    color: #f0f0f0;
}
#phone-screen.dark-mode #music-playlist-panel.management-mode .playlist-item.selected {
    background-color: rgba(0, 123, 255, 0.3);
}
.playlist-header > span {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-weight: 600;
}

/* 2. Á°Æ‰øùÂ∑¶Âè≥‰∏§‰æßÁöÑÊåâÈíÆÂÆπÂô®‰∏ç‰ºöÈÅÆÊå°Ê†áÈ¢ò */
.playlist-header > div {
    z-index: 1; /* ‰øùÊåÅÊåâÈíÆÂú®Ê†áÈ¢òÁöÑ‚ÄúÁ©∫Èó¥‚Äù‰πã‰∏ä */
}

/* 3. ÂÆö‰πâÊàë‰ª¨Êñ∞Ê∑ªÂä†ÁöÑÂ∑¶‰æßÊåâÈíÆÂÆπÂô® */
.playlist-header .header-left-actions {
    display: flex;
    align-items: center;
    gap: 10px; /* ‚ÄúËøîÂõû‚ÄùÂíå‚ÄúÁÆ°ÁêÜ‚Äù‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    z-index: 1;
}

/* 4. ËÆ©‚ÄúÁÆ°ÁêÜ‚Äù/‚ÄúÂÆåÊàê‚ÄùÊåâÈíÆÁúãËµ∑Êù•Êõ¥ÂÉè‰∏Ä‰∏™ËæÖÂä©Êìç‰ΩúÔºåËÄå‰∏çÊòØÂØºËà™ */
.playlist-header #manage-playlist-btn {
    font-weight: 400; /* Ê≠£Â∏∏Â≠óÈáç */
    font-size: 15px;   /* Á®çÂ∞è‰∏ÄÁÇπ */
    color: var(--accent-color); /* ‰øùÊåÅÈ´ò‰∫ÆËâ≤ */
}

/* 5. ÔºàÂèØÈÄâÔºâ‰øÆÂ§çÊöóÈªëÊ®°Âºè‰∏ãÁöÑÈ¢úËâ≤ */
#phone-screen.dark-mode .playlist-header #manage-playlist-btn {
    color: #f0f0f0;
}

#phone-screen.dark-mode .playlist-header .panel-btn {
    color: #f0f0f0;
}
#sticker-action-bar button {
    width: auto; /* ‰øÆÊîπÔºö‰∏çÂÜçÊòØ100%ÂÆΩÂ∫¶ */
    padding: 10px 20px; /* ‰øÆÊîπÔºö‰ΩøÁî®ÂÜÖËæπË∑ùÊù•Ëá™Âä®Ë∞ÉÊï¥ÂÆΩÂ∫¶ */
    border-radius: 20px; /* ‰øÆÊîπÔºöÊîπ‰∏∫ÂúÜËßíÊåâÈíÆÔºåÊõ¥ÁæéËßÇ */
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    background-color: #ff3b30;
    color: white;
}


#sticker-action-bar #export-selected-stickers-btn {
    background-color: #007bff; /* ÂØºÂá∫ÊåâÈíÆËÆæ‰∏∫ËìùËâ≤ */
}
#sticker-action-bar #delete-selected-stickers-btn {
    background-color: #ff3b30; /* Âà†Èô§ÊåâÈíÆ‰øùÊåÅÁ∫¢Ëâ≤ */
}
/* Bilibili ÂàóË°®Ê†∑Âºè */
#char-bilibili-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #char-bilibili-screen {
    background-color: #000;
}

.bilibili-item {
    display: flex;
    gap: 10px;
    padding: 10px;
    background-color: var(--secondary-bg);
    border-radius: 8px;
    margin-bottom: 10px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: transform 0.1s;
}
.bilibili-item:active {
    transform: scale(0.98);
}

.bili-cover {
    width: 120px;
    height: 75px;
    background-size: cover;
    background-position: center;
    border-radius: 6px;
    flex-shrink: 0;
    position: relative;
    background-color: #ddd;
}
.bili-duration {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background-color: rgba(0,0,0,0.6);
    color: white;
    font-size: 10px;
    padding: 1px 4px;
    border-radius: 4px;
}

.bili-info {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.bili-title {
    font-size: 14px;
    font-weight: 500;
    line-height: 1.4;
    color: var(--text-primary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.bili-author {
    font-size: 12px;
    color: var(--text-secondary);
}

/* ÊêúÁ¥¢Ê°ÜÈÄÇÈÖç */
#char-bilibili-search-input:focus {
    border-color: #FB7299;
    outline: none;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #char-bilibili-player-screen .list-container {
    background-color: #1c1c1e;
}
#lock-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 3000; /* Á°Æ‰øùÂú®ÊúÄ‰∏äÂ±Ç */
    background-color: #000;
    background-size: cover;
    background-position: center;
    color: white;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.3s ease;
    visibility: hidden;
    opacity: 0;
    transform: translateY(-100%); /* ÈªòËÆ§ËóèÂú®‰∏äÈù¢ÊàñËÄÖÈöêËóè */
}

#lock-screen.active {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
}

#lock-screen.unlocking {
    transform: translateY(-100%);
    opacity: 0;
}

#lock-screen-content {
    width: 100%;
    height: 100%;
    backdrop-filter: blur(0px);
    transition: backdrop-filter 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 60px;
    box-sizing: border-box;
    background: rgba(0,0,0,0.2); /* ËΩªÂæÆÈÅÆÁΩ©ËÆ©ÊñáÂ≠óÊõ¥Ê∏ÖÊô∞ */
}

#lock-screen.input-mode #lock-screen-content {
    backdrop-filter: blur(20px);
    background: rgba(0,0,0,0.4);
}

.lock-icon {
    font-size: 20px;
    margin-bottom: 10px;
    opacity: 0;
    transition: opacity 0.3s;
}
#lock-screen.input-mode .lock-icon { opacity: 0; } 

.lock-time-container {
    text-align: center;
    transition: transform 0.3s, opacity 0.3s;
}
#lock-screen.input-mode .lock-time-container {
    transform: scale(0.8) translateY(-20px);
    opacity: 0; /* ËæìÂÖ•ÂØÜÁ†ÅÊó∂ÈöêËóèÊó∂Èó¥ */
    pointer-events: none;
}

#lock-date {
    font-size: 18px;
    font-weight: 500;
    margin-bottom: 5px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

#lock-time {
    font-size: 80px;
    font-weight: 600;
    line-height: 1;
    letter-spacing: -2px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    text-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

/* ÂØÜÁ†ÅËæìÂÖ•Âå∫Âüü */
#lock-password-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-top: 20px;
    animation: fadeIn 0.3s ease;
}

.lock-instruction {
    font-size: 16px;
    margin-bottom: 20px;
    font-weight: 500;
}

.lock-dots {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
}

.dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 1px solid white;
    box-sizing: border-box;
    transition: background-color 0.2s;
}

.dot.filled {
    background-color: white;
}

.lock-keypad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    column-gap: 25px;
    row-gap: 15px;
    margin-bottom: 20px;
}

.key {
    width: 75px;
    height: 75px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    font-weight: 400;
    line-height: 1;
    cursor: pointer;
    transition: background-color 0.1s;
    user-select: none;
}

.key:active {
    background-color: rgba(255, 255, 255, 0.4);
}

.key span {
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 2px;
    margin-top: 2px;
    opacity: 0.8;
}

.key.empty {
    background: transparent;
    cursor: default;
}
.key.delete {
    background: transparent;
    font-size: 24px;
}
.lock-cancel-btn {
    margin-top: 20px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
}

/* Â∫ïÈÉ®ÊªëÂä®Êù° */
#lock-swipe-area {
    position: absolute;
    bottom: 25px; /* Ë∞ÉÊï¥Ëøô‰∏™ÂÄºÊù•ÊéßÂà∂Á¶ªÂ∫ïËæπÁöÑË∑ùÁ¶ª */
    left: 0;
    width: 100%;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 20;
    cursor: grab;
    
}
@keyframes swipe-hint {
    0%, 100% { transform: translateY(0); opacity: 0.8; }
    50% { transform: translateY(-10px); opacity: 1; }
}
/* Á°Æ‰øùÊ®™Êù°Ê†∑ÂºèÊ≠£Á°Æ */
.swipe-bar {
    width: 130px;
    height: 5px;
    background-color: white;
    border-radius: 100px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.3);
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-10px); }
    40%, 80% { transform: translateX(10px); }
}
.shake-animation {
    animation: shake 0.4s ease;
}/* --- ËÅäÂ§©ËÆæÁΩÆÈ°µ (Chat Settings) QQÈ£éÊ†ºÈáçÊûÑ --- */

/* ËÉåÊôØËâ≤ */
#chat-settings-screen {
    background-color: #f2f2f7 !important; /* ÊµÖÁÅ∞Â∫ïËâ≤ */
}
#phone-screen.dark-mode #chat-settings-screen {
    background-color: #000 !important;
}

/* ÂÆπÂô® */
.settings-container {
    padding: 16px;
    padding-top: calc(80px + env(safe-area-inset-top));
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
    overflow-y: auto;
    height: 100%;
    box-sizing: border-box;
}

/* ÂàÜÁªÑÂç°Áâá */
.settings-section {
    background-color: #ffffff;
    border-radius: 12px;
    margin-bottom: 16px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.02);
    
    /* „ÄêÊ†∏ÂøÉ‰øÆÂ§ç„ÄëÔºöÁßªÈô§ overflow: hiddenÔºåÂÖÅËÆ∏‰∏ãÊãâÊ°ÜÊ∫¢Âá∫ */
    /* overflow: hidden;  <-- Âà†Èô§ËøôË°å */
    position: relative; /* Á°Æ‰øùÂÜÖÈÉ®ÂÆö‰ΩçÊ≠£Â∏∏ */
}
#phone-screen.dark-mode .settings-section {
    background-color: #1c1c1e;
}

/* ÊâãÂä®Â§ÑÁêÜÂúÜËßíÔºåÊõø‰ª£ overflow: hidden */
.settings-section > .settings-item:first-child,
.settings-section > .settings-item-block:first-child {
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
}
.settings-section > .settings-item:last-child,
.settings-section > .settings-item-block:last-child {
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
    border-bottom: none; /* ÂéªÈô§ÊúÄÂêé‰∏ÄÊù°Á∫ø */
}

/* ÂçïË°åËÆæÁΩÆÈ°π */
.settings-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    background-color: #fff;
    border-bottom: 0.5px solid #ebedf0;
    min-height: 24px;
    transition: background-color 0.2s;
    position: relative; /* Á°Æ‰øùÁÇπÂáªÂèçÈ¶àÊ≠£Â∏∏ */
}
#phone-screen.dark-mode .settings-item {
    background-color: #1c1c1e;
    border-bottom-color: #2c2c2e;
}

/* ÂèØÁÇπÂáªÈ°πÂèçÈ¶à */
.settings-item.clickable:active {
    background-color: #f5f5f5;
}
#phone-screen.dark-mode .settings-item.clickable:active {
    background-color: #2c2c2e;
}

/* ÂùóÁ∫ßËÆæÁΩÆÈ°π (Áî®‰∫éÂ§öË°åÂÜÖÂÆπ) */
.settings-item-block {
    padding: 14px 16px;
    background-color: #fff;
    border-bottom: 0.5px solid #ebedf0;
    display: flex;
    flex-direction: column;
    gap: 8px;
    position: relative;
}
#phone-screen.dark-mode .settings-item-block {
    background-color: #1c1c1e;
    border-bottom-color: #2c2c2e;
}

/* Ê†áÁ≠æÊñáÊú¨ */
.settings-item label, .settings-item-block label {
    font-size: 16px;
    color: #000;
    font-weight: 400;
    margin: 0;
    flex-shrink: 0;
}
#phone-screen.dark-mode .settings-item label,
#phone-screen.dark-mode .settings-item-block label {
    color: #fff;
}

/* ÊèèËø∞ÊñáÊú¨ (Â∞èÂ≠ó) */
.settings-desc {
    font-size: 12px;
    color: #8a8a8a;
    margin-top: 2px;
}

/* Âè≥‰æßÂå∫Âüü (ËæìÂÖ•Ê°Ü„ÄÅÊåâÈíÆÁ≠â) */
.settings-right {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-grow: 1;
    justify-content: flex-end;
    min-width: 0; /* Èò≤Ê≠¢Ê∫¢Âá∫ */
}

/* ËæìÂÖ•Ê°ÜÊ†∑Âºè (Êó†ËæπÊ°ÜÔºåÂè≥ÂØπÈΩê) */
.settings-item input[type="text"],
.settings-item input[type="number"] {
    text-align: right;
    border: none;
    background: transparent;
    font-size: 15px;
    color: #666;
    width: 100%;
    padding: 0;
    outline: none;
}
#phone-screen.dark-mode .settings-item input {
    color: #aaa;
}
.settings-item input::placeholder {
    color: #ccc;
}

/* ÊñáÊú¨ÂüüÊ†∑Âºè */
.settings-textarea {
    width: 100%;
    border: 1px solid #f0f0f0;
    background-color: #f9f9f9;
    border-radius: 8px;
    padding: 10px;
    font-size: 14px;
    resize: vertical;
    box-sizing: border-box;
    color: #333;
}
#phone-screen.dark-mode .settings-textarea {
    background-color: #2c2c2e;
    border-color: #38383a;
    color: #eee;
}

/* Â§¥ÂÉèÈ¢ÑËßà */
.settings-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 1px solid #eee;
}

/* Á∫ØÊñáÊú¨ÊåâÈíÆ (ËìùËâ≤Â∞èÂ≠ó) */
.settings-text-btn {
    background: none;
    border: none;
    color: #007bff;
    font-size: 14px;
    padding: 4px 8px;
    cursor: pointer;
}
.settings-text-btn:active {
    opacity: 0.7;
}

/* ÂùóÁ∫ßÊåâÈíÆ (ÁÅ∞Ëâ≤ËÉåÊôØ) */
.settings-full-btn {
    width: 100%;
    padding: 10px;
    background-color: #f5f5f7;
    color: #333;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
}
#phone-screen.dark-mode .settings-full-btn {
    background-color: #2c2c2e;
    color: #fff;
}

/* ‰∏ãÊãâÊ°Ü */
.settings-select {
    padding: 6px 20px 6px 10px;
    border-radius: 6px;
    border: none;
    background-color: #f2f2f7;
    font-size: 14px;
    color: #333;
    appearance: none;
    -webkit-appearance: none;
    /* ËøôÈáåÂèØ‰ª•Âä†‰∏™ÁÆ≠Â§¥ÂõæÊ†ábase64 */
}
#phone-screen.dark-mode .settings-select {
    background-color: #3a3a3c;
    color: #fff;
}

/* Êï∞Â≠óËæìÂÖ•Ê°Ü (Â∞è) */
.settings-num-input {
    width: 60px !important;
    text-align: center !important;
    background-color: #f2f2f7 !important;
    border-radius: 6px;
    padding: 4px !important;
}
#phone-screen.dark-mode .settings-num-input {
    background-color: #3a3a3c !important;
    color: #fff !important;
}

/* Â§¥ÈÉ®Âè≥‰æßÊåâÈíÆ */
.header .save-btn {
    font-size: 16px;
    background-color: #4cd964; /* ÁªøËâ≤ÂÆåÊàêÊåâÈíÆ */
    color: white !important;
    padding: 5px 12px;
    border-radius: 6px;
    font-weight: 500;
}

/* Â§¥ÂÉèÊìç‰ΩúÂå∫ */
.avatar-action-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* ËÉåÊôØÈ¢ÑËßàÂõæ */
.settings-bg-preview {
    width: 30px;
    height: 50px;
    object-fit: cover;
    border-radius: 4px;
    border: 1px solid #eee;
    display: none; /* JS ÊéßÂà∂ÊòæÁ§∫ */
}

/* ‰øÆÂ§çÂ§öÈÄâÊ°ÜÂú®ËÆæÁΩÆÈ°µÁöÑÊ†∑Âºè */
.settings-item-block .custom-multiselect .select-box {
    background-color: #f5f5f7;
    border: none;
}
#phone-screen.dark-mode .settings-item-block .custom-multiselect .select-box {
    background-color: #2c2c2e;
}

/* „ÄêÊ†∏ÂøÉ‰øÆÂ§ç„ÄëÔºöÂ§öÈÄâ‰∏ãÊãâÊ°ÜÂ±ÇÁ∫ßÈóÆÈ¢ò */
.checkboxes-container {
    z-index: 1000 !important; /* Á°Æ‰øùÂú®ÊúÄ‰∏äÂ±Ç */
    background-color: #ffffff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    border-radius: 8px;
    max-height: 200px; /* ÈôêÂà∂È´òÂ∫¶ */
    overflow-y: auto;
}
#phone-screen.dark-mode .checkboxes-container {
    background-color: #2c2c2e;
    border: 1px solid #38383a;
}

/* Ê®™ÂêëÊªöÂä®ÂàóË°® (Áæ§ÊàêÂëò) */
.horizontal-scroll-list {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding-bottom: 5px;
}
.horizontal-scroll-list .member-editor {
    flex-shrink: 0;
}
/* Ê∞îÊ≥°‰∏ªÈ¢òÈÄâÊã©Âô®ÁæéÂåñ */
.theme-selector label {
    display: inline-flex;
    align-items: center;
    font-size: 14px;
    color: #333;
    cursor: pointer;
    padding: 4px 8px;
    background-color: #f5f5f7;
    border-radius: 6px;
    transition: background-color 0.2s;
}
#phone-screen.dark-mode .theme-selector label {
    background-color: #2c2c2e;
    color: #fff;
}
.theme-selector label:has(input:checked) {
    background-color: #e7f3ff; /* ÈÄâ‰∏≠ÊÄÅÈ´ò‰∫Æ */
    color: #007bff;
    font-weight: 500;
}
#phone-screen.dark-mode .theme-selector label:has(input:checked) {
    background-color: #0a84ff33;
    color: #0a84ff;
}
.theme-selector input[type="radio"] {
    margin-right: 6px;
    accent-color: #007bff;
}
/* --- Ê†∏ÂøÉ‰øÆÂ§çÔºöÂº∫Âà∂Á∫†Ê≠£‚ÄúÊ≥®ÂÖ•ÂøÉÂ£∞‚ÄùÁöÑÂ∏ÉÂ±Ä --- */
#inject-thought-group {
    display: flex !important;       /* Âº∫Âà∂Â∑¶Âè≥Ê®™ÂêëÊéíÂàóÔºåË¶ÜÁõñ JS ÁöÑ block */
    justify-content: space-between; /* Â∑¶Âè≥ÊíëÂºÄ */
    align-items: center;            /* ÂûÇÁõ¥Â±Ö‰∏≠ */
}

/* ÈíàÂØπËØ•ÈÄâÈ°π‰∏ãÁöÑÊñáÂ≠óÂå∫ÂüüÔºåÈò≤Ê≠¢Ë¢´ÂéãÁº© */
#inject-thought-group > div:first-child {
    flex: 1;            /* Âç†ÊçÆÂ∑¶‰æßÊâÄÊúâÁ©∫Èó¥ */
    padding-right: 10px; /* ÂíåÂºÄÂÖ≥‰øùÊåÅË∑ùÁ¶ª */
}
/* --- Â§¥ÂÉèËÆæÁΩÆÊ†è‰∏ìÁî®Ê†∑Âºè‰øÆÂ§ç --- */

/* ËÆ©Âè≥‰æßÂÆπÂô®Âç†Êª°Ââ©‰ΩôÁ©∫Èó¥ */
.settings-right.full-width {
    flex: 1;
    width: 100%;
    margin-left: 15px; /* ËÆ©Â§¥ÂÉèÂíåÂ∑¶ËæπÊ†áÁ≠æ‰øùÊåÅ‰∏ÄÁÇπË∑ùÁ¶ª */
}

/* Â§¥ÂÉèÊìç‰ΩúÂå∫ÂÆπÂô®Ôºö‰∏§Á´ØÂØπÈΩê */
.avatar-action-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between; /* ÂÖ≥ÈîÆÔºöÂ§¥ÂÉèÈù†Â∑¶ÔºåÊåâÈíÆÈù†Âè≥ */
    width: 100%;
}

/* ÊåâÈíÆÁªÑÂÆπÂô® */
.avatar-btn-group {
    display: flex;
    gap: 8px; /* ÊåâÈíÆ‰πãÈó¥ÁöÑÈó¥Ë∑ù */
}

/* Êñ∞ÁöÑÂÆû‰ΩìÂ∞èÊåâÈíÆÊ†∑Âºè (ÊúâÊ°ÜÊ°Ü‰∫ÜÔºÅ) */
.settings-mini-btn {
    background-color: #f2f2f7; /* ÊµÖÁÅ∞ËÉåÊôØ */
    border: 1px solid #e5e5ea; /* Ê∑°Ê∑°ÁöÑËæπÊ°Ü */
    color: #333;
    padding: 5px 12px;
    border-radius: 6px; /* ÂúÜËßí */
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    line-height: 1.2;
}

/* ÊåâÈíÆÊÇ¨ÂÅúÊïàÊûú */
.settings-mini-btn:active {
    background-color: #e5e5ea;
    transform: scale(0.95);
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .settings-mini-btn {
    background-color: #3a3a3c;
    border-color: #48484a;
    color: #fff;
}
#phone-screen.dark-mode .settings-mini-btn:active {
    background-color: #48484a;
}

/* ‰øÆÂ§çÂ§¥ÂÉèÂ§ßÂ∞èÔºåÁ°Æ‰øù‰∏ç‰ºöËøáÂ§ß */
.settings-avatar {
    width: 44px;
    height: 44px;
    border-radius: 6px; /* ÂæÆ‰ø°È£éÊ†ºÁöÑÂ∞èÂúÜËßíÔºåÊàñËÄÖ50%ÂèòÊàêÂúÜÂΩ¢ */
    object-fit: cover;
    border: 1px solid #eee;
    flex-shrink: 0;
}
#phone-screen.dark-mode .settings-avatar {
    border-color: #333;
}
/* --- 1. ‰øÆÂ§çÈ°∂ÈÉ®Á©∫ÁôΩËøáÂ§ßÁöÑÈóÆÈ¢ò --- */
.settings-container {
    /* ÂéüÊù•ÊòØ 80pxÔºåÊîπ‰∏∫ 10px Âç≥ÂèØÔºåÂõ†‰∏∫ header Â∑≤ÁªèÂç†ÊçÆ‰∫ÜÁ©∫Èó¥ */
    padding-top: 10px !important; 
    /* ‰øùÊåÅÂ∫ïÈÉ® padding */
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
}

/* --- 2. ‰ºòÂåñÂ§¥ÂÉèÂè≥‰æßÊåâÈíÆÁöÑÈó¥Ë∑ùÂíåÊ†∑Âºè --- */

/* ÊåâÈíÆÁªÑÂÆπÂô®ÔºöÁ®çÂæÆÁº©Â∞èÊåâÈíÆ‰πãÈó¥ÁöÑË∑ùÁ¶ª */
.avatar-btn-group {
    display: flex;
    gap: 6px; /* ‰ªé 8px ÂáèÂ∞èÂà∞ 6pxÔºåÊõ¥Á¥ßÂáë */
    align-items: center;
}

/* ÊåâÈíÆÊ†∑ÂºèÂæÆË∞ÉÔºöËÆ©ÊåâÈíÆÊõ¥Á≤æËá¥ */
.settings-mini-btn {
    /* Á®çÂæÆÂáèÂ∞èÂÜÖËæπË∑ùÔºåËÆ©ÊåâÈíÆ‰∏çÈÇ£‰πà‚ÄúËÉñ‚Äù */
    padding: 4px 10px !important; 
    
    /* Â≠ó‰ΩìÁ®çÂæÆË∞ÉÂ∞è‰∏ÄÁÇπÁÇπÔºåÊõ¥ÊòæÁ≤æËá¥ */
    font-size: 12px !important; 
    
    /* Â¢ûÂä†‰∏ÄÁÇπËæπÊ°ÜÈ¢úËâ≤Ê∑±Â∫¶ÔºåÊõ¥ÊúâË¥®ÊÑü */
    border: 1px solid #d1d1d6 !important;
    
    /* Á®çÂæÆÁº©Â∞èÂúÜËßí */
    border-radius: 4px !important;
    
    /* Á°Æ‰øùËÉåÊôØËâ≤ */
    background-color: #fff !important;
    
    /* Á°Æ‰øùÊñáÂ≠óÈ¢úËâ≤ */
    color: #333 !important;
    
    /* Èò≤Ê≠¢Êç¢Ë°å */
    white-space: nowrap;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .settings-mini-btn {
    background-color: #2c2c2e !important;
    border-color: #48484a !important;
    color: #fff !important;
}

/* Â§¥ÈÉ®Ê†∑ÂºèÂæÆË∞ÉÔºöÁ°Æ‰øù Header Âíå ÂÜÖÂÆπÁöÑËøûÊé•Â§ÑËá™ÁÑ∂ */
#chat-settings-screen .header {
    /* Á°Æ‰øùÂ§¥ÈÉ®ËÉåÊôØËâ≤‰∏é body ‰∏ÄËá¥Êàñ‰∏∫ÁôΩËâ≤ÔºåÂéªÈô§Â§ö‰ΩôÈò¥ÂΩ± */
    background-color: #f2f2f7 !important;
    border-bottom: none !important; /* ÂéªÊéâÂàÜÂâ≤Á∫øÔºåÁúãËµ∑Êù•Êõ¥ÂÉèÂéüÁîüËÆæÁΩÆÈ°µ */
    box-shadow: none !important;
    padding-bottom: 0 !important; /* ÂáèÂ∞èÂ§¥ÈÉ®‰∏ãÊñπÁöÑÁïôÁôΩ */
}
#phone-screen.dark-mode #chat-settings-screen .header {
    background-color: #000 !important;
}
.settings-mini-btn {
    /* Âº∫Âà∂ÂéªÊéâÊóß‰ª£Á†ÅÂèØËÉΩÊÆãÁïôÁöÑÂ§ñËæπË∑ùÔºåËß£ÂÜ≥Èó¥Ë∑ù‰∏ç‰∏ÄËá¥ÈóÆÈ¢ò */
    margin: 0 !important; 
    
    /* Êîπ‰∏∫ÊµÖÁÅ∞Ëâ≤ËÉåÊôØÔºåËÆ©ÊåâÈíÆÂú®ÁôΩËâ≤Âç°Áâá‰∏äÊõ¥ÊòæÁúºÔºåÊõ¥Êúâ‚ÄúÊ°Ü‚ÄùÁöÑÊÑüËßâ */
    background-color: #f5f5f7 !important; 
    
    /* Á®çÂæÆÂä†Ê∑±‰∏ÄÁÇπËæπÊ°Ü */
    border: 1px solid #e0e0e0 !important; 
    
    /* Á®çÂæÆÂ¢ûÂä†ÂÜÖËæπË∑ùÔºå‰∏çÈÇ£‰πàÊå§ */
    padding: 6px 12px !important;
}

/* 2. Áªü‰∏ÄË∞ÉÊï¥ÊåâÈíÆ‰πãÈó¥ÁöÑÈó¥Ë∑ù */
.avatar-btn-group {
    /* Â¢ûÂ§ßÈó¥Ë∑ùÔºå‰∏çÂÜç‚ÄúË¥¥ÁùÄ‚Äù */
    gap: 12px !important; 
}

/* ÊöóÈªëÊ®°Âºè‰∏ãÁöÑÈÄÇÈÖç */
#phone-screen.dark-mode .settings-mini-btn {
    background-color: #2c2c2e !important;
    border-color: #3a3a3c !important;
}
/* --- ÁªàÊûÅ‰øÆÂ§ç V2ÔºöÂÆåÁæéËß£ÂÜ≥ÊòæÈöêÂÜ≤Á™Å‰∏éÂ∏ÉÂ±ÄÈóÆÈ¢ò --- */

/* 1. Âü∫Á°ÄÂ∏ÉÂ±ÄÔºöÂéªÊéâ display ÁöÑ !important */
/* ËøôÊ†∑ÂΩì JS ËÆæÁΩÆ display: none Êó∂ÔºåÂÖÉÁ¥†Â∞±ËÉΩÊ≠£Â∏∏ÈöêËóè‰∫Ü */
.settings-item {
    display: flex; 
    align-items: center !important;
    justify-content: space-between !important;
    flex-direction: row !important; 
}

/* 2. ÂÖ≥ÈîÆÊã¶Êà™ÔºöÂΩì JS ÊääÂÆÉËÆæ‰∏∫ÊòæÁ§∫(block)Êó∂ÔºåÂº∫Âà∂ËΩ¨‰∏∫ flex */
/* Ëß£ÈáäÔºöJS ÈªòËÆ§‰ºöÁî® display: block Êù•ÊòæÁ§∫ÂÖÉÁ¥†ÔºåËøô‰ºöÂØºËá¥Êç¢Ë°å„ÄÇ
   Êàë‰ª¨Áî®Â±ûÊÄßÈÄâÊã©Âô®ÊçïËé∑ËøôÁßçÊÉÖÂÜµÔºåÂπ∂Âº∫Âà∂Êîπ‰∏∫ flex Â∏ÉÂ±Ä */
.settings-item[style*="display: block"],
.settings-item[style*="display:block"] {
    display: flex !important;
}

/* 3. ‰øÆÂ§ç‚ÄúÊåâÈíÆË¥¥Ëæπ‚ÄùÈóÆÈ¢ò (‰øùÊåÅ‰∏çÂèò) */
.settings-right.full-width {
    width: auto !important; 
    flex: 1; 
    margin-left: 15px;
    padding-right: 4px !important; 
}

/* 4. Á°Æ‰øùÂ§¥ÂÉèÊìç‰ΩúÂå∫Â∏ÉÂ±Ä (‰øùÊåÅ‰∏çÂèò) */
.avatar-action-wrapper {
    width: 100%;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: space-between;
}
/* --- ÁªàÊûÅÂúÜËßí‰øÆÂ§çÊñπÊ°à --- */

/* 1. ÂÖ®Â±ÄÂº∫Âà∂Âç°ÁâáÂúÜËßíË£ÅÂâ™ */
/* Ëøô‰ºöËÆ©ÊâÄÊúâÂç°ÁâáÔºàÂåÖÊã¨Êó∂Âå∫ËÆæÁΩÆÈÇ£‰∏ÄÁªÑÔºâÁöÑÂ§¥Â∞æËá™Âä®ÂèòÊàêÂúÜËßíÔºåÊó†ËÆ∫ÂÜÖÈÉ®ÊòØÂê¶ÊúâÈöêËóèÂÖÉÁ¥† */
.settings-section {
    overflow: hidden !important;
    border-radius: 12px !important;
}

/* 2. Áâπ‰æãË±ÅÂÖçÔºöÂè™ÊúâÂåÖÂê´‚ÄúËá™ÂÆö‰πâÂ§öÈÄâ‰∏ãÊãâÊ°Ü‚ÄùÁöÑÂç°ÁâáÊâçÂÖÅËÆ∏ÂÜÖÂÆπÊ∫¢Âá∫ */
/* ËøôÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢‚ÄúÂÖ≥ËÅî‰∏ñÁïå‰π¶‚ÄùÊàñ‚ÄúÊåÇËΩΩËÆ∞ÂøÜ‚ÄùÁöÑ‰∏ãÊãâËèúÂçïË¢´Âç°ÁâáËæπÁºòÂàáÊñ≠ */
/* Ê≥®ÊÑèÔºöÊó∂Âå∫ËÆæÁΩÆ‰ΩøÁî®ÁöÑÊòØÂéüÁîü‰∏ãÊãâÊ°ÜÔºå‰∏çÂèó overflow ÂΩ±ÂìçÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅË±ÅÂÖç */
.settings-section:has(.custom-multiselect) {
    overflow: visible !important;
}

/* 3. ÈíàÂØπ‰∏äËø∞‚ÄúË±ÅÂÖç‚ÄùÁöÑÂç°ÁâáÔºåÊâãÂä®‰øÆË°•È¶ñÂ∞æÂúÜËßí */
/* Âõ†‰∏∫ÂÖÅËÆ∏Ê∫¢Âá∫‰∫ÜÔºåÊâÄ‰ª•ÂøÖÈ°ªÊâãÂä®ÁªôÁ¨¨‰∏Ä‰∏™ÂíåÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†Âä†ÂúÜËßí */
.settings-section:has(.custom-multiselect) > div:first-child {
    border-top-left-radius: 12px !important;
    border-top-right-radius: 12px !important;
}

.settings-section:has(.custom-multiselect) > div:last-child {
    border-bottom-left-radius: 12px !important;
    border-bottom-right-radius: 12px !important;
    border-bottom: none !important;
}
/* --- Ê†∏ÂøÉ‰øÆÂ§çÔºöÁªôÂµåÂ•óÂú®ÈÄèÊòéÂÆπÂô®ÈáåÁöÑ‚ÄúÊ≥®ÂÖ•ÂøÉÂ£∞‚ÄùË°•ÂúÜËßí --- */

/* ÂΩìÂç°ÁâáÂÖÅËÆ∏Ê∫¢Âá∫Êó∂ÔºåÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™Â≠©Â≠êÊòØÂåÖË£πÂÆπÂô®Ôºå
   ÈÇ£‰πàÂåÖË£πÂÆπÂô®ÈáåÁöÑÁ¨¨‰∏Ä‰∏™ .settings-item ÂøÖÈ°ªÊúâÈ°∂ÈÉ®ÂúÜËßí */
.settings-section:has(.custom-multiselect) > div:first-child > .settings-item:first-child {
    border-top-left-radius: 12px !important;
    border-top-right-radius: 12px !important;
}

/* --- Ë°•ÂÖÖ‰øÆÂ§çÔºöÁæ§ËÅäÊ®°Âºè‰∏ãÁöÑÈ°∂ÈÉ®ÂúÜËßí --- */
/* Â¶ÇÊûúÁ¨¨‰∏Ä‰∏™Â≠©Â≠êÔºàÂçïËÅäËÆæÁΩÆÔºâÈöêËóè‰∫ÜÔºåÈÇ£‰πàÁ¨¨‰∫å‰∏™Â≠©Â≠êÔºàÁæ§ËÅäËÆæÁΩÆÔºâÂ∞±ÊòØËßÜËßâ‰∏äÁöÑÁ¨¨‰∏Ä‰∏™Ôºå
   ÂÆÉ‰πüÈúÄË¶ÅÂúÜËßí„ÄÇCSSÊó†Ê≥ïÁõ¥Êé•Ê£ÄÊµã display:noneÔºå
   ÊâÄ‰ª•Êàë‰ª¨Áõ¥Êé•Áªô‚ÄúÁæ§ËÅäÂêéÂè∞Ê¥ªÂä®‚Äù‰πüÂä†‰∏äÊù°‰ª∂ÊÄßÁöÑÂúÜËßí */
#group-background-activity-group {
    /* Âè™ÊúâÂΩìÂÆÉ‰∏äÈù¢ÈÇ£‰∏™ÂÖÑÂºüÈöêËóèÊó∂ÊâçÈúÄË¶ÅÂúÜËßíÔºå‰ΩÜÂú®Á∫ØCSSÈáåÂæàÈöæÂà§Êñ≠„ÄÇ
       ËøôÈáåÂÅö‰∏Ä‰∏™ÊùÉË°°ÔºöÂ¶ÇÊûúÂÆÉÊòØËØ•ÁªÑÁ¨¨‰∏Ä‰∏™ÂèØËßÅÂÖÉÁ¥†ÔºåËµã‰∫àÂÆÉÂúÜËßí */
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
}
/* --- ‰øÆÂ§çÁæ§ËÅäÊ®°Âºè‰∏ã‚ÄúÊàëÁöÑ‰∫∫ËÆæ‚ÄùÁõ¥ËßíÈóÆÈ¢ò --- */

/* ÂΩì AI‰∫∫ËÆæË¢´ JS ËÆæÁΩÆ‰∏∫ÈöêËóè(display: none)Êó∂Ôºå
   Á¥ßÈöèÂÖ∂ÂêéÁöÑ ÊàëÁöÑ‰∫∫ËÆæ ÂøÖÈ°ªÂèòÊàêÈ°∂ÈÉ®ÂúÜËßí */
#ai-persona-group[style*="none"] + #my-persona-group {
    border-top-left-radius: 12px !important;
    border-top-right-radius: 12px !important;
}

/* --- ‰øÆÂ§çÁæ§ÊàêÂëòÁÆ°ÁêÜÂú®ÁâπÊÆäÊÉÖÂÜµ‰∏ãÁöÑÂúÜËßí --- */
/* Â¶ÇÊûúÁæ§ËÅä‰∏≠ ÊàëÁöÑ‰∫∫ËÆæ ‰πüÊòØÈöêËóèÁöÑÔºàËôΩÁÑ∂‰∏ÄËà¨‰∏ç‰ºöÔºâÔºåÂÖúÂ∫ïÁªôÁæ§ÊàêÂëòÁÆ°ÁêÜÂä†ÂúÜËßí */
#my-persona-group[style*="none"] + #group-members-group {
    border-top-left-radius: 12px !important;
    border-top-right-radius: 12px !important;
}
/* Â§öÈÄâÊ®°Âºè‰∏ãÁöÑÂ§¥ÈÉ®ÂõæÊ†áÊ†∑ÂºèË∞ÉÊï¥ */
#chat-interface-screen .selection-controls .header-actions {
    gap: 8px; /* [‰øÆÊîπ] ÂáèÂ∞èÂõæÊ†á‰πãÈó¥ÁöÑÈó¥Ë∑ù (Âéü 15px) */
}

#chat-interface-screen .selection-controls .action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6px; /* [‰øÆÊîπ] Á®çÂæÆË∞ÉÊï¥ÁÇπÂáªÂå∫Âüü */
    cursor: pointer;
    transition: opacity 0.2s;
    /* [Êñ∞Â¢û] ÈôêÂà∂ÊåâÈíÆÊú¨Ë∫´ÁöÑÂ§ßÂ∞èÔºåÈò≤Ê≠¢ËøáÂ§ß */
    width: 32px; 
    height: 32px;
    border-radius: 50%; /* ‰øùÊåÅÂúÜÂΩ¢ */
}

#chat-interface-screen .selection-controls .action-btn:hover {
    opacity: 0.7;
    background-color: rgba(0,0,0,0.05); /* Èº†Ê†áÊÇ¨ÂÅúÊó∂ÁöÑËΩªÂæÆËÉåÊôØ */
}

#chat-interface-screen .selection-controls .action-btn svg {
    width: 18px;  /* [‰øÆÊîπ] ÂáèÂ∞èÂõæÊ†áÂÆΩÂ∫¶ (Âéü 24px) */
    height: 18px; /* [‰øÆÊîπ] ÂáèÂ∞èÂõæÊ†áÈ´òÂ∫¶ (Âéü 24px) */
    stroke-width: 2; /* Á°Æ‰øùÁ∫øÊù°Á≤óÁªÜÈÄÇ‰∏≠ */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç (‰øùÊåÅ‰∏çÂèòÔºåÂè™ÊòØ‰∏∫‰∫ÜÂÆåÊï¥ÊÄßÂàóÂá∫) */
#phone-screen.dark-mode #chat-interface-screen .selection-controls .action-btn:hover {
    background-color: rgba(255,255,255,0.1);
}
/* --- Êñ∞Â¢ûÔºö‰∏ìÈó®ÈíàÂØπÂ∑¶‰æßÂèñÊ∂àÊåâÈíÆÁöÑÊ†∑Âºè --- */
#chat-interface-screen .selection-controls #selection-cancel-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6px;
    cursor: pointer;
    
    /* ÈôêÂà∂Â§ßÂ∞è‰∏∫ 32pxÔºå‰∏éÂè≥‰æß‰øùÊåÅ‰∏ÄËá¥ */
    width: 32px;
    height: 32px;
    border-radius: 50%;
    transition: opacity 0.2s;
    
    /* Á°Æ‰øùÊ≤°ÊúâÈ¢ùÂ§ñÁöÑÊñáÂ≠óÂ§ßÂ∞èÂπ≤Êâ∞ */
    font-size: 0; 
}

#chat-interface-screen .selection-controls #selection-cancel-btn:hover {
    background-color: rgba(0,0,0,0.05);
}

/* Áº©Â∞èÂÜÖÈÉ®ÁöÑ SVG ÂõæÊ†á */
#chat-interface-screen .selection-controls #selection-cancel-btn svg {
    width: 18px;
    height: 18px;
    stroke-width: 2.5; /* Á®çÂæÆÂä†Á≤ó‰∏ÄÁÇπÔºåÂõ†‰∏∫ÂõæÊ†áÂèòÂ∞è‰∫Ü */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #chat-interface-screen .selection-controls #selection-cancel-btn:hover {
    background-color: rgba(255,255,255,0.1);
}
#contact-picker-screen .header #cancel-contact-picker-btn {
    font-size: 16px;       /* Â∞ÜÂ≠ó‰ΩìÊîπÂõûÊ≠£Â∏∏ÁöÑ 16px */
    width: auto;           /* ÂèñÊ∂àÂõæÊ†á‰∏ìÁî®ÁöÑÂõ∫ÂÆöÂÆΩÂ∫¶ÔºåËÆ©ÊñáÂ≠óËá™ÁÑ∂ÊíëÂºÄ */
    font-weight: normal;   /* ‰∏çÈúÄË¶ÅÂ§™Á≤ó */
    padding: 0 5px;        /* Â¢ûÂä†‰∏ÄÁÇπÁÇπÂáªÂå∫Âüü */
}/* --- iOS Settings UI Transformation --- */

/* --- iOS Settings UI Transformation --- */

/* ËÉåÊôØËâ≤ */
#api-settings-screen.ios-settings-screen {
    background-color: #f2f2f7 !important;
}
#phone-screen.dark-mode #api-settings-screen.ios-settings-screen {
    background-color: #000 !important;
}

/* Â§¥ÈÉ®Ë∞ÉÊï¥ */
#api-settings-screen .header {
    background-color: #f2f2f7 !important;
    border-bottom: none !important;
    box-shadow: none !important;
}
#phone-screen.dark-mode #api-settings-screen .header {
    background-color: #000 !important;
}

/* ÊªöÂä®ÂÆπÂô® */
.ios-scroll-container {
    padding: 20px 16px;
    overflow-y: auto;
    height: 100%;
    box-sizing: border-box;
}

/* ÂàÜÁªÑÊ†áÈ¢ò */
.settings-header {
    font-size: 13px;
    color: #6d6d72;
    margin: 24px 0 8px 16px;
    text-transform: uppercase;
}
#phone-screen.dark-mode .settings-header {
    color: #8d8d93;
}

/* ÊèèËø∞ÊñáÊú¨ */
.settings-desc {
    font-size: 13px;
    color: #6d6d72;
    margin: 8px 16px 0 16px;
    line-height: 1.4;
}

/* Âç°ÁâáÂàÜÁªÑ (Settings Section) */
.settings-section {
    background-color: #ffffff;
    border-radius: 10px;
    overflow: hidden; /* ÂÖ≥ÈîÆÔºöÂàáÂúÜËßí */
    margin-bottom: 20px;
}
#phone-screen.dark-mode .settings-section {
    background-color: #1c1c1e;
}

/* ÂàóË°®È°π (Settings Item) */
.settings-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 11px 16px; /* iOS Ê†áÂáÜÈ´òÂ∫¶ */
    background-color: #fff;
    border-bottom: 0.5px solid #c6c6c8;
    min-height: 44px;
    box-sizing: border-box;
}
#phone-screen.dark-mode .settings-item {
    background-color: #1c1c1e;
    border-bottom-color: #38383a;
}

/* ÂéªÊéâÊØèÁªÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑ‰∏ãËæπÊ°Ü */
.settings-section > .settings-item:last-child {
    border-bottom: none;
}
/* ÈíàÂØπÈöêËóèÁöÑËØ¶ÊÉÖÂùó (Â¶Ç ImgBB, NovelAI) */
#novelai-details, #imgbb-settings-details, #catbox-settings-details, #github-settings-details {
    background-color: #f9f9f9; /* Á®çÂæÆÊ∑±‰∏ÄÁÇπÂå∫ÂàÜÂ±ÇÁ∫ß */
}
#phone-screen.dark-mode #novelai-details, 
#phone-screen.dark-mode #imgbb-settings-details, 
#phone-screen.dark-mode #catbox-settings-details, 
#phone-screen.dark-mode #github-settings-details {
    background-color: #252527;
}

/* Ê†áÁ≠æÊñáÊú¨ */
.settings-item label {
    font-size: 17px;
    color: #000;
    flex-shrink: 0;
    margin: 0;
}
#phone-screen.dark-mode .settings-item label {
    color: #fff;
}

/* Âè≥‰æßÊéß‰ª∂Âå∫Âüü */
.settings-right {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    flex-grow: 1;
    margin-left: 16px;
    min-width: 0;
}

/* ËæìÂÖ•Ê°Ü & ÈÄâÊã©Ê°Ü (Êó†ËæπÊ°ÜÈ£éÊ†º) */
.settings-item input[type="text"],
.settings-item input[type="password"],
.settings-item input[type="number"],
.settings-select {
    width: 100%;
    border: none;
    background: transparent;
    text-align: right;
    font-size: 17px;
    color: #3c3c4399; /* iOS ÁÅ∞Ëâ≤Âç†‰ΩçÁ¨¶Ëâ≤ */
    padding: 0;
    outline: none;
}
/* ÊúâÂÄºÊó∂ÁöÑÈ¢úËâ≤ */
/* --- ‰øÆÂ§ç 1: Â∞ÜËæìÂÖ•Ê°ÜÂíåÈÄâÊã©Ê°ÜÁöÑÊñáÂ≠óÈ¢úËâ≤Êîπ‰∏∫ÈªëËâ≤ --- */
.settings-item input:not(:placeholder-shown),
.settings-select {
    color: #000000 !important; /* Êîπ‰∏∫ÈªëËâ≤ */
}

/* ÊöóÈªëÊ®°Âºè‰∏ãÊîπ‰∏∫ÁôΩËâ≤ */
#phone-screen.dark-mode .settings-item input:not(:placeholder-shown),
#phone-screen.dark-mode .settings-select {
    color: #ffffff !important;
}

/* Âç†‰ΩçÁ¨¶È¢úËâ≤ */
.settings-item input::placeholder {
    color: #c7c7cc;
}

/* ÊåâÈíÆÊ†∑Âºè */
.settings-text-btn {
    background: none;
    border: none;
    font-size: 17px;
    color: #007aff;
    cursor: pointer;
    padding: 4px 0;
}
.settings-text-btn.destructive {
    color: #ff3b30;
}

/* --- ‰øÆÂ§ç 2: ‰ºòÂåñÂÖ®ÂÆΩÊåâÈíÆÔºåÂéªÈô§Â•áÊÄ™ÁöÑÈªëÁ∫øÈóÆÈ¢ò --- */
.settings-full-btn {
    width: 100%;
    background: #fff; /* Á°Æ‰øùÊúâËÉåÊôØËâ≤ */
    border: none;
    border-top: 0.5px solid #c6c6c8; /* ÂàÜÂâ≤Á∫ø */
    padding: 14px;
    font-size: 17px;
    color: #007aff;
    cursor: pointer;
    font-weight: 400; /* iOS ÊåâÈíÆÂ≠ó‰ΩìÈÄöÂ∏∏‰∏çÈúÄË¶ÅÂä†Á≤ó */
    margin: 0; /* Ê∏ÖÈô§Â§ñËæπË∑ù */
    display: block; /* Á°Æ‰øùÊòØÂùóÁ∫ßÂÖÉÁ¥† */
}

#phone-screen.dark-mode .settings-full-btn {
    background: #1c1c1e;
    border-top-color: #38383a;
    color: #0a84ff;
}

/* Â¶ÇÊûúÊåâÈíÆÊòØÂàÜÁªÑÈáåÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂéªÊéâÈ°∂ÈÉ®ÂàÜÂâ≤Á∫ø */
.settings-section .settings-full-btn:first-child {
    border-top: none;
}
.settings-full-btn:active {
    background-color: #e5e5ea;
}
#phone-screen.dark-mode .settings-full-btn:active {
    background-color: #3a3a3c;
}

/* ÂèØÁÇπÂáªÈ°π (Clickable Rows) */
.settings-item.clickable {
    cursor: pointer;
    justify-content: center; /* Â±Ö‰∏≠ÊñáÂ≠ó */
}
.settings-item.clickable:active {
    background-color: #e5e5ea;
}
#phone-screen.dark-mode .settings-item.clickable:active {
    background-color: #3a3a3c;
}

/* ‰øÆÂ§ç Slider */
input[type=range] {
    height: 24px;
    margin: 0;
}

/* ‰øÆÂ§ç Toggle Switch (Â§çÁî®‰πãÂâçÁöÑÔºåÂè™ÈúÄÁ°Æ‰øù vertical-align) */
.toggle-switch {
    display: flex;
    align-items: center;
}

/* Â∞èÊåâÈíÆ (Mini Btn) */
.settings-mini-btn {
    background-color: #f2f2f7;
    color: #007aff;
    border: none;
    border-radius: 14px;
    padding: 6px 12px;
    font-size: 14px;
    cursor: pointer;
}
#phone-screen.dark-mode .settings-mini-btn {
    background-color: #3a3a3c;
    color: #0a84ff;
}

/* Êï∞Â≠óËæìÂÖ•Ê°ÜÁâπÊÆäÂ§ÑÁêÜ */
.settings-num-input {
    max-width: 80px;
    background-color: #f2f2f7 !important;
    border-radius: 6px !important;
    text-align: center !important;
    padding: 4px !important;
    color: #000 !important;
}
#phone-screen.dark-mode .settings-num-input {
    background-color: #3a3a3c !important;
    color: #fff !important;
}

/* Block Item (Áî®‰∫éÂõæÁâáÂ§ßÂ∞èËÆ°ÁÆóÁ≠â) */
.settings-item-block {
    padding: 11px 16px;
    background-color: #fff;
}
#phone-screen.dark-mode .settings-item-block {
    background-color: #1c1c1e;
}
/* --- ‰øÆÂ§ç 1: ‰∏ãÊãâÊ°ÜÂØπÈΩêÈÄªËæë (Èó≠ÂêàÂè≥ÂØπÈΩêÔºåÂ±ïÂºÄÂ∑¶ÂØπÈΩê) --- */
.settings-select {
    text-align: right !important;       /* Èó≠ÂêàÁä∂ÊÄÅÔºöÊñáÂ≠óÈù†Âè≥ */
    text-align-last: right !important;  /* Âº∫Âà∂ÊúÄÂêé‰∏ÄË°åÈù†Âè≥ (ÈíàÂØπÈÉ®ÂàÜÊµèËßàÂô®) */
    direction: ltr !important;          /* ‰øùÊåÅ‰ªéÂ∑¶Âà∞Âè≥ÁöÑÊñáÂ≠óÊñπÂêë */
    padding-right: 24px;                /* ÁïôÂá∫Âè≥‰æßÁ©∫Èó¥ÁªôÁÆ≠Â§¥ÊàñÂêéÈù¢Âä†ÁöÑÊåâÈíÆ */
    background-position: right center;  /* Á°Æ‰øùÂéüÁîüÁÆ≠Â§¥Âú®Âè≥‰æß */
}

/* Â±ïÂºÄÂêéÁöÑÈÄâÈ°πÂº∫Âà∂Â∑¶ÂØπÈΩê */
.settings-select option {
    text-align: left !important;
    direction: ltr !important;
}

/* --- ‰øÆÂ§ç 2: ÊåâÈíÆÊîπ‰∏∫Ë°åÂÜÖÁÆÄÁ∫¶È£éÊ†º (ÂéªËÉåÊôØ) --- */
/* ÂÆö‰πâ‰∏Ä‰∏™Êñ∞ÁöÑË°åÂÜÖÊåâÈíÆÊ†∑Âºè */
.settings-inline-btn {
    background: none !important;     /* ÂéªÊéâÁÅ∞Ëâ≤ËÉåÊôØ */
    border: none !important;         /* ÂéªÊéâËæπÊ°Ü */
    font-size: 15px !important;      /* Â≠ó‰ΩìÂ§ßÂ∞è */
    font-weight: 500 !important;
    padding: 4px 8px !important;     /* ÂáèÂ∞èÂÜÖËæπË∑ù */
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 30px;                 /* ‰øùËØÅËß¶Êë∏Âå∫Âüü */
}

/* ‰øùÂ≠òÊåâÈíÆ (ËìùËâ≤) */
.settings-inline-btn.save-btn {
    color: #007aff !important;
}

/* Âà†Èô§ÊåâÈíÆ (Á∫¢Ëâ≤) */
.settings-inline-btn.delete-btn {
    color: #ff3b30 !important;
    border-left: 1px solid #c6c6c8 !important; /* Âä†‰∏™Â∑¶ËæπÊ°ÜÂàÜÈöîÁ∫ø */
    padding-left: 12px !important;
    margin-left: 4px;
}

/* ÊåâÈíÆÁÇπÂáªÊÄÅ */
.settings-inline-btn:active {
    opacity: 0.5;
}

/* Ë∞ÉÊï¥Âè≥‰æßÂÆπÂô®ÔºåËÆ©‰∏ãÊãâÊ°ÜÂíåÊåâÈíÆÊéíÊàê‰∏ÄË°å */
.settings-right {
    gap: 2px !important; /* ÂáèÂ∞èÂÖÉÁ¥†Èó¥Ë∑ù */
}
/* --- ‰øÆÂ§ç 1: Êà™ÂõæÂêåÊ¨æ‚ÄúÊõ¥Êç¢‚ÄùÊåâÈíÆÊ†∑Âºè --- */
.settings-mini-btn {
    background-color: #f2f2f7 !important; /* ÊµÖÁÅ∞ËÉåÊôØ */
    border: 1px solid #e5e5ea !important; /* ÊûÅÊ∑°ÁöÑËæπÊ°Ü */
    color: #007aff !important;            /* iOS ËìùËâ≤ÊñáÂ≠ó */
    border-radius: 6px !important;        /* Â∞èÂúÜËßí */
    padding: 5px 12px !important;         /* ÂÜÖËæπË∑ù */
    font-size: 13px !important;           /* Â≠ó‰ΩìÁ®çÂ∞è */
    font-weight: 500 !important;          /* ÈÄÇ‰∏≠Â≠óÈáç */
    cursor: pointer;
    white-space: nowrap;                  /* Èò≤Ê≠¢Êç¢Ë°å */
    margin-left: 8px;                     /* ‰∏éÂ∑¶ËæπÁöÑËæìÂÖ•Ê°Ü‰øùÊåÅË∑ùÁ¶ª */
    transition: opacity 0.2s;
}

/* ÁÇπÂáªÊó∂ÁöÑÂèçÈ¶à */
.settings-mini-btn:active {
    opacity: 0.6;
    background-color: #e5e5ea !important;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .settings-mini-btn {
    background-color: #2c2c2e !important;
    border-color: #3a3a3c !important;
    color: #0a84ff !important;
}
#phone-screen.dark-mode .settings-mini-btn:active {
    background-color: #3a3a3c !important;
}
/* --- ‰øÆÊ≠£ 1: Êï∞ÊçÆÁÆ°ÁêÜÊåâÈíÆÊîπ‰∏∫ iOS Ê†áÂáÜÂàóË°®È£éÊ†º (ÈªëÂ≠ó„ÄÅÂ∑¶ÂØπÈΩê) --- */
.settings-full-btn {
    width: 100%;
    background-color: #fff !important;
    border: none;
    border-top: 0.5px solid #c6c6c8 !important; /* ÁªÜÂàÜÂâ≤Á∫ø */
    padding: 14px 16px !important; /* Ê†áÂáÜÂÜÖËæπË∑ù */
    font-size: 17px !important;
    color: #000000 !important; /* Êîπ‰∏∫ÈªëËâ≤ */
    font-weight: 400 !important; /* Ê≠£Â∏∏Â≠óÈáç */
    text-align: left !important; /* Âº∫Âà∂Â∑¶ÂØπÈΩê */
    cursor: pointer;
    margin: 0 !important;
    display: block;
    border-radius: 0 !important;
}

/* Âç±Èô©ÊåâÈíÆ‰øùÊåÅÁ∫¢Ëâ≤Ôºå‰ΩÜ‰æùÁÑ∂Â∑¶ÂØπÈΩê */
.settings-full-btn[style*="color: #ff3b30"],
.settings-full-btn[style*="color:#ff3b30"] {
    color: #ff3b30 !important;
}

/* ÊåâÈíÆÁÇπÂáªÊÄÅ */
.settings-full-btn:active {
    background-color: #e5e5ea !important;
}

/* --- ‰øÆÊ≠£ 2: Ê∏ÖÈô§‚ÄúÂõæÁâáÂç†Áî®Â§ßÂ∞è‚ÄùÊóßÊ†∑ÂºèÁöÑÁÅ∞Ê°ÜÂíåÈªëÁ∫ø --- */
#total-image-size-display {
    background: transparent !important; /* ÂéªÊéâÁÅ∞Ëâ≤ËÉåÊôØ */
    border: none !important;            /* ÂéªÊéâËæπÊ°Ü */
    padding: 0 !important;
    margin: 0 !important;
    color: #8a8a8a;
    font-size: 17px;
}

/* --- ‰øÆÊ≠£ 3: ËÆ©È¢ÑËÆæÈÉ®ÂàÜÁöÑ‰∏ãÊãâÊ°ÜÂíåÊåâÈíÆÂ∏ÉÂ±ÄÊõ¥Á¥ßÂáë --- */
/* ÈíàÂØπÈ¢ÑËÆæÁÆ°ÁêÜÈÇ£‰∏ÄË°åÁöÑÁâπÊÆäÂæÆË∞É */
#api-settings-screen .settings-item .settings-right {
    gap: 8px !important; /* Â¢ûÂä†‰∏ÄÁÇπÈó¥Ë∑ù */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .settings-full-btn {
    background-color: #1c1c1e !important;
    border-top-color: #38383a !important;
    color: #ffffff !important;
}
#phone-screen.dark-mode .settings-full-btn:active {
    background-color: #2c2c2e !important;
}
/* --- ‰øÆÊ≠£ 1: ‰∏ãÊãâÊ°ÜÂÆåÂÖ®Â∑¶ÂØπÈΩêÔºåÂéªÈô§Âè≥‰æßÂÜÖËæπË∑ù --- */
.settings-select {
    text-align: left !important;
    padding-left: 0 !important; /* Á¥ßË¥¥Â∑¶‰æß */
    direction: ltr !important;
}

/* --- ‰øÆÊ≠£ 2: ÂàóË°®ÊåâÈíÆÈ¢úËâ≤Áªü‰∏Ä (Âº∫Âà∂ÈªëËâ≤) --- */
.settings-full-btn {
    color: #000000 !important; /* Áªü‰∏Ä‰∏∫ÈªëËâ≤ */
}

/* ÊöóÈªëÊ®°Âºè‰∏ãÁªü‰∏Ä‰∏∫ÁôΩËâ≤ */
#phone-screen.dark-mode .settings-full-btn {
    color: #ffffff !important;
}
/* --- ‰øÆÊ≠£ 1: ÊåâÈíÆÈ¢úËâ≤Áªü‰∏Ä‰∏∫ÈªëËâ≤ (ÂéªËìùÂéªÁ∫¢) --- */
/* Â∞èÊåâÈíÆ (‰øùÂ≠ò„ÄÅÂà†Èô§„ÄÅÂéãÁº©) */
.settings-mini-btn {
    color: #333333 !important; /* ÈªëËâ≤ÊñáÂ≠ó */
    background-color: #f2f2f7 !important;
    border: 1px solid #e5e5ea !important;
    margin-left: 8px;
}

/* Â§ßÂàóË°®ÊåâÈíÆ (ÂØºÂá∫„ÄÅÂØºÂÖ•„ÄÅÊ∏ÖÁêÜ) */
.settings-full-btn {
    color: #333333 !important; /* ÈªëËâ≤ÊñáÂ≠ó */
    text-align: left !important;
    justify-content: flex-start !important;
    padding-left: 16px !important;
}

/* ÊöóÈªëÊ®°Âºè‰∏ãÊîπ‰∏∫ÁôΩËâ≤ */
#phone-screen.dark-mode .settings-mini-btn,
#phone-screen.dark-mode .settings-full-btn {
    color: #ffffff !important;
}

/* --- ‰øÆÊ≠£ 2: Âº∫Âà∂Ê∏ÖÊ¥ó JS ÁîüÊàêÁöÑÂÜó‰ΩôÊñáÊú¨ --- */
/* ÈöêËóè JS ÁîüÊàêÁöÑ "Êú¨Âú∞ÂõæÁâá(Â§¥ÂÉè/Ë°®ÊÉÖ...):" Ëøô‰∏≤ÈïøÂ≠ó */
#total-image-size-display #image-size-label {
    display: none !important;
}

/* Âè™ÊòæÁ§∫Â§ßÂ∞èÊï∞ÂÄºÔºåÂπ∂Ë∞ÉÊï¥Ê†∑Âºè */
#total-image-size-display #image-size-value {
    font-size: 13px;
    color: #8a8a8a; /* Ê¨°Ë¶Å‰ø°ÊÅØÁÅ∞Ëâ≤ */
    margin-top: 2px;
    display: block;
    text-align: left;
}

/* ÁßªÈô§Â§ñÂ±ÇÂÆπÂô®ÁöÑÂπ≤Êâ∞Ê†∑Âºè */
#total-image-size-display {
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
}

/* --- ‰øÆÊ≠£ 3: ‰∏ãÊãâÊ°ÜÂØπÈΩêË∞ÉÊï¥ --- */
/* ËÆ©‰∏ãÊãâÊ°ÜÊñáÂ≠óÁ¥ßË¥¥Â∑¶‰æß */
.settings-select {
    text-align: left !important;
    padding-left: 0 !important;
}
/* --- ‰øÆÂ§ç 1: Êö¥ÂäõÊ∏ÖÈô§‰∏ãÊãâÊ°ÜÁöÑÊâÄÊúâÈó¥Èöô --- */
.settings-select {
    appearance: none !important;        /* Ê∏ÖÈô§Á≥ªÁªüÈªòËÆ§Â§ñËßÇ */
    -webkit-appearance: none !important;
    background: transparent !important; /* ÂéªÈô§ËÉåÊôØ */
    border: none !important;            /* ÂéªÈô§ËæπÊ°Ü */
    padding: 0 !important;              /* Ê∏ÖÈô§ÂÜÖËæπË∑ù */
    margin: 0 !important;               /* Ê∏ÖÈô§Â§ñËæπË∑ù */
    text-indent: 0 !important;          /* Ê∏ÖÈô§È¶ñË°åÁº©Ëøõ */
    text-align: left !important;        /* Âº∫Âà∂Â∑¶ÂØπÈΩê */
    font-size: 17px !important;
    line-height: normal !important;
    color: #000 !important;
    width: 100%;
}

/* ÊöóÈªëÊ®°ÂºèÊñáÂ≠óÈ¢úËâ≤ */
#phone-screen.dark-mode .settings-select {
    color: #fff !important;
}

/* --- ‰øÆÂ§ç 2: Êï∞ÊçÆÁÆ°ÁêÜË°åÂ∏ÉÂ±Ä (ÂÆûÁé∞ÔºöÊ†áÈ¢ò------Êï∞ÂÄº [ÊåâÈíÆ]) --- */
/* ËÆ©Âè≥‰æßÂÆπÂô®ÈáåÁöÑÂÜÖÂÆπÁ¥ßÂáëÊéíÂàó */
.data-row-right {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 10px; /* Êï∞ÂÄºÂíåÊåâÈíÆ‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    flex-grow: 1;
}

/* Á∫ØÂáÄÊòæÁ§∫Êï∞ÂÄºÔºåÂéªÊéâJSÁîüÊàêÁöÑÊ†áÁ≠æÊñáÂ≠ó */
#total-image-size-display {
    font-size: 15px !important;
    color: #8a8a8a !important; /* Ê¨°Ë¶Å‰ø°ÊÅØÁî®ÁÅ∞Ëâ≤ */
    background: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}
/* ÈöêËóèÊéâ JS Ëá™Âä®ÁîüÊàêÁöÑ "Êú¨Âú∞ÂõæÁâá(xxx):" ËøôÁßçÈïøÊñáÊú¨ÔºåÂè™ÁïôÊï∞Â≠ó */
#total-image-size-display #image-size-label {
    display: none !important;
}
#total-image-size-display #image-size-value {
    font-weight: 400 !important;
    color: #8a8a8a !important;
}
#api-preset-select.settings-select {
    text-align: left !important;       /* Âº∫Âà∂Â∑¶ÂØπÈΩê */
    text-align-last: left !important;  /* ÈíàÂØπÈÄâ‰∏≠ÂÄºÁöÑÂº∫Âà∂Â∑¶ÂØπÈΩê (ÂÖ≥ÈîÆ) */
    padding-left: 0 !important;        /* ÂéªÈô§Â∑¶‰æßÂÜÖËæπË∑ù */
    direction: ltr !important;         /* ‰ªéÂ∑¶Âà∞Âè≥ÊéíÂàó */
    width: 100% !important;            /* Âç†Êª°ÂÆπÂô® */
    display: block !important;
}
/* --- ‰øÆÂ§ç: ËøòÂéüÁÅ∞Ëâ≤ÁöÑËØ¥Êòé/ÊïôÁ®ãÊù° --- */
/* ËøôÊòØ‰∏Ä‰∏™ÂàóË°®È°πÂÆπÂô®ÔºåÁ°Æ‰øùÂÆÉÂú®ÁôΩËâ≤Âç°ÁâáÂÜÖÂç†‰Ωç */
.settings-tip-wrapper {
    padding: 10px 16px;
    background-color: #fff;
    border-bottom: 0.5px solid #c6c6c8;
}

/* ËøôÊòØÈáåÈù¢ÁöÑÁÅ∞Ëâ≤ÂúÜËßíÊ°Ü (ÂØπÂ∫î‰Ω†Êà™ÂõæÁöÑÊ†∑Â≠ê) */
.settings-tip-content {
    background-color: #f0f0f0; /* ÊµÖÁÅ∞ËÉåÊôØ */
    color: #666666;            /* Ê∑±ÁÅ∞ÊñáÂ≠ó */
    font-size: 13px;
    padding: 10px;
    border-radius: 8px;        /* ÂúÜËßí */
    line-height: 1.5;          /* Ë°åÈ´òÔºåÊòìËØª */
}
/* Âº∫Ë∞ÉÊñáÂ≠ó (Á∫¢Ëâ≤Ë≠¶Âëä) */
.settings-tip-content strong {
    color: #ff3b30;
    font-weight: 600;
}
/* ÈìæÊé•Ê†∑Âºè */
.settings-tip-content a {
    color: #007aff;
    text-decoration: none;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .settings-tip-wrapper {
    background-color: #1c1c1e;
    border-bottom-color: #38383a;
}
#phone-screen.dark-mode .settings-tip-content {
    background-color: #2c2c2e; /* Ê∑±Ëâ≤ËÉåÊôØ */
    color: #aeaeb2;
}
/* ============================================================
   „ÄêÁã¨Á´ã‰øÆÂ§ç„ÄëËÅäÂ§©ËØ¶ÊÉÖÈ°µ‰∏ãÊãâÊ°Ü (‰∏çÂΩ±Âìç API ËÆæÁΩÆÈ°µ)
   ============================================================ */

/* 1. Â∞ÜÈÄâÊã©Âô®ÈôêÂÆöÂú® #chat-settings-screen ÂÜÖ */
#chat-settings-screen .settings-select {
    /* ÊÅ¢Â§çÁÅ∞Ëâ≤ËÉåÊôØÊù° */
    background-color: #f2f2f7 !important;
    
    /* Âä†ÂõûËæπÊ°ÜÂíåÂúÜËßíÔºåËÆ©ÂÆÉÁúãËµ∑Êù•ÂÉè‰∏™ÊåâÈíÆ */
    border: 1px solid #e5e5ea !important;
    border-radius: 6px !important;
    
    /* Ë∞ÉÊï¥ÂÜÖËæπË∑ùÔºö‰∏ä‰∏ã 6px ‰øùËØÅÈ´òÂ∫¶‰∏éÊóÅËæπÁöÑ‚ÄúÊõ¥Êç¢‚ÄùÊåâÈíÆ‰∏ÄËá¥ */
    padding: 6px 25px 6px 12px !important; 
    
    /* ÊÅ¢Â§çÈªëËâ≤ÊñáÂ≠ó */
    color: #333 !important;
    
    /* ÈªòËÆ§ÔºöÂº∫Âà∂Â∑¶ÂØπÈΩê */
    text-align: left !important;
    text-align-last: left !important;
    
    /* Ê∑ªÂä†‰∏Ä‰∏™Â∞èÁÆ≠Â§¥ÂõæÊ†áÔºåËÆ©ÂÆÉÁúãËµ∑Êù•Êõ¥ÂÉè‰∏ãÊãâÊ°Ü */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%238a8a8a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e") !important;
    background-repeat: no-repeat !important;
    background-position: right 8px center !important;
    background-size: 12px !important;
    
    /* Á°Æ‰øùÈ´òÂ∫¶ÊíëÂºÄ */
    min-height: 28px !important;
    line-height: normal !important;
}

/* 2. „ÄêÁâπ‰æã„ÄëËØ≠Èü≥ËØ≠Ë®ÄÈÄâÊã©ÔºöÂº∫Âà∂Âè≥ÂØπÈΩê */
#chat-settings-screen #ai-voice-lang-select {
    text-align: right !important;
    text-align-last: right !important;
    direction: ltr !important;
    /* Âè≥‰æßÁïôÂá∫‰∏ÄÁÇπÁ©∫Èó¥ÁªôÁÆ≠Â§¥Ôºå‰ΩÜÊñáÂ≠óÈù†Âè≥ */
    padding-right: 30px !important; 
    padding-left: 0 !important;
}

/* 3. ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç (‰ªÖÈíàÂØπËÅäÂ§©ËÆæÁΩÆÈ°µ) */
#phone-screen.dark-mode #chat-settings-screen .settings-select {
    background-color: #3a3a3c !important;
    border-color: #48484a !important;
    color: #fff !important;
    
    /* ÊöóÈªëÊ®°Âºè‰∏ãÁÆ≠Â§¥ÂèòÁôΩ‰∏ÄÁÇπ */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e") !important;
}
#ai-avatar-group,
#group-avatar-group,
#my-avatar-group {
    /* 1. ÊîπÂèò‰∏ªËΩ¥ÊñπÂêë‰∏∫ÂûÇÁõ¥ÔºåËÆ©Ê†áÁ≠æÂíåÂÜÖÂÆπÊç¢Ë°å */
    flex-direction: column !important;
    
    /* 2. ËÆ©Â≠êÂÖÉÁ¥†Êãâ‰º∏Â°´Êª°ÂÆΩÂ∫¶ */
    align-items: stretch !important;
    
    /* 3. Â¢ûÂä†Ê†áÁ≠æÂíå‰∏ãÊñπÂÜÖÂÆπ‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    gap: 8px !important;
    
    /* 4. Á°Æ‰øùÈ´òÂ∫¶Ëá™ÈÄÇÂ∫î */
    height: auto !important;
    padding-bottom: 12px !important;
}

/* ‰øÆÊ≠£‰∏ãÊñπÂÜÖÂÆπÂå∫ÂüüÁöÑËæπË∑ù */
#ai-avatar-group .settings-right,
#group-avatar-group .settings-right,
#my-avatar-group .settings-right {
    /* Êç¢Ë°åÂêé‰∏çÂÜçÈúÄË¶ÅÂ∑¶ËæπË∑ù */
    margin-left: 0 !important; 
    
    /* Á°Æ‰øùÂç†Êª°Êï¥Ë°åÂÆΩÂ∫¶ */
    width: 100% !important;
}

/* Á°Æ‰øùÂ§¥ÂÉèÊìç‰ΩúÂå∫‰∏§Á´ØÂØπÈΩê (Â§¥ÂÉèÂú®Â∑¶ÔºåÊåâÈíÆÂú®Âè≥) */
#ai-avatar-group .avatar-action-wrapper,
#group-avatar-group .avatar-action-wrapper,
#my-avatar-group .avatar-action-wrapper {
    justify-content: space-between !important;
    width: 100% !important;
}
#toggle-reading-fullscreen-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    padding: 4px 8px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
}
#toggle-reading-fullscreen-btn:hover {
    background-color: rgba(0,0,0,0.1);
}

/* 2. ÂΩìÁ™óÂè£ÂÖ®Â±èÊó∂ÔºåÂàáÊç¢ÊåâÈíÆÂÜÖÁöÑÂõæÊ†á */
#reading-window.fullscreen #toggle-reading-fullscreen-btn .icon-maximize {
    display: none;
}
#reading-window.fullscreen #toggle-reading-fullscreen-btn .icon-minimize {
    display: block;
}

/* 3. Á™óÂè£ÂÖ®Â±èÊó∂ÁöÑÊ†∏ÂøÉÊ†∑Âºè */
#reading-window.fullscreen {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    top: 0 !important;
    left: 0 !important;
    border-radius: 0;
    box-shadow: none;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 4. ÈÅÆÁΩ©Â±ÇÂú®ÂÖ®Â±èÊó∂ÁöÑÊ†∑Âºè */
#reading-overlay.fullscreen-active {
    align-items: stretch;
    justify-content: stretch;
}
/* --- ‚Äú‰∏ÄËµ∑ËØª‰π¶‚ÄùÂÖ®Â±èÂäüËÉΩÊ†∑Âºè ‰ºòÂåñÁâà --- */

/* 1. ‰øÆÂ§çÂ§¥ÈÉ®Â∏ÉÂ±ÄÔºåÈò≤Ê≠¢Ê†áÈ¢òËøáÈïøÊääÊåâÈíÆÊå§‰∏ãÂéª */
.reading-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px; /* Ê†áÈ¢òÂíåÊåâÈíÆÁªÑ‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    flex-wrap: nowrap; /* Âº∫Âà∂‰∏çÊç¢Ë°å */
}

#reading-title {
    flex: 1; /* Âç†ÊçÆÂèØÁî®Á©∫Èó¥ */
    min-width: 0; /* ÂÖÅËÆ∏Ë¢´ÂéãÁº© */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* Ê†áÈ¢òËøáÈïøÊó∂ÊòæÁ§∫ÁúÅÁï•Âè∑ */
}

.reading-controls {
    flex-shrink: 0; /* Èò≤Ê≠¢ÊåâÈíÆÁªÑË¢´ÂéãÁº© */
    display: flex; /* Á°Æ‰øùÂÜÖÈÉ®ÊåâÈíÆÊ∞¥Âπ≥ÊéíÂàó */
    align-items: center;
}

/* 2. ÁæéÂåñÊñ∞ÁöÑÂÖ®Â±è/ÊúÄÂ∞èÂåñÊåâÈíÆ */
#toggle-reading-fullscreen-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    padding: 4px 8px; /* Ë∞ÉÊï¥ÁÇπÂáªÂå∫Âüü */
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
}
#toggle-reading-fullscreen-btn:hover {
    background-color: rgba(0,0,0,0.1);
}

/* 3. ÂΩìÁ™óÂè£ÂÖ®Â±èÊó∂ÔºåÂàáÊç¢ÊåâÈíÆÂÜÖÁöÑÂõæÊ†áÊòæÁ§∫ */
#reading-window.fullscreen #toggle-reading-fullscreen-btn .icon-maximize {
    display: none;
}
#reading-window.fullscreen #toggle-reading-fullscreen-btn .icon-minimize {
    display: block;
}

/* 4. Á™óÂè£ÂÖ®Â±èÊó∂ÁöÑÊ†∏ÂøÉÊ†∑Âºè (‰∏é‰∏äÊ¨°Áõ∏Âêå) */
#reading-window.fullscreen {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    top: 0 !important;
    left: 0 !important;
    border-radius: 0;
    box-shadow: none;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 5. ÈÅÆÁΩ©Â±ÇÂú®ÂÖ®Â±èÊó∂ÁöÑÊ†∑Âºè (‰∏é‰∏äÊ¨°Áõ∏Âêå) */
#reading-overlay.fullscreen-active {
    align-items: stretch;
    justify-content: stretch;
}/* =========================================== */
/* ‚ñº‚ñº‚ñº ÈòÖËØªÊ®°ÂºèÂÖ®Â±è/Â§¥ÈÉ®‰øÆÂ§çË°•‰∏Å ‚ñº‚ñº‚ñº */
/* =========================================== */

/* 1. ‰øÆÂ§çÂÖ®Â±èÁä∂ÊÄÅ‰∏ãÁöÑÂõæÊ†áÂàáÊç¢ÈÄªËæë */
/* ÈªòËÆ§Áä∂ÊÄÅÔºöÊòæÁ§∫ÊúÄÂ§ßÂåñÂõæÊ†áÔºåÈöêËóèËøòÂéüÂõæÊ†á */
#toggle-reading-fullscreen-btn .icon-maximize {
    display: block !important;
}
#toggle-reading-fullscreen-btn .icon-minimize {
    display: none !important;
}

/* ÂÖ®Â±èÁä∂ÊÄÅÔºöÈöêËóèÊúÄÂ§ßÂåñÂõæÊ†áÔºåÊòæÁ§∫ËøòÂéüÂõæÊ†á */
#reading-window.fullscreen #toggle-reading-fullscreen-btn .icon-maximize {
    display: none !important;
}
#reading-window.fullscreen #toggle-reading-fullscreen-btn .icon-minimize {
    display: block !important;
}

/* 2. ‰øÆÂ§çÂÖ®Â±èÊó∂ÁöÑÂ§¥ÈÉ®Â∏ÉÂ±Ä‰∏éÈó¥Ë∑ù (Ëß£ÂÜ≥ÈáçÂè†ÈóÆÈ¢ò) */
#reading-window.fullscreen .reading-header {
    /* „ÄêÊ†∏ÂøÉ‰øÆÂ§ç„ÄëÂ¢ûÂä†È°∂ÈÉ®ÂÜÖËæπË∑ùÔºö
       45px ÊòØÈÅøËÆ©Áä∂ÊÄÅÊ†èÁöÑÂü∫Á°ÄÈ´òÂ∫¶Ôºå
       env(safe-area-inset-top) ÊòØÈÄÇÈÖçÂàòÊµ∑Â±è/ÁÅµÂä®Â≤õ
    */
    padding-top: calc(45px + env(safe-area-inset-top)) !important;
    padding-bottom: 15px !important;
    padding-left: 20px !important;
    padding-right: 20px !important;

    /* Âº∫Âà∂È´òÂ∫¶Ëá™ÈÄÇÂ∫î */
    height: auto !important;
    min-height: 80px !important; /* ‰øùËØÅÊúâË∂≥Â§üÁöÑÈ´òÂ∫¶ */

    /* ‰øÆÂ§çËÉåÊôØËâ≤ÔºöÂÖ®Â±èÊó∂ÂøÖÈ°ªÊúâ‰∏çÈÄèÊòéËÉåÊôØÔºåÂê¶ÂàôÂÜÖÂÆπ‰ºöÈÄèÂá∫Êù• */
    background-color: #fff !important; 
    /* Âä†‰∏äÂ∫ïÈÉ®ËæπÊ°ÜÁ∫ø */
    border-bottom: 1px solid var(--border-color) !important;
    
    /* Á°Æ‰øùÂ§¥ÈÉ®Âú®ÊúÄ‰∏äÂ±Ç */
    z-index: 10 !important;
    
    /* Âº∫Âà∂‰∏îÁªùÂØπÁöÑÈ°∂ÈÉ®ÂÆö‰ΩçÔºåÈò≤Ê≠¢Ë¢´Áà∂Á∫ßflexÂΩ±Âìç */
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* 3. ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #reading-window.fullscreen .reading-header {
    background-color: #1c1c1e !important; /* ÊöóÈªëÊ®°ÂºèËÉåÊôØËâ≤ */
    border-bottom-color: #38383a !important;
}

/* 4. ‰øÆÂ§çÂÖ®Â±èÊó∂ÁöÑÂÜÖÂÆπÂå∫ÂüüÔºåÈò≤Ê≠¢Ë¢´Âä†È´òÁöÑÂ§¥ÈÉ®ÈÅÆÊå° */
#reading-window.fullscreen #reading-content {
    /* ÁªôÂÜÖÂÆπÈ°∂ÈÉ®Â¢ûÂä†Êõ¥Â§öÁöÑÂÜÖËæπË∑ùÔºåÂõ†‰∏∫Â§¥ÈÉ®ÂèòÈ´ò‰∫Ü */
    padding-top: calc(100px + env(safe-area-inset-top)) !important;
}
/* --- iOS È£éÊ†ºÈÄöÁî®ÂåñÈÄÇÈÖç (ÈÄÇÈÖçÂ§ñËßÇËÆæÁΩÆÈ°µ) --- */

/* ËÆ©‰∏§‰∏™È°µÈù¢ÈÉΩ‰ΩøÁî® iOS ËÉåÊôØËâ≤ */
#api-settings-screen.ios-settings-screen,
#wallpaper-screen {
    background-color: #f2f2f7 !important;
}
#phone-screen.dark-mode #api-settings-screen.ios-settings-screen,
#phone-screen.dark-mode #wallpaper-screen {
    background-color: #000 !important;
}

/* Â§¥ÈÉ®ÈÄÇÈÖç */
#wallpaper-screen .header {
    background-color: #f2f2f7 !important;
    border-bottom: none !important;
    box-shadow: none !important;
}
#phone-screen.dark-mode #wallpaper-screen .header {
    background-color: #000 !important;
}

/* Á°Æ‰øùÂ§ñËßÇËÆæÁΩÆÈ°µ‰ΩøÁî®ÊªöÂä®ÂÆπÂô®Ê†∑Âºè */
#wallpaper-screen .settings-container {
    padding: 10px 16px;
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
    box-sizing: border-box;
    overflow-y: auto;
}

/* Â£ÅÁ∫∏È¢ÑËßàÂõæÊ†∑Âºè‰ºòÂåñ (Â∞èÂõæÊ®°Âºè) */
.wallpaper-thumbnail {
    width: 40px;
    height: 70px; /* 9:16 ÊØî‰æã */
    border-radius: 6px;
    background-color: #eee;
    background-size: cover;
    background-position: center;
    border: 1px solid #d1d1d6;
    margin-right: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: #999;
    overflow: hidden;
    text-align: center;
    line-height: 1.2;
}
#phone-screen.dark-mode .wallpaper-thumbnail {
    background-color: #2c2c2e;
    border-color: #3a3a3c;
}

/* ÊåâÈíÆÁªÑÂæÆË∞É */
.action-btn-group {
    display: flex;
    gap: 6px;
}

/* ÈöêËóèÁöÑ Input ‰øùÊåÅÈöêËóè */
.hidden-input {
    display: none !important;
}

/* ÂõæÊ†áÁΩëÊ†ºÂú®ÁôΩËâ≤Âç°ÁâáÂÜÖÁöÑÈÄÇÈÖç */
.settings-icon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
    gap: 15px;
    padding: 10px 0;
}
.settings-icon-grid .icon-setting-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
}
.settings-icon-grid .icon-preview {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border: 1px solid rgba(0,0,0,0.1);
}

/* ÊãñÊãΩÊéíÂ∫èÂå∫ÂüüÈÄÇÈÖç */
#button-order-editor {
    background-color: transparent !important; /* ÁßªÈô§ÂéüÊúâÁöÑÁÅ∞Ëâ≤ËÉåÊôØ */
    border: none !important;
    padding: 0 !important;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}
.draggable-button-item {
    background-color: #f2f2f7;
    border: 1px solid #e5e5ea;
    border-radius: 8px;
    padding: 6px 10px;
}
#phone-screen.dark-mode .draggable-button-item {
    background-color: #2c2c2e;
    border-color: #3a3a3c;
}

/* ÈîÅÂ±èÂØÜÁ†ÅËæìÂÖ•Ê°ÜÈÄÇÈÖç */
#lock-screen-password-input {
    letter-spacing: 8px !important;
    font-weight: bold !important;
    font-size: 20px !important;
    text-align: center !important;
    background-color: #f2f2f7 !important;
    border-radius: 8px;
    height: 40px;
}
#phone-screen.dark-mode #lock-screen-password-input {
    background-color: #2c2c2e !important;
}

/* ÊñáÊú¨ÂüüÈÄÇÈÖç */
#global-css-input {
    font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
    font-size: 12px;
    background-color: #f2f2f7;
    border: none;
    border-radius: 8px;
    padding: 10px;
    min-height: 100px;
}
#phone-screen.dark-mode #global-css-input {
    background-color: #2c2c2e;
    color: #fff;
}
/* --- ‰øÆÂ§çÔºöÂ£ÅÁ∫∏È¢ÑËßàÂõæÊ†∑Âºè (Â∏¶Âº∫Âà∂Ë¶ÜÁõñ) --- */
.wallpaper-thumbnail {
    /* ‰ΩøÁî® !important Âº∫Âà∂Ë¶ÜÁõñÊóßÁöÑ #wallpaper-preview Ê†∑Âºè */
    width: 40px !important;
    height: 70px !important; /* 9:16 ÊØî‰æã */
    
    border-radius: 6px;
    background-color: #eee;
    background-size: cover;
    background-position: center;
    
    /* Ë¶ÜÁõñÊóßÁöÑËæπÊ°ÜÊ†∑Âºè */
    border: 1px solid #d1d1d6 !important;
    margin: 0 !important;
    margin-right: 8px !important;
    
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: #999;
    overflow: hidden;
    text-align: center;
    line-height: 1.2;
    flex-shrink: 0; /* Èò≤Ê≠¢Ë¢´Êå§Âéã */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .wallpaper-thumbnail {
    background-color: #2c2c2e;
    border-color: #3a3a3c !important;
}
/* Â§©Ê∞îËÆæÁΩÆ‰∏ìÁî®Ê†∑Âºè - ‰øùÊåÅÂéüÁîüÈ£éÊ†º */
.weather-input-group {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    width: 100%;
}

.weather-input {
    flex: 1; /* ËÆ©ËæìÂÖ•Ê°ÜÂπ≥ÂàÜÂÆΩÂ∫¶ */
    background-color: #f2f2f7; /* ‰∏éÂéüÁîüËæìÂÖ•Ê°ÜËÉåÊôØ‰∏ÄËá¥ */
    border: none;
    border-radius: 6px;
    padding: 8px 10px;
    font-size: 14px;
    color: #333;
    outline: none;
    min-width: 0; /* Èò≤Ê≠¢Ê∫¢Âá∫ */
}

.weather-result-text {
    font-size: 12px;
    color: #8a8a8a;
    margin-top: 6px;
    text-align: left; /* Â∑¶ÂØπÈΩêÁúãËµ∑Êù•Êõ¥Êï¥ÈΩê */
    padding-left: 2px;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .weather-input {
    background-color: #3a3a3c;
    color: #fff;
}
/* --- ‰∏ªÂ±èÂπïÁ¨¨‰∫åÈ°µÂ∏ÉÂ±ÄË∞ÉÊï¥ --- */
#page-2-app-container {
    display: grid;
    grid-template-columns: 155px 1fr; /* ‰øùÊåÅÂéüÊù•ÁöÑÂàóÂÆΩÊØî‰æã */
    gap: 15px;
    width: 100%;
    padding-top: 20px;
    align-items: start;
}

.left-column-stack {
    display: flex;
    flex-direction: column;
    gap: 15px; /* ÁªÑ‰ª∂Âíå‰∏ãÊñπAppÁöÑÈó¥Ë∑ù */
}

.left-app-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Â∑¶‰æß‰∏ãÊñπ‰πüÊòØ‰∏§Âàó */
    gap: 15px;
    justify-items: center;
}

/* ÊîØ‰ªòÂÆùÂõæÊ†á‰∏ìÁî®Ê†∑Âºè */
.alipay-icon-bg {
    background-color: #1677ff; /* ÊîØ‰ªòÂÆùËìù */
    display: flex;
    align-items: center;
    justify-content: center;
}
.alipay-icon-bg img {
    width: 80%;
    height: 80%;
    object-fit: contain;
}

/* --- ÊîØ‰ªòÂÆù App ÁïåÈù¢Ê†∑Âºè --- */
#alipay-screen {
    background-color: #f5f5f5;
    display: flex;
    flex-direction: column;
    transition: background-color 0.5s;
}

/* ÈªòËÆ§ËìùËâ≤‰∏ªÈ¢ò */
#alipay-screen {
    --alipay-primary: #1677ff;
    --alipay-text: #ffffff;
    --alipay-card-bg: #1677ff;
    --alipay-bill-bg: #ffffff;
    --alipay-bill-text: #333333;
}

/* ÈªëÈáë‰∏ªÈ¢ò (ÈÄöËøáJSÊ∑ªÂä† class .theme-blackgold) */
#alipay-screen.theme-blackgold {
    --alipay-primary: #1a1a1a;
    --alipay-text: #d4af37; /* ÈáëËâ≤ */
    --alipay-card-bg: linear-gradient(135deg, #2b2b2b, #000000);
    --alipay-bill-bg: #1c1c1e;
    --alipay-bill-text: #e0e0e0;
    background-color: #121212 !important;
}

.alipay-header-area {
    background-color: var(--alipay-primary);
    color: var(--alipay-text);
    padding-bottom: 60px; /* ‰∏∫Âç°ÁâáÁïôÂá∫Á©∫Èó¥ */
    padding-top: calc(50px + env(safe-area-inset-top));
    transition: background-color 0.5s;
}

.alipay-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    font-size: 18px;
}

.alipay-action {
    font-size: 14px;
    cursor: pointer;
}

.alipay-card-container {
    padding: 0 15px;
    margin-top: -50px; /* ‰∏äÊµÆÊïàÊûú */
}

.alipay-balance-card {
    background: var(--alipay-card-bg);
    color: var(--alipay-text);
    border-radius: 12px;
    padding: 25px 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: all 0.5s;
}

#alipay-screen.theme-blackgold .alipay-balance-card {
    box-shadow: 0 4px 20px rgba(212, 175, 55, 0.2); /* ÈáëËâ≤ÂÖâÊôï */
    border: 1px solid #333;
}

.balance-label {
    font-size: 13px;
    opacity: 0.8;
}

.balance-amount {
    font-size: 42px;
    font-weight: 700;
    margin: 5px 0 10px 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

.balance-status-tag {
    display: inline-block;
    padding: 2px 8px;
    border: 1px solid currentColor;
    border-radius: 4px;
    font-size: 11px;
    opacity: 0.8;
}

.alipay-bill-container {
    flex-grow: 1;
    background-color: var(--alipay-bill-bg);
    margin-top: 20px;
    border-radius: 20px 20px 0 0;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    color: var(--alipay-bill-text);
}

.bill-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    font-weight: 600;
    font-size: 16px;
}

/* Ë¥¶ÂçïÂàóË°®È°π */
.bill-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
    border-bottom: 1px solid rgba(0,0,0,0.05);
}
#alipay-screen.theme-blackgold .bill-item {
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.bill-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.bill-title { font-size: 15px; font-weight: 500; }
.bill-time { font-size: 12px; opacity: 0.6; }

.bill-amount { font-size: 17px; font-weight: 600; }
.bill-amount.income { color: #ff3b30; } /* Êî∂ÂÖ•Á∫¢Ëâ≤ */
.bill-amount.expense { color: #1f1f1f; } /* ÊîØÂá∫ÈªëËâ≤ */

#alipay-screen.theme-blackgold .bill-amount.expense { color: #e0e0e0; }
#alipay-screen.theme-blackgold .bill-amount.income { color: #ff4d4f; }
.kinship-invite-card {
    width: 250px; /* Á®çÂæÆÂä†ÂÆΩ‰∏ÄÁÇπ */
    background-color: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08); /* Êõ¥ÊüîÂíåÁöÑÈò¥ÂΩ± */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    border: none; /* ÂéªÊéâÈªòËÆ§ËæπÊ°Ü */
}

/* Â§¥ÈÉ®ÔºöÊ∏êÂèòËÉåÊôØ + Ë£ÖÈ•∞ */
.kinship-invite-header {
    background: linear-gradient(135deg, #FF6B6B, #EE0979); /* Êõ¥Âä†Áé∞‰ª£ÁöÑÁ∫¢Á≤âÊ∏êÂèò */
    padding: 20px 15px;
    color: white;
    text-align: center;
    position: relative;
    overflow: hidden;
}

/* Â§¥ÈÉ®ËÉåÊôØË£ÖÈ•∞ÂúÜÂúàÔºàÁ∫ØCSSÁîªÁöÑÔºâ */
.kinship-invite-header::before {
    content: '';
    position: absolute;
    top: -20px;
    right: -20px;
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
}
.kinship-invite-header::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: -10px;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 50%;
}

.kinship-title {
    font-size: 17px;
    font-weight: 600;
    letter-spacing: 0.5px;
    position: relative;
    z-index: 2;
}

.kinship-subtitle {
    font-size: 12px;
    opacity: 0.9;
    margin-top: 4px;
    position: relative;
    z-index: 2;
}

/* ‰∏ª‰ΩìÂÜÖÂÆπÔºöÈáëÈ¢ùÊòæÁ§∫ */
.kinship-invite-body {
    padding: 25px 15px;
    text-align: center;
    background-color: #fff;
}

.kinship-limit-label {
    font-size: 13px;
    color: #888;
    margin-bottom: 8px;
}

.kinship-limit-amount {
    font-size: 36px;
    font-weight: 700;
    color: #333; /* Êîπ‰∏∫Ê∑±Ëâ≤ÔºåÊõ¥ÊúâÈáëËûçË¥®ÊÑü */
    font-family: "DIN Alternate", "Roboto", sans-serif; /* Â¶ÇÊûúÁ≥ªÁªüÊîØÊåÅÔºåÊï∞Â≠ó‰ºöÊõ¥Â•ΩÁúã */
    line-height: 1;
}

.kinship-limit-amount::first-letter {
    font-size: 20px; /* Ë¥ßÂ∏ÅÁ¨¶Âè∑Á®çÂæÆÂ∞è‰∏ÄÁÇπ */
    margin-right: 2px;
    font-weight: 500;
}

/* Â∫ïÈÉ®Áä∂ÊÄÅÊ†è */
.kinship-status {
    font-size: 12px;
    padding: 12px 15px;
    background: #F9F9F9; /* ÂæàÊµÖÁöÑÁÅ∞Ëâ≤ */
    color: #999;
    text-align: left; /* Â∑¶ÂØπÈΩêÁúãËµ∑Êù•Êõ¥ÂÉèÁ≥ªÁªüÂçïÊçÆ */
    border-top: 1px solid #eee;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Áä∂ÊÄÅÁÇπ (ÂèØÈÄâ) */
.kinship-status::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: #ccc;
}

/* ‰∏çÂêåÁä∂ÊÄÅÁöÑÈ¢úËâ≤‰øÆÈ•∞ */
.kinship-status[data-status="pending"]::before { background-color: #ff9800; }
.kinship-status[data-status="accepted"]::before { background-color: #52c41a; }
.kinship-status[data-status="rejected"]::before { background-color: #ff4d4f; }

/* ËÅäÂ§©‰∏≠ÁöÑ‰∫≤Â±ûÂç°Ê∞îÊ≥°ÂéªËÉåÊôØ */
.message-bubble.is-kinship-request .content {
    padding: 0;
    background: transparent !important;
    box-shadow: none;
}
/* --- ÊîØ‰ªòÂÆùÈí±ÂåÖÈ°µÈù¢ÁöÑ‰∫≤Â±ûÂç°ÂàóË°®Ê†∑Âºè (Ë°•Âõû) --- */
.kinship-card-entry {
    background: linear-gradient(135deg, #ff5252, #ff1744);
    border-radius: 12px;
    padding: 15px;
    color: white;
    margin-bottom: 15px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(255, 23, 68, 0.3);
    cursor: pointer;
}

/* Âè≥‰∏ãËßíÁöÑË£ÖÈ•∞Áà±ÂøÉ */
.kinship-card-entry::after {
    content: '‚ù§Ô∏è';
    position: absolute;
    right: -10px;
    bottom: -20px;
    font-size: 80px;
    opacity: 0.2;
    transform: rotate(-15deg);
}

.kinship-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    position: relative;
    z-index: 2;
}

.kinship-provider {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 15px;
    font-weight: 600;
}

/* ËøôÈáåÂ∞±ÊòØÊéßÂà∂ÈÇ£Âº†Â§ßÂõæÂèòÂõûÂ∞èÂ§¥ÂÉèÁöÑÂÖ≥ÈîÆ‰ª£Á†Å */
.kinship-provider img {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.5);
    object-fit: cover;
}

.kinship-limit {
    font-size: 24px;
    font-weight: bold;
    position: relative;
    z-index: 2;
    font-family: "DIN Alternate", sans-serif;
}

.kinship-label {
    font-size: 12px;
    opacity: 0.8;
    position: relative;
    z-index: 2;
}
/* ÊîØ‰ªòÂÆù‰∫≤Â±ûÂç°Âç°ÁâáÂÜÖÁöÑËß£ÁªëÊåâÈíÆ */
.kinship-card-entry .alipay-unbind-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.2); /* ÂçäÈÄèÊòéÈªëÂ∫ï */
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.5);
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 12px;
    cursor: pointer;
    z-index: 10; /* ‰øùËØÅÁÇπÂæóÂà∞ */
    transition: background 0.2s;
}

.kinship-card-entry .alipay-unbind-btn:hover {
    background: rgba(0, 0, 0, 0.4);
}
/* --- ÊîØ‰ªòÂÆùÈªëÈáëÊ®°ÂºèÈÄÇÈÖçË°•‰∏Å --- */

/* ÊöÇÊó†‰∫≤Â±ûÂç°ÁöÑÁ©∫Áä∂ÊÄÅÊ†∑Âºè */
.kinship-empty-state {
    text-align: center; 
    padding: 20px; 
    background: white; 
    border-radius: 12px; 
    color: #999; 
    font-size: 13px;
    transition: all 0.3s;
}

/* ÈªëÈáëÊ®°Âºè‰∏ãÁöÑÁ©∫Áä∂ÊÄÅ */
.theme-blackgold .kinship-empty-state {
    background: rgba(255, 255, 255, 0.1) !important; /* ÂçäÈÄèÊòéÊ∑±Ëâ≤ */
    color: #d4af37 !important; /* ÈáëËâ≤ÊñáÂ≠ó */
    border: 1px solid rgba(212, 175, 55, 0.3); /* ÈáëËâ≤ËæπÊ°Ü */
}

/* ÈªëÈáëÊ®°Âºè‰∏ãÁöÑÊ∑ªÂä†ÊåâÈíÆ */
.theme-blackgold #add-kinship-btn {
    color: #d4af37 !important; /* ÊåâÈíÆÂèòÈáë */
}

/* ÈªëÈáëÊ®°Âºè‰∏ãÁöÑÊ†áÈ¢òÊñáÂ≠ó */
.theme-blackgold #alipay-kinship-section span {
    color: #d4af37 !important; /* Ê†áÈ¢òÂèòÈáë */
}
/* --- ÊîØ‰ªòÊî∂Èì∂Âè∞ÂºπÁ™óÁæéÂåñ --- */

/* 1. ÂºπÁ™óÂÜÖÁöÑÊåâÈíÆÂÆπÂô® */
#custom-modal .custom-modal-footer {
    /* ËÆ©ÂàóË°®Êõ¥Á¥ßÂáëÔºåÂéªÊéâÈªòËÆ§ÁöÑÂ±Ö‰∏≠ */
    display: flex;
    flex-direction: column;
    padding: 0;
    max-height: 60vh;
    overflow-y: auto;
}

/* 2. ÊîØ‰ªòÈÄâÈ°πÊåâÈíÆ (ÂéüÊù•ÈÇ£‰∫õËìùËâ≤ÁöÑÂ≠ó) */
.payment-option-item {
    display: flex !important;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 15px 20px !important;
    background-color: #fff !important;
    border: none !important;
    border-bottom: 1px solid #f5f5f5 !important;
    cursor: pointer;
    text-decoration: none !important;
    transition: background-color 0.2s;
    margin: 0 !important;
    height: auto !important;
}

.payment-option-item:active {
    background-color: #f9f9f9 !important;
}

/* ÊúÄÂêé‰∏ÄÈ°πÂéªÊéâËæπÊ°Ü */
.payment-option-item:last-child {
    border-bottom: none !important;
}

/* 3. ÂÜÖÈÉ®ÂÖÉÁ¥†Â∏ÉÂ±Ä */
.pay-opt-left {
    display: flex;
    align-items: center;
    gap: 12px;
    text-align: left;
}

/* ÂõæÊ†áÊ†∑Âºè */
.pay-opt-icon {
    width: 28px;
    height: 28px;
    border-radius: 4px;
}

/* ÊñáÂ≠ó‰ø°ÊÅØ */
.pay-opt-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.pay-opt-title {
    font-size: 16px;
    color: #333;
    font-weight: 500;
}

.pay-opt-desc {
    font-size: 12px;
    color: #999;
}

/* ‰ΩôÈ¢ù‰∏çË∂≥Êó∂ÁöÑÊ†∑Âºè (ÂèØÈÄâ) */
.payment-option-item.disabled {
    opacity: 0.6;
    pointer-events: none;
}

/* ÈÄÇÈÖçÊöóÈªëÊ®°Âºè */
#phone-screen.dark-mode .payment-option-item {
    background-color: #1c1c1e !important;
    border-bottom-color: #2c2c2e !important;
}
#phone-screen.dark-mode .pay-opt-title { color: #fff; }
#phone-screen.dark-mode .pay-opt-desc { color: #666; }
/* --- ÊîØ‰ªòÂÆù‰∫≤Â±ûÂç°Â∏ÉÂ±ÄÁªàÊûÅ‰øÆÂ§ç --- */

/* 1. ÊªöÂä®ÂÆπÂô® */
#alipay-kinship-section {
    display: flex !important;
    flex-direction: row !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    gap: 15px;
    padding: 5px 5px 15px 5px; /* Â¢ûÂä†ÂÜÖËæπË∑ùÔºåÈò≤Ê≠¢Èò¥ÂΩ±Ë¢´Âàá */
    
    /* ÂÖ≥ÈîÆÔºöËÆ©ÂÜÖÂÆπÂú®Âè™Êúâ‰∏ÄÂº†Âç°Êó∂‰πüËÉΩÊíëÂºÄÂÆπÂô® */
    width: 100%; 
    box-sizing: border-box;
    
    /* ÈöêËóèÊªöÂä®Êù° */
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; 
}
#alipay-kinship-section::-webkit-scrollbar {
    display: none; 
}

/* 2. ÂçïÂç°Ê†∑Âºè‰ºòÂåñ */
.kinship-card-entry {
    /* Ê†∏ÂøÉ‰øÆÊîπÔºö‰ΩøÁî® flex-shrink: 0 Èò≤Ê≠¢Ë¢´Êå§Âéã */
    flex-shrink: 0;
    
    /* Ê†∏ÂøÉ‰øÆÊîπÔºöÂÆΩÂ∫¶ÈÄªËæë */
    /* ÈªòËÆ§ÂÆΩÂ∫¶ÔºåÈÄÇÂêàÂ§öÂç°Âπ∂Êéí */
    width: 85vw; 
    max-width: 320px; 
    min-width: 260px;

    margin-bottom: 0 !important;
    
    /* ËßÜËßâÁæéÂåñ */
    box-shadow: 0 4px 15px rgba(255, 23, 68, 0.25);
    border-radius: 16px;
}


/* 1. ‰øÆÂ§ç‰∫≤Â±ûÂç°ÂÆΩÂ∫¶ÈóÆÈ¢ò */
/* ÈÄªËæëÔºöÂ¶ÇÊûúÂàóË°®ÈáåÂè™Êúâ‰∏ÄÂº†Âç°ÔºåÂº∫Âà∂Âç†Êª°ÂÆπÂô®ÂÆΩÂ∫¶ÔºåÂíå‰ΩôÈ¢ùÂç°ÂØπÈΩê */
#alipay-kinship-section:has(.kinship-card-entry:only-child) .kinship-card-entry {
    width: 100% !important;
    max-width: none !important;
    min-width: 0 !important;
    margin-right: 0 !important;
}

/* Á°Æ‰øùÂÆπÂô®Êú¨Ë∫´ÁöÑÂÜÖËæπË∑ù‰∏ç‰ºöÂØºËá¥ÂØπÈΩêÂÅèÂ∑Æ */
#alipay-kinship-section {
    padding-left: 0 !important; /* ÁßªÈô§Â∑¶ËæπË∑ùÔºå‰æùÈù†Áà∂ÂÆπÂô®ÂØπÈΩê */
    padding-right: 0 !important;
}

/* 2. ‰øÆÂ§çÊîØ‰ªòÂÆùÂõæÊ†á‰∏çÈì∫Êª°ÁöÑÈóÆÈ¢ò */
/* ÂéªÊéâÂéüÊú¨ÁªôÊîØ‰ªòÂÆùÁâπÊÑèÁïôÁöÑËæπË∑ùÔºåËÆ©ÂõæÁâáÂº∫Âà∂ÊíëÊª° */
.alipay-icon-bg {
    padding: 0 !important; /* ÂéªÊéâÂÜÖËæπË∑ù */
    display: block !important; /* Á°Æ‰øùÊòØÂùóÁ∫ßÂ∏ÉÂ±Ä */
}

.alipay-icon-bg img {
    width: 100% !important;  /* ÂÆΩÂ∫¶ÊíëÊª° */
    height: 100% !important; /* È´òÂ∫¶ÊíëÊª° */
    object-fit: cover !important; /* Ë£ÅÂâ™‰ª•Èì∫Êª°Ôºå‰∏çÁïôÁôΩËæπ */
    border-radius: inherit !important; /* ÁªßÊâøÁà∂Á∫ßÁöÑÂúÜËßí */
    margin: 0 !important;
}

/* 4. Á©∫Áä∂ÊÄÅ‰ºòÂåñ */
.kinship-empty-state {
    width: 100%;
    flex-shrink: 0;
    padding: 30px 20px;
    background-color: #fff;
    border-radius: 12px;
    text-align: center;
    color: #999;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
#alipay-kinship-section:has(.kinship-card-entry:only-child) {
    display: block !important;        /* ÂÖ≥ÈîÆÔºöÂèñÊ∂à Flex */
    overflow: visible !important;     /* ÂÖ≥ÈîÆÔºö‰∏çÈúÄË¶ÅÊªöÂä® */
    white-space: normal !important;
    padding-right: 5px !important;    /* ‰øùÊåÅ‰∏ÄÁÇπÂè≥ËæπË∑ùÁæéËßÇ */
}

/* 2. ÈíàÂØπÂè™Êúâ‰∏ÄÂº†Âç°ÁöÑÊÉÖÂÜµÔºöÂç°ÁâáÊ†∑ÂºèÈáçÁΩÆ */
#alipay-kinship-section:has(.kinship-card-entry:only-child) .kinship-card-entry {
    width: auto !important;           /* ÂÖ≥ÈîÆÔºöËá™Âä®ÂÆΩÂ∫¶ (BlockÂ∏ÉÂ±Ä‰∏ãÁ≠â‰∫éÂç†Êª°) */
    max-width: 100% !important;       /* ÂèåÈáç‰øùÈô©ÔºöÁªù‰∏çË∂ÖËøáÁà∂ÂÆπÂô® */
    min-width: 0 !important;          /* Ê∏ÖÈô§‰πãÂâçËÆæÁΩÆÁöÑ 260px ÊúÄÂ∞èÂÆΩÂ∫¶ */
    margin: 0 !important;             /* Ê∏ÖÈô§ËæπË∑ù */
    flex: none !important;            /* Á¶ÅÁî® flex Â±ûÊÄß */
    transform: none !important;       /* Èò≤Ê≠¢ÂèòÊç¢ÂØºËá¥ÁöÑ‰ΩçÁΩÆÂÅèÁßª */
}

/* 3. Á°Æ‰øùÂ§öÂº†Âç°ÁâáÊó∂ÔºàFlexÂ∏ÉÂ±ÄÔºâ‰æùÁÑ∂Ê≠£Â∏∏ */
#alipay-kinship-section {
    /* ËøôÈáå‰øùÊåÅ‰πãÂâçÁöÑËÆæÁΩÆÔºåÁ°Æ‰øùÂ§öÂº†Âç°Êó∂Ê®™ÂêëÊªöÂä® */
    box-sizing: border-box; 
}

/* 4. ÂÜçÊ¨°Á°Æ‰øùÂõæÊ†áÈì∫Êª° (‰ª•Èò≤Ë¢´Ë¶ÜÁõñ) */
.alipay-icon-bg {
    padding: 0 !important;
    display: block !important;
}
.alipay-icon-bg img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    border-radius: inherit !important;
    margin: 0 !important;
}
/* --- ÊîØ‰ªòÂÆùË¥¶ÂçïÁ≠õÈÄâ‰∏éÂàÜÈ°µÊ†∑Âºè --- */
.alipay-bill-container {
    padding: 0 !important; /*‰ª•Ê≠§Ë¶ÜÁõñÊóßpaddingÔºåÁî±ÂÜÖÈÉ®ÂÖÉÁ¥†ÊéßÂà∂ */
    background-color: #f5f5f5;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* ÂÆπÂô®Êú¨Ë∫´‰∏çÊªöÂä®ÔºåÂÜÖÈÉ®ÂàóË°®ÊªöÂä® */
}

/* Á≠õÈÄâÊ†èÂ§¥ÈÉ® */
.bill-filter-header {
    background-color: #fff;
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #eee;
    flex-shrink: 0;
    z-index: 10;
}

/* Êó•ÊúüÈÄâÊã©Âô®ÁæéÂåñ */
.bill-date-picker-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background-color: #f5f5f5;
    border-radius: 20px;
    padding: 5px 12px;
}

.bill-date-input {
    border: none;
    background: transparent;
    font-size: 14px;
    color: #333;
    font-weight: 500;
    outline: none;
    width: 110px;
}

/* Á±ªÂûãÂàáÊç¢Ê†áÁ≠æ */
.bill-type-tabs {
    display: flex;
    gap: 15px;
}

.bill-type-tab {
    font-size: 14px;
    color: #666;
    cursor: pointer;
    padding: 4px 0;
    position: relative;
    transition: color 0.2s;
}

.bill-type-tab.active {
    color: #1677ff; /* ÊîØ‰ªòÂÆùËìù */
    font-weight: 600;
}
/* ÈªëÈáëÊ®°Âºè‰∏ãÁöÑÈÄâ‰∏≠ÊÄÅ */
.theme-blackgold .bill-type-tab.active {
    color: #d4af37;
}

.bill-type-tab.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    height: 2px;
    background-color: currentColor;
    border-radius: 2px;
}

/* ÊªöÂä®ÂàóË°®Âå∫Âüü */
#bill-scroll-list {
    flex-grow: 1;
    overflow-y: auto;
    padding: 0 15px;
    background-color: #fff;
}

/* ÂàóË°®Êúà‰ªΩÂàÜÂâ≤Á∫ø */
.bill-month-separator {
    padding: 15px 0 5px 0;
    font-size: 13px;
    color: #999;
    background-color: #fff;
    position: sticky;
    top: 0;
    z-index: 5;
}

/* Âä†ËΩΩÊõ¥Â§öÊèêÁ§∫ */
.bill-loading-more {
    text-align: center;
    padding: 15px;
    color: #999;
    font-size: 12px;
}
.bill-loading-more.hidden {
    display: none;
}
/* 1. ÂÆπÂô®‰∏éËÉåÊôØÂèòÈªë */
#alipay-screen.theme-blackgold .alipay-bill-container,
#alipay-screen.theme-blackgold .bill-filter-header,
#alipay-screen.theme-blackgold #bill-scroll-list {
    background-color: #121212 !important; /* Ê∑±ÈªëËÉåÊôØ */
    border-color: #333 !important;
}

/* 2. Á≠õÈÄâÊ†èÂ§¥ÈÉ® */
#alipay-screen.theme-blackgold .bill-filter-header {
    border-bottom: 1px solid #2c2c2e;
}

/* 3. Êó•ÊúüÈÄâÊã©Âô®ÁæéÂåñ */
#alipay-screen.theme-blackgold .bill-date-picker-wrapper {
    background-color: #2c2c2e !important; /* ÊØîËÉåÊôØÁ®ç‰∫ÆÁöÑÁÅ∞Ëâ≤ */
    border: 1px solid #444;
}

#alipay-screen.theme-blackgold .bill-date-input {
    color: #d4af37 !important; /* ÈáëËâ≤ÊñáÂ≠ó */
    color-scheme: dark; /* ËÆ©ÊµèËßàÂô®Ëá™Â∏¶ÁöÑÊó•ÊúüÂºπÁ™ó‰πüÂèòÊàêÊ∑±Ëâ≤ */
}

/* 4. Á±ªÂûãÂàáÊç¢Ê†áÁ≠æ */
#alipay-screen.theme-blackgold .bill-type-tab {
    color: #888;
}

#alipay-screen.theme-blackgold .bill-type-tab.active {
    color: #d4af37 !important; /* ÈÄâ‰∏≠Âèò‰∏∫ÈáëËâ≤ */
}

/* 5. ÂàóË°®ÂÜÖÂÆπÈÄÇÈÖç */
#alipay-screen.theme-blackgold .bill-month-separator {
    background-color: #121212 !important; /* ‰∏éËÉåÊôØÂêåËâ≤ */
    color: #d4af37 !important; /* Êúà‰ªΩÊ†áÈ¢òÂèòÈáë */
}

#alipay-screen.theme-blackgold .bill-item {
    border-bottom-color: #2c2c2e !important;
}

/* Ë¥¶ÂçïÊ†áÈ¢ò */
#alipay-screen.theme-blackgold .bill-title {
    color: #e0e0e0 !important; /* ÊµÖÁÅ∞ÂÅèÁôΩ */
}

/* Ë¥¶ÂçïÊó∂Èó¥ */
#alipay-screen.theme-blackgold .bill-time {
    color: #666 !important;
}

/* ÊîØÂá∫ÈáëÈ¢ù (ÂéüÊú¨ÊòØÈªëËâ≤ÔºåÁé∞Âú®ÂèòÁôΩ) */
#alipay-screen.theme-blackgold .bill-amount.expense {
    color: #ffffff !important;
}

/* Êî∂ÂÖ•ÈáëÈ¢ù (ÂéüÊú¨ÊòØÁ∫¢Ëâ≤ÔºåÁé∞Âú®ÂèòÈáëÊàñËÄÖÊ∑°Á∫¢ÔºåËøôÈáåÈÄâÈáëËâ≤ÂëºÂ∫î‰∏ªÈ¢ò) */
#alipay-screen.theme-blackgold .bill-amount.income {
    color: #d4af37 !important; 
}

/* Â∫ïÈÉ®Âä†ËΩΩÊèêÁ§∫ */
#alipay-screen.theme-blackgold .bill-loading-more {
    color: #666 !important;
}

/* Â¶ÇÊûúÂàóË°®‰∏∫Á©∫ÁöÑÊèêÁ§∫ÊñáÂ≠ó */
#alipay-screen.theme-blackgold .bill-empty-msg {
    color: #666 !important;
}
.alipay-bill-container {
    border-radius: 5px 5px 0 0 !important;
}

/* 2. ËÆ©Á≠õÈÄâÊ†èÂ§¥ÈÉ®‰πüÊã•ÊúâÂúÜËßíÔºå‰∏éÂÆπÂô®Ë¥¥Âêà */
.bill-filter-header {
    border-radius: 5px 5px 0 0;
    /* Á®çÂæÆÂ¢ûÂä†‰∏ÄÁÇπÂ∑¶‰æßÂÜÖËæπË∑ùÔºåËÆ©ÊñáÂ≠óÁ¶ªËæπÁºòËøú‰∏ÄÁÇπ */
    padding-left: 20px !important; 
}

/* --- Âü∫ÈáëÁêÜË¥¢Ê®°ÂùóÊ†∑Âºè --- */
.fund-item {
    background-color: white;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.02);
    transition: transform 0.1s;
}
.fund-item:active {
    transform: scale(0.98);
    background-color: #f9f9f9;
}

.fund-info h4 {
    margin: 0 0 4px 0;
    font-size: 15px;
    font-weight: 600;
    color: #333;
}

.fund-tags {
    display: flex;
    gap: 5px;
}

.fund-tag {
    font-size: 10px;
    padding: 1px 4px;
    border-radius: 3px;
    background-color: #f0f2f5;
    color: #666;
}
.fund-tag.high-risk {
    background-color: #fff1f0;
    color: #ff4d4f;
}

.fund-data {
    text-align: right;
}

.fund-change {
    font-size: 18px;
    font-weight: 600;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

/* Á∫¢Ê∂®ÁªøË∑å */
.fund-up { color: #ff3b30; }
.fund-down { color: #4cd964; }
.fund-flat { color: #999; }

.fund-nav {
    font-size: 12px;
    color: #999;
    margin-top: 2px;
}

/* ÈªëÈáëÊ®°ÂºèÈÄÇÈÖç */
#alipay-screen.theme-blackgold .alipay-grid-menu .alipay-menu-item {
    background-color: #1c1c1e;
    color: #e0e0e0;
    box-shadow: none;
    border: 1px solid #333;
}
#alipay-screen.theme-blackgold #fund-market-trend-preview {
    color: #d4af37 !important;
}
/* --- ÊîØ‰ªòÂÆùÂ∏ÉÂ±Ä‰øÆÂ§çÔºöÁ°Æ‰øùË¥¶Âçï‰∏çË¢´Êå§Âéã --- */
#alipay-screen {
    display: flex;
    flex-direction: column;
    height: 100%; /* Âº∫Âà∂Âç†Êª°Â±èÂπï */
    overflow: hidden; /* Á¶ÅÊ≠¢Êï¥‰∏™Â±èÂπïÊªöÂä®ÔºåÂè™ËÆ©ÂÜÖÈÉ®Âå∫ÂüüÊªöÂä® */
}

/* Â§¥ÈÉ®Âå∫Âüü (ÂåÖÂê´ËìùËâ≤ËÉåÊôØ„ÄÅ‰ΩôÈ¢ù„ÄÅ‰∫≤Â±ûÂç°„ÄÅÂü∫ÈáëÂÖ•Âè£) */
.alipay-header-area {
    flex-shrink: 0; /* Á¶ÅÊ≠¢Â§¥ÈÉ®Ë¢´ÂéãÁº© */
    background-color: var(--alipay-primary);
    /* Ê≥®ÊÑèÔºöËøôÈáåÂéªÊéâ‰∫Ü padding-bottomÔºåÁî±ÂÜÖÂÆπÊíëÂºÄ */
    padding-bottom: 20px; 
    transition: background-color 0.5s;
}

/* Âç°ÁâáÂÆπÂô® */
.alipay-card-container {
    margin-top: 0; /* Ë∞ÉÊï¥Èó¥Ë∑ù */
    padding: 0 15px;
}

/* --- Âü∫ÈáëÂÖ•Âè£Ê†∑Âºè‰ºòÂåñ (Êõ¥Á¥ßÂáë) --- */
.alipay-grid-menu {
    padding: 0 15px;
    margin-top: 10px;     /* ‰∏é‰∏äÊñπÂç°Áâá‰øùÊåÅË∑ùÁ¶ª */
    margin-bottom: 10px;  /* ‰∏é‰∏ãÊñπË¥¶Âçï‰øùÊåÅË∑ùÁ¶ª */
}

.alipay-menu-item {
    background: white;
    padding: 12px 15px;   /* ÂáèÂ∞èÂÜÖËæπË∑ùÔºåÊõ¥ÊâÅÂπ≥ */
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.03);
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid transparent; /* È¢ÑÁïôËæπÊ°Ü‰Ωç */
}

.alipay-menu-item:active {
    transform: scale(0.98);
}

.menu-icon {
    width: 36px;
    height: 36px;
    background: #FFF5E5;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.menu-info {
    flex-grow: 1;
}

.menu-title {
    font-weight: 600;
    font-size: 15px;
    color: #333;
}

.menu-trend {
    font-size: 11px;
    color: #ff3b30;
    margin-top: 2px;
}

.menu-arrow {
    color: #ccc;
    font-size: 18px;
    font-weight: 300;
}

/* --- Ë¥¶ÂçïÂÆπÂô®Ëá™ÈÄÇÂ∫î (ÂÖ≥ÈîÆÔºÅ) --- */
.alipay-bill-container {
    flex-grow: 1;  /* Âç†ÊçÆÂâ©‰ΩôÊâÄÊúâÁ©∫Èó¥ */
    min-height: 0; /* ÂÖÅËÆ∏ Flex Â≠êÂÖÉÁ¥†Êî∂Áº©ÔºåÈò≤Ê≠¢Ê∫¢Âá∫ */
    margin-top: 0; /* Á¥ßË¥¥‰∏äÊñπ */
    background-color: var(--alipay-bill-bg);
    border-radius: 20px 20px 0 0;
    padding: 0;    /* ÂÜÖÈÉ®ÂÖÉÁ¥†Â§ÑÁêÜ padding */
    display: flex;
    flex-direction: column;
    overflow: hidden; /* ÂÆπÂô®Êú¨Ë∫´‰∏çÊªö */
    box-shadow: 0 -5px 15px rgba(0,0,0,0.05); /* Â¢ûÂä†È°∂ÈÉ®Èò¥ÂΩ±Ôºå‰∫ßÁîüÂ±ÇÊ¨°ÊÑü */
}

/* Ë¥¶ÂçïÂàóË°®ÊªöÂä®Âå∫Âüü */
#bill-scroll-list {
    flex-grow: 1;
    overflow-y: auto; /* Âè™ÊúâËøôÈáåÊªöÂä® */
    padding: 0 15px 20px 15px;
    -webkit-overflow-scrolling: touch;
}


/* --- ÊîØ‰ªòÂÆùÂ∏ÉÂ±Ä‰øÆÂ§çÔºöÁ°Æ‰øùË¥¶Âçï‰∏çË¢´Êå§Âéã --- */
#alipay-screen {
    display: flex;
    flex-direction: column;
    height: 100%; /* Âº∫Âà∂Âç†Êª°Â±èÂπï */
    overflow: hidden; /* Á¶ÅÊ≠¢Êï¥‰∏™Â±èÂπïÊªöÂä®ÔºåÂè™ËÆ©ÂÜÖÈÉ®Âå∫ÂüüÊªöÂä® */
}

/* Â§¥ÈÉ®Âå∫Âüü (ÂåÖÂê´ËìùËâ≤ËÉåÊôØ„ÄÅ‰ΩôÈ¢ù„ÄÅ‰∫≤Â±ûÂç°„ÄÅÂü∫ÈáëÂÖ•Âè£) */
.alipay-header-area {
    flex-shrink: 0; /* Á¶ÅÊ≠¢Â§¥ÈÉ®Ë¢´ÂéãÁº© */
    background-color: var(--alipay-primary);
    /* Ê≥®ÊÑèÔºöËøôÈáåÂéªÊéâ‰∫Ü padding-bottomÔºåÁî±ÂÜÖÂÆπÊíëÂºÄ */
    padding-bottom: 20px; 
    transition: background-color 0.5s;
}

/* Âç°ÁâáÂÆπÂô® */
.alipay-card-container {
    margin-top: 0; /* Ë∞ÉÊï¥Èó¥Ë∑ù */
    padding: 0 15px;
}

/* --- Âü∫ÈáëÂÖ•Âè£Ê†∑Âºè‰ºòÂåñ (Êõ¥Á¥ßÂáë) --- */
.alipay-grid-menu {
    padding: 0 15px;
    margin-top: 10px;     /* ‰∏é‰∏äÊñπÂç°Áâá‰øùÊåÅË∑ùÁ¶ª */
    margin-bottom: 10px;  /* ‰∏é‰∏ãÊñπË¥¶Âçï‰øùÊåÅË∑ùÁ¶ª */
}

.alipay-menu-item {
    background: white;
    padding: 12px 15px;   /* ÂáèÂ∞èÂÜÖËæπË∑ùÔºåÊõ¥ÊâÅÂπ≥ */
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.03);
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid transparent; /* È¢ÑÁïôËæπÊ°Ü‰Ωç */
}

.alipay-menu-item:active {
    transform: scale(0.98);
}

.menu-icon {
    width: 36px;
    height: 36px;
    background: #FFF5E5;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.menu-info {
    flex-grow: 1;
}

.menu-title {
    font-weight: 600;
    font-size: 15px;
    color: #333;
}

.menu-trend {
    font-size: 11px;
    color: #ff3b30;
    margin-top: 2px;
}

.menu-arrow {
    color: #ccc;
    font-size: 18px;
    font-weight: 300;
}

/* --- Ë¥¶ÂçïÂÆπÂô®Ëá™ÈÄÇÂ∫î (ÂÖ≥ÈîÆÔºÅ) --- */
.alipay-bill-container {
    flex-grow: 1;  /* Âç†ÊçÆÂâ©‰ΩôÊâÄÊúâÁ©∫Èó¥ */
    min-height: 0; /* ÂÖÅËÆ∏ Flex Â≠êÂÖÉÁ¥†Êî∂Áº©ÔºåÈò≤Ê≠¢Ê∫¢Âá∫ */
    margin-top: 0; /* Á¥ßË¥¥‰∏äÊñπ */
    background-color: var(--alipay-bill-bg);
    border-radius: 20px 20px 0 0;
    padding: 0;    /* ÂÜÖÈÉ®ÂÖÉÁ¥†Â§ÑÁêÜ padding */
    display: flex;
    flex-direction: column;
    overflow: hidden; /* ÂÆπÂô®Êú¨Ë∫´‰∏çÊªö */
    box-shadow: 0 -5px 15px rgba(0,0,0,0.05); /* Â¢ûÂä†È°∂ÈÉ®Èò¥ÂΩ±Ôºå‰∫ßÁîüÂ±ÇÊ¨°ÊÑü */
}

/* Ë¥¶ÂçïÂàóË°®ÊªöÂä®Âå∫Âüü */
#bill-scroll-list {
    flex-grow: 1;
    overflow-y: auto; /* Âè™ÊúâËøôÈáåÊªöÂä® */
    padding: 0 15px 20px 15px;
    -webkit-overflow-scrolling: touch;
}



/* 1. Âü∫ÈáëÂÖ•Âè£ÈªëÈáëÂåñ */
#alipay-screen.theme-blackgold .alipay-menu-item {
    background-color: #1c1c1e; /* Ê∑±Ëâ≤ËÉåÊôØ */
    border: 1px solid #333;    /* ÂæÆÂº±ËæπÊ°Ü */
    box-shadow: none;
}

#alipay-screen.theme-blackgold .menu-icon {
    background-color: #2c2c2e; /* ÂõæÊ†áËÉåÊôØÂèòÊ∑± */
    border: 1px solid #444;
}

#alipay-screen.theme-blackgold .menu-title {
    color: #e0e0e0; /* Ê†áÈ¢òÂèòÁôΩ/ÁÅ∞ */
}

#alipay-screen.theme-blackgold .menu-trend {
    color: #d4af37 !important; /* Ê∂®Ë∑åÂπÖÂèòÈáëËâ≤ */
}

#alipay-screen.theme-blackgold .menu-arrow {
    color: #666;
}

/* 2. Ë¥¶ÂçïÂå∫ÂüüÈªëÈáëÂåñÂÆåÂñÑ */
#alipay-screen.theme-blackgold .alipay-bill-container {
    background-color: #000000; /* Ë¥¶ÂçïËÉåÊôØÂÖ®Èªë */
    border-top: 1px solid #222;
}

#alipay-screen.theme-blackgold #bill-scroll-list {
    background-color: #000000;
}

/* --- Âü∫ÈáëÈ°µÈù¢‰∏ªÈ¢òÈÄÇÈÖç --- */

/* 1. ÈªòËÆ§ËìùËâ≤‰∏ªÈ¢ò */
.fund-header-area {
    background-color: #1677ff;
    color: white;
    border-bottom: none;
}

.fund-asset-card {
    background-color: #1677ff;
    color: white;
    padding: 10px 20px 40px 20px; /* Â¢ûÂä†Â∫ïÈÉ®ÂÜÖËæπË∑ù */
    margin-bottom: -20px; /* ËÆ©‰∏ãÊñπÂàóË°®‰∏äÊµÆË¶ÜÁõñ */
    transition: background-color 0.5s;
}

/* 2. ÈªëÈáëÊ®°ÂºèÈÄÇÈÖç (ÂΩì fund-screen Êã•Êúâ .theme-blackgold Á±ªÊó∂) */
#fund-screen.theme-blackgold {
    background-color: #121212 !important;
}

#fund-screen.theme-blackgold .fund-header-area {
    background-color: #1a1a1a; /* Â§¥ÈÉ®ÂèòÊ∑±Èªë */
    color: #d4af37; /* ÈáëËâ≤ÊñáÂ≠ó */
}

#fund-screen.theme-blackgold .fund-asset-card {
    background: linear-gradient(180deg, #1a1a1a 0%, #000000 100%); /* ÈªëÈáëÊ∏êÂèò */
    color: #d4af37;
}

#fund-screen.theme-blackgold .list-container {
    background-color: #121212 !important; /* ÂàóË°®ËÉåÊôØÂèòÈªë */
}

#fund-screen.theme-blackgold .frame-tabs {
    background-color: #1c1c1e !important;
    box-shadow: none;
    border: 1px solid #333;
}

#fund-screen.theme-blackgold .frame-tab {
    color: #888;
}
#fund-screen.theme-blackgold .frame-tab.active {
    background-color: #333 !important;
    color: #d4af37 !important;
}

#fund-screen.theme-blackgold .fund-item {
    background-color: #1c1c1e;
    border: 1px solid #2c2c2e;
    color: #e0e0e0;
}

#fund-screen.theme-blackgold .fund-info h4 {
    color: #e0e0e0;
}
/* --- ‰∫≤Â±ûÂç°Ê†áÈ¢òÈÄÇÈÖç --- */
.kinship-section-title {
    color: #333; /* ÈªòËÆ§Ê®°ÂºèÔºöÊ∑±ÁÅ∞Ëâ≤ */
    transition: color 0.3s;
}

/* ÈªëÈáëÊ®°Âºè‰∏ãÔºåÊ†áÈ¢òÂèòÈáë */
#alipay-screen.theme-blackgold .kinship-section-title {
    color: #d4af37 !important;
}

/* ÈªëÈáëÊ®°Âºè‰∏ãÔºåÊ∑ªÂä†ÊåâÈíÆ‰πüÂèòÈáë */
#alipay-screen.theme-blackgold #add-kinship-btn {
    color: #d4af37 !important;
}


/* ============================================================ */
/* ‚ñº‚ñº‚ñº ÁªàÊûÅ‰øÆÂ§çÔºöÊ∂àÊÅØÈïøÊåâËèúÂçï (ËøòÂéü‰πùÂÆ´Ê†º + Ëá™Âä®Â°´Êª°) ‚ñº‚ñº‚ñº */
/* ============================================================ */

/* 1. ÂÆπÂô®Â∏ÉÂ±ÄÔºöÊ®™ÂêëÊéíÂàóÔºåÂÖÅËÆ∏Êç¢Ë°åÔºåÊåâÈíÆ‰πãÈó¥ÊúâÈó¥Èöô */
#message-actions-modal .custom-modal-footer {
    display: flex !important;
    flex-direction: row !important; /* Âº∫Âà∂Ê®™Âêë */
    flex-wrap: wrap !important;     /* ÂÖÅËÆ∏Êç¢Ë°å */
    justify-content: space-between !important;
    padding: 10px !important;
    gap: 10px !important;           /* ÊåâÈíÆÈó¥Ë∑ù */
    background-color: transparent !important;
    max-height: none !important;
    overflow: visible !important;
}

/* 2. ÂäüËÉΩÊåâÈíÆÔºöÁÅ∞Ëâ≤ÊñπÂùóÔºåËá™Âä®Â°´Êª° */
#message-actions-modal .custom-modal-footer button:not(#cancel-message-action-btn) {
    /* Âü∫Á°ÄÂÆΩÂ∫¶ÔºöÁ∫¶‰∏ÄÂçäÂáèÂéªÈó¥Èöô */
    width: 48% !important;
    /* „ÄêÂÖ≥ÈîÆ‰øÆÂ§ç„ÄëÔºöÂÖÅËÆ∏ÊåâÈíÆËá™Âä®Êãâ‰º∏ÔºÅËøôÊ†∑Â¶ÇÊûúÊòØÂ•áÊï∞‰∏™ÔºåÊúÄÂêé‰∏Ä‰∏™‰ºöËá™Âä®Âç†Êª°‰∏ÄË°å */
    flex-grow: 1 !important; 
    
    /* „ÄêÂÖ≥ÈîÆ‰øÆÂ§ç„ÄëÔºöÁßªÈô§ display: ... !importantÔºåËÆ© JS ÁöÑÈöêËóèÈÄªËæëÁîüÊïà */
    display: flex; 
    align-items: center;
    justify-content: center;
    
    margin: 0 !important;
    padding: 15px 0 !important; /* ‰øùÊåÅÈ´òÂ∫¶ */
    
    /* Â§ñËßÇÔºöÊµÖÁÅ∞Ëâ≤ÂúÜËßí */
    background-color: #f2f2f7 !important; 
    color: #007aff !important;
    border-radius: 10px !important;
    border: none !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    
    /* Ê∏ÖÈô§Âπ≤Êâ∞ */
    border-bottom: none !important;
}

/* 3. Âº∫Âà∂ÈöêËóèË¢´ JS ËÆæÁΩÆ‰∏∫ÈöêËóèÁöÑÊåâÈíÆ (Ëß£ÂÜ≥ÂçïËÅäÊòæÁ§∫Áæ§ËÅäÊåâÈíÆÁöÑÈóÆÈ¢ò) */
#message-actions-modal .custom-modal-footer button[style*="display: none"] {
    display: none !important;
}

/* 4. ÂèñÊ∂àÊåâÈíÆÔºöÊ†∑ÂºèÂÆåÂÖ®Áªü‰∏ÄÔºàÁÅ∞Ëâ≤ËÉåÊôØ„ÄÅÊ≠£Â∏∏Â≠ó‰ΩìÔºâ */
#message-actions-modal #cancel-message-action-btn {
    width: 100% !important;
    flex-grow: 0 !important;
    margin-top: 5px !important;
    padding: 15px 0 !important;
    
    /* „Äê‰øÆÊîπ„ÄëËÉåÊôØËâ≤Êîπ‰∏∫ÂíåÂÖ∂‰ªñÊåâÈíÆ‰∏ÄÊ†∑ÁöÑÊµÖÁÅ∞ */
    background-color: #f2f2f7 !important; 
    
    color: #007aff !important;
    
    /* „Äê‰øÆÊîπ„ÄëÂ≠ó‰ΩìÁ≤óÁªÜÊîπ‰∏∫Ê≠£Â∏∏Ôºå‰∏çÂÜçÂä†Á≤ó */
    font-weight: 500 !important; 
    
    border-radius: 10px !important;
    border: none !important;
    box-shadow: none !important; /* ÂéªÊéâÈò¥ÂΩ± */
}

/* 5. ÈªëÈáë/Â§úÈó¥Ê®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #message-actions-modal .custom-modal-footer button:not(#cancel-message-action-btn),
#phone-screen.dark-mode #message-actions-modal #cancel-message-action-btn {
    background-color: #2c2c2e !important; /* Áªü‰∏ÄÊ∑±ÁÅ∞Âùó */
    color: #0a84ff !important;
}
/* ========================================= */
/* ‚ñº‚ñº‚ñº ÊîØ‰ªòÂÆù UI ÁæéÂåñÁâà (Modern Fintech) ‚ñº‚ñº‚ñº */
/* ========================================= */

/* 1. Â±èÂπïÊï¥‰ΩìÂÆπÂô® */
#alipay-screen {
    /* ÂÆö‰πâÂèòÈáèÔºöÈªòËÆ§Ë¥¢ÂØåËìù‰∏ªÈ¢ò */
    --alipay-header-bg: linear-gradient(180deg, #1677ff 0%, #0a5ad3 100%);
    --alipay-bg-color: #f5f7fa; /* Êõ¥ÊüîÂíåÁöÑÊµÖÁÅ∞Â∫ïËâ≤ */
    --alipay-card-bg: #ffffff;
    --alipay-text-primary: #1f1f1f;
    --alipay-text-secondary: #8a8a8a;
    --alipay-money-font: -apple-system, BlinkMacSystemFont, "DIN Alternate", "Roboto", sans-serif;
    
    background-color: var(--alipay-bg-color);
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* 2. Â§¥ÈÉ®Âå∫Âüü (ÂåÖÂê´ÂØºËà™Ê†èÂíåËìùËâ≤ËÉåÊôØÂ±Ç) */
.alipay-header-area {
    background: var(--alipay-header-bg);
    color: white;
    padding-top: calc(10px + env(safe-area-inset-top));
    padding-bottom: 60px; /* ÁïôÂá∫Á©∫Èó¥ÁªôÂç°Áâá‰∏äÊµÆ */
    border-radius: 0 0 20px 20px; /* Â∫ïÈÉ®ÂæÆÂúÜËßí */
    flex-shrink: 0;
    position: relative;
    z-index: 1;
}

/* ÂØºËà™Ê†è */
.alipay-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 15px;
    height: 44px;
    font-size: 17px;
    font-weight: 500;
}

.alipay-nav .back-btn {
    font-size: 24px;
    font-weight: 300;
    cursor: pointer;
    width: 30px;
    opacity: 0.9;
}

.alipay-action {
    font-size: 15px;
    opacity: 0.9;
    cursor: pointer;
    padding: 4px 10px;
    background: rgba(255,255,255,0.15);
    border-radius: 15px;
    backdrop-filter: blur(5px);
    transition: background 0.2s;
}
.alipay-action:active {
    background: rgba(255,255,255,0.3);
}

/* 3. Âç°ÁâáÂÆπÂô® (Ë¥üË¥£‰∏äÊµÆÂ∏ÉÂ±Ä) */
.alipay-card-container {
    flex-grow: 1;
    overflow-y: auto; /* ËÆ©Âç°ÁâáÂíå‰∏ãÊñπÂÜÖÂÆπÊï¥‰ΩìÊªöÂä® */
    padding: 0 12px;
    margin-top: -50px; /* Ê†∏ÂøÉÔºöÂç°Áâá‰∏äÊµÆË¶ÜÁõñËìùËâ≤ËÉåÊôØ */
    position: relative;
    z-index: 2;
    /* ÈöêËóèÊªöÂä®Êù° */
    -webkit-overflow-scrolling: touch;
}
.alipay-card-container::-webkit-scrollbar { display: none; }

/* 4. ÊÄªËµÑ‰∫ßÂç°Áâá (Ê∑±Ëâ≤Ë¥®ÊÑüÂç°Áâá) */
.alipay-balance-card {
    background: linear-gradient(180deg, #1677ff 0%, #0a5ad3 100%);
    color: #fff;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 8px 20px rgba(22, 119, 255, 0.2);
    position: relative;
    overflow: hidden;
    margin-bottom: 12px;
}

/* Âç°ÁâáÂÜÖÈÉ®Ë£ÖÈ•∞ÂÖâÁ∫π */
.alipay-balance-card::after {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(255,255,255,0.05) 0%, transparent 70%);
    pointer-events: none;
}

.balance-label {
    font-size: 13px;
    opacity: 0.7;
    margin-bottom: 4px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.balance-amount {
    font-family: var(--alipay-money-font);
    font-size: 38px;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.balance-status-tag {
    font-size: 11px;
    padding: 2px 8px;
    background: rgba(255,255,255,0.15);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 4px;
    color: rgba(255,255,255,0.9);
    backdrop-filter: blur(4px);
}

/* 5. ÂäüËÉΩËèúÂçïÁΩëÊ†º (Funds, etc.) */
.alipay-grid-menu {
    display: grid;
    grid-template-columns: 1fr; /* ‰øùÊåÅÂçïË°åÔºå‰πüÂèØ‰ª•ÊîπÊàê 1fr 1fr */
    gap: 10px;
    margin-bottom: 12px;
}

.alipay-menu-item {
    background: var(--alipay-card-bg);
    padding: 16px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    cursor: pointer;
    transition: transform 0.1s;
}
.alipay-menu-item:active {
    transform: scale(0.98);
}

.menu-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background: #eff4ff; /* ÊµÖËìùÂ∫ï */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.menu-info {
    flex-grow: 1;
}

.menu-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--alipay-text-primary);
    margin-bottom: 2px;
}

.menu-trend {
    font-size: 12px;
    color: #ff3b30; /* Á∫¢Ê∂® */
    font-family: var(--alipay-money-font);
    font-weight: 500;
}

.menu-arrow {
    color: #ccc;
    font-size: 16px;
}

/* 6. ‰∫≤Â±ûÂç°Âå∫Âüü */
#alipay-kinship-section-wrapper {
    margin-bottom: 15px;
}
.kinship-section-title {
    font-size: 15px;
    font-weight: 600;
    color: var(--alipay-text-primary);
    margin-left: 5px;
}

/* ‰∫≤Â±ûÂç°ÂÆπÂô® */
#alipay-kinship-section {
    display: flex;
    overflow-x: auto;
    gap: 10px;
    padding: 10px 5px 15px 5px; /* ÁïôÂá∫Èò¥ÂΩ±Á©∫Èó¥ */
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
}
#alipay-kinship-section::-webkit-scrollbar { display: none; }

/* ‰∫≤Â±ûÂç°ÂçïÂç° */
.kinship-card-entry {
    flex-shrink: 0;
    width: 85%; /* Á®çÂæÆÈú≤Âá∫‰∏ã‰∏ÄÂº† */
    max-width: 300px;
    background: linear-gradient(135deg, #ff5252, #e00f38);
    border-radius: 12px;
    padding: 16px;
    color: white;
    position: relative;
    box-shadow: 0 4px 12px rgba(255, 82, 82, 0.3);
    overflow: hidden;
}

.kinship-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}
.kinship-provider {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
    background: rgba(0,0,0,0.1);
    padding: 4px 10px 4px 4px;
    border-radius: 20px;
}
.kinship-provider img {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.6);
}
.kinship-limit {
    font-family: var(--alipay-money-font);
    font-size: 26px;
    font-weight: 700;
}
.kinship-label {
    font-size: 11px;
    opacity: 0.8;
    margin-bottom: 2px;
}

/* 7. Ë¥¶ÂçïÂå∫Âüü */
.alipay-bill-container {
    background-color: var(--alipay-card-bg);
    border-radius: 16px;
    padding: 0;
    overflow: hidden; /* ÂÜÖÈÉ®ÊªöÂä® */
    box-shadow: 0 2px 15px rgba(0,0,0,0.04);
    margin-bottom: 20px; /* Â∫ïÈÉ®ÁïôÁôΩ */
    min-height: 300px;
}

/* Ë¥¶ÂçïÁ≠õÈÄâÂ§¥ */
.bill-filter-header {
    padding: 15px;
    background: var(--alipay-card-bg);
    border-bottom: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Ë¥¶ÂçïÂàóË°® */
#bill-scroll-list {
    max-height: 500px; /* Áªô‰∏™ÊúÄÂ§ßÈ´òÂ∫¶ÔºåÈò≤Ê≠¢ÊíëÁ†¥È°µÈù¢ */
    overflow-y: auto;
}

.bill-month-separator {
    background-color: #f9f9f9;
    padding: 8px 15px;
    font-size: 12px;
    color: #999;
    font-weight: 500;
    position: sticky;
    top: 0;
}

.bill-item {
    padding: 16px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #f7f7f7;
}
.bill-item:last-child { border-bottom: none; }

.bill-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.bill-title {
    font-size: 15px;
    color: var(--alipay-text-primary);
    font-weight: 500;
}
.bill-time {
    font-size: 12px;
    color: #ccc;
}
.bill-amount {
    font-family: var(--alipay-money-font);
    font-size: 17px;
    font-weight: 600;
}
.bill-amount.income { color: #ff3b30; }
.bill-amount.expense { color: var(--alipay-text-primary); }


/* 8. ÈªëÈáë‰∏ªÈ¢òÈÄÇÈÖç (Black Gold Theme) */
#alipay-screen.theme-blackgold {
    --alipay-header-bg: #1a1a1a; /* Á∫ØÈªëÂ§¥ÈÉ® */
    --alipay-bg-color: #121212;
    --alipay-card-bg: #1c1c1e;
    --alipay-text-primary: #e5e5e5;
    --alipay-text-secondary: #888;
}

#alipay-screen.theme-blackgold .alipay-balance-card {
    background: linear-gradient(135deg, #2a2a2a, #000);
    border: 1px solid #333;
    color: #d4af37; /* ÈáëËâ≤ */
    box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}
#alipay-screen.theme-blackgold .balance-label,
#alipay-screen.theme-blackgold .balance-status-tag {
    color: rgba(212, 175, 55, 0.8);
    border-color: rgba(212, 175, 55, 0.3);
}

#alipay-screen.theme-blackgold .menu-icon {
    background: #2c2c2e;
    color: #d4af37;
}
#alipay-screen.theme-blackgold .menu-trend {
    color: #d4af37; /* ‰πüÊòØÈáëËâ≤ */
}

#alipay-screen.theme-blackgold .bill-filter-header {
    border-bottom-color: #333;
}
#alipay-screen.theme-blackgold .bill-month-separator {
    background-color: #121212;
    color: #666;
}
#alipay-screen.theme-blackgold .bill-item {
    border-bottom-color: #333;
}
#alipay-screen.theme-blackgold .bill-amount.expense {
    color: #fff;
}
#alipay-screen.theme-blackgold .bill-amount.income {
    color: #d4af37;
}
#alipay-screen.theme-blackgold .kinship-section-title {
    color: #d4af37;
}
#alipay-screen.theme-blackgold #add-kinship-btn {
    color: #d4af37 !important;
}
/* ========================================= */
/* ‚ñº‚ñº‚ñº ËµõÂçöÈªëÂ∏ÇÊãçÂçñË°å 2.0 (UI ÈáçÊûÑ) ‚ñº‚ñº‚ñº */
/* ========================================= */

/* 1. ÂÖ®Â±èËÉåÊôØÔºöÊ∑±ÈÇÉÁöÑÁΩëÊ†ºËÉåÊôØ */
#auction-screen {
    background-color: #050505 !important;
    background-image: 
        linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 30px 30px;
    color: #e0e0e0;
    font-family: 'Courier New', Courier, monospace; /* ÁªàÁ´ØÂ≠ó‰ΩìÊÑü */
}

/* 2. Â§¥ÈÉ®ÔºöÈúìËôπËæπÊ°Ü */
#auction-screen .header {
    background-color: rgba(20, 20, 20, 0.9) !important;
    border-bottom: 1px solid #333;
    box-shadow: 0 0 15px rgba(0, 255, 242, 0.1);
}
#auction-screen .header span {
    color: #00f3ff !important;
    text-shadow: 0 0 5px rgba(0, 243, 255, 0.5);
    font-weight: 800;
    letter-spacing: 1px;
}

/* 3. ÊãçÂìÅÂ±ïÁ§∫Âå∫ÔºöÂÖ®ÊÅØÊäïÂΩ±ÊÑü */
#auction-main-display {
    height: auto !important;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: radial-gradient(circle at center, #1a1a2e 0%, #000000 80%);
}

#auction-item-image-container {
    border: 2px solid #00f3ff !important;
    box-shadow: 0 0 20px rgba(0, 243, 255, 0.2), inset 0 0 20px rgba(0, 243, 255, 0.1) !important;
    border-radius: 4px !important; /* Á°¨ÊúóÁöÑËßí */
    position: relative;
}
/* Êâ´ÊèèÁ∫øÂä®Áîª */
#auction-item-image-container::after {
    content: '';
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, transparent 50%, rgba(0, 255, 255, 0.1) 51%, transparent 52%);
    background-size: 100% 10px;
    animation: scanline 5s linear infinite;
    pointer-events: none;
}
@keyframes scanline { 0% {background-position: 0 0;} 100% {background-position: 0 100%;} }

#auction-item-name {
    font-family: -apple-system, sans-serif;
    font-weight: 900;
    font-size: 24px !important;
    color: #fff !important;
    text-shadow: 2px 2px 0px #ff0055; /* ÊïÖÈöúÈ£éÈò¥ÂΩ± */
    margin-top: 15px !important;
}

#auction-item-desc {
    color: #00f3ff !important;
    opacity: 0.8;
    border: 1px dashed #00f3ff;
    padding: 8px;
    background: rgba(0, 243, 255, 0.05);
    margin-top: 10px !important;
    max-width: 90%;
}

/* 4. Á´û‰ª∑Èù¢ÊùøÔºöÊéßÂà∂Âè∞È£éÊ†º */
#auction-screen > div:last-child { /* ÊåáÂêëÂ∫ïÈÉ®ÁöÑÁôΩËâ≤Èù¢Êùø */
    background-color: #111 !important;
    border-top: 2px solid #ff0055; /* ÊíûËâ≤ËæπÊ°Ü */
    border-radius: 0 !important; /* ÊñπÊ≠£ */
    box-shadow: 0 -5px 30px rgba(255, 0, 85, 0.15) !important;
}

/* ÂΩìÂâç‰ª∑Ê†ºÂ§ßÂ≠ó */
#auction-current-price {
    color: #ff0055 !important;
    text-shadow: 0 0 10px rgba(255, 0, 85, 0.5);
    font-family: 'DIN Alternate', sans-serif; /* Êï∞Â≠óÂ≠ó‰Ωì */
}

/* ÂÄíËÆ°Êó∂ */
#auction-timer {
    color: #f0ad4e !important; /* Ë≠¶ÂëäÈªÑ */
    font-family: monospace;
}

/* 5. ÊªöÂä®Êó•ÂøóÔºöÁªàÁ´ØÊï∞ÊçÆÊµÅ */
#auction-log {
    background: #000;
    border: 1px solid #333;
    font-family: monospace;
    padding: 5px;
    margin-bottom: 15px;
}
#auction-log div {
    border-bottom: none !important;
    padding: 2px 5px !important;
    font-size: 12px;
}
#auction-log .bid-me { color: #00ff00 !important; text-shadow: 0 0 5px #00ff00; } /* ÊàëÂá∫‰ª∑ÁªøËâ≤È´ò‰∫Æ */
#auction-log .bid-friend { color: #00f3ff !important; }
#auction-log .bid-npc { color: #666 !important; }

/* 6. ÊåâÈíÆÁªÑÔºöÊú∫Ê¢∞ÊÑü */
#auction-controls {
    gap: 8px !important;
}
#auction-controls button {
    border-radius: 2px !important; /* ÊñπÂΩ¢ÊåâÈíÆ */
    text-transform: uppercase;
    font-weight: 800 !important;
    letter-spacing: 1px;
    transition: all 0.1s;
}

/* Âä†‰ª∑ÊåâÈíÆ */
#auction-controls .form-button-secondary {
    background: #222 !important;
    border: 1px solid #444 !important;
    color: #ccc !important;
}
#auction-controls .form-button-secondary:active {
    background: #fff !important;
    color: #000 !important;
}

/* Ê†∏ÂøÉÂá∫‰ª∑ÊåâÈíÆ */
#auction-controls .form-button {
    background: #ff0055 !important; /* ÈúìËôπÁ∫¢ */
    color: #fff !important;
    box-shadow: 0 0 15px rgba(255, 0, 85, 0.4);
    border: none !important;
}
#auction-controls .form-button:active {
    transform: scale(0.95);
    box-shadow: 0 0 5px rgba(255, 0, 85, 0.8);
}
#auction-log .bid-friend { 
    color: #ff00ff !important; /* ‰∫ÆÁ≤âËâ≤ */
    font-weight: 900 !important;
    font-size: 14px !important;
    border-left: 3px solid #ff00ff; /* Â∑¶‰æßÂä†‰∏™Á≤âÊù° */
    padding-left: 8px !important;
    background: rgba(255, 0, 255, 0.1); /* ÂæÆÂº±ËÉåÊôØ */
    text-shadow: 0 0 5px #ff00ff; /* ÈúìËôπÂÖâÊôï */
}
/* 1. Â§¥ÈÉ®Ôºö‰∏çÂÜçÊ†πÊçÆÊâãÊú∫ÂàòÊµ∑Ëá™Âä®ÂèòÈ´òÔºåÂº∫Âà∂Âõ∫ÂÆö */
.alipay-header-area {
    /* Ê†∏ÂøÉÔºöÁõ¥Êé•ÂÜôÊ≠ªÊï∞Â≠óÔºå‰∏ç‰ΩøÁî® env() ÂèòÈáè */
    padding-top: 25px !important; 
    
    /* ‰øùÊåÅ‰∏ãÊñπÁïôÁôΩÁªôÂç°Áâá‰∏äÊµÆ */
    padding-bottom: 50px !important; 
    
    /* Ê∏ÖÈô§ÊâÄÊúâË¥üËæπË∑ùÂπ≤Êâ∞ÔºåÂõûÂΩíÊ†áÂáÜ‰ΩçÁΩÆ */
    margin-top: 0 !important; 
}

/* 2. ÂØºËà™Ê†èÔºöÂæÆË∞É‰ΩçÁΩÆÔºåÁ°Æ‰øùÊñáÂ≠óÂûÇÁõ¥Â±Ö‰∏≠ */
.alipay-nav {
    /* ‰∏çÈúÄË¶ÅË¥üËæπË∑ù‰∫ÜÔºåÂõ†‰∏∫Â§¥ÈÉ® padding Â∑≤ÁªèÂõ∫ÂÆö */
    transform: none !important; 
    padding-top: 5px !important;
}

/* 3. Âç°ÁâáÂÆπÂô®ÔºöÊ†áÂáÜÁöÑ‰∏äÊµÆË∑ùÁ¶ª */
.alipay-card-container {
    /* ËÆ©Âç°ÁâáÂæÄ‰∏äÁõñ‰ΩèËìùËâ≤ËÉåÊôØ 40px */
    margin-top: -40px !important; 
    position: relative;
    z-index: 5;
}

/* 4. Ë¥¶ÂçïÂàóË°®ÔºöÊ†πÊçÆ‰Ω†ÁöÑÂñúÂ•ΩÔºåÁ¥ßË¥¥‰∫≤Â±ûÂç° */
.alipay-bill-container {
    /* ËøôÈáå‰øùÁïô‰Ω†‰πãÂâçÂñúÊ¨¢ÁöÑÁ¥ßÂáëÊÑü */
    margin-top: -50px !important; 
    
    /* Ê†∏ÂøÉÔºöÂéªÊéâÊâãÊú∫Â∫ïÈÉ®ÁöÑÂÆâÂÖ®Âå∫ÁïôÁôΩÔºåÂº∫Âà∂Áªü‰∏Ä */
    padding-bottom: 20px !important; 
    margin-bottom: 0 !important;
    border-radius: 16px 16px 0 0 !important;
}

/* 5. ‰øÆÊ≠£‰∫≤Â±ûÂç°ÁöÑÈ´òÂ∫¶Èò≤Ê≠¢Ë¢´ÂéãÊâÅ */
#alipay-kinship-section {
    margin-bottom: 0 !important;
    padding-bottom: 10px !important;
    min-height: auto !important;
}
/* 1. Âº∫Âà∂ËÉåÊôØÈÄèÊòéÔºåÂéªÊéâÈò¥ÂΩ± */
.icon-bg-desktop.transparent-mode {
    background-color: transparent !important;
    box-shadow: none !important;
    border: none !important;
}

/* 2. ËÆ©ÂÜÖÈÉ®ÂõæÁâáÊíëÊª°ÔºåÂπ∂‰∏çÂº∫Âà∂ÂúÜËßíÔºà‰øùÊåÅPNGÂéüÂΩ¢Ôºâ */
.icon-bg-desktop.transparent-mode img {
    width: 100% !important;
    height: 100% !important;
    border-radius: 0 !important; /* ‰∏çÂàáÂúÜËßíÔºå‰øùÊåÅÂõæÁâáÂéüÊ†∑ */
    object-fit: contain !important; /* ‰øùÊåÅÊØî‰æãÔºå‰∏çÊãâ‰º∏ */
    transform: scale(1.1); /*Á®çÂæÆÊîæÂ§ß‰∏ÄÁÇπÁÇπËßÜËßâË°•ÂÅøÔºåÂõ†‰∏∫Ê≤°ÊúâËÉåÊôØÊ°Ü‰∫Ü */
}
/* --- È°µÈù¢Â∏ÉÂ±ÄË∞ÉÊï¥ --- */

/* 1. ÂÆö‰πâÂè≥‰æßÂàóÁöÑÂ†ÜÂè†ÊñπÂºè (ÂûÇÁõ¥ÊéíÂàó) */
.right-column-stack {
    display: flex;
    flex-direction: column;
    gap: 15px; /* ‰∏ä‰∏ãÁªÑ‰ª∂ÁöÑÈó¥Ë∑ù */
    min-width: 0; /* Èò≤Ê≠¢Ë¢´Êå§Âéã */
}

/* --- ÈªëËÉ∂Âî±ÁâáÊú∫ÁªÑ‰ª∂Ê†∑Âºè --- */

/* 2. ÁªÑ‰ª∂Âç°ÁâáÂ§ñÊ°Ü */
.vinyl-widget-card {
    width: 155px !important;  /* Âº∫Âà∂Âõ∫ÂÆöÂÆΩÂ∫¶ÔºåÂíåÂ∑¶‰æßÂ§ßÁªÑ‰ª∂‰∏ÄËá¥ */
    height: 155px !important; /* Âº∫Âà∂Âõ∫ÂÆöÈ´òÂ∫¶Ôºå‰øùÊåÅÊ≠£ÊñπÂΩ¢ */
    background-color: white;
    border-radius: 20px;
    padding: 15px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    position: relative;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    flex-shrink: 0; /* Èò≤Ê≠¢Ë¢´Êå§Âéã */
}

/* 3. È°∂ÈÉ®ÂºÄÂÖ≥Ë£ÖÈ•∞ */
.vinyl-header {
    height: 20px;
    display: flex;
    align-items: center;
}
.vinyl-switch {
    width: 46px;
    height: 20px;
    position: relative;
}
.switch-track {
    background-color: #f0f0f0;
    border-radius: 10px;
    width: 100%;
    height: 100%;
    font-size: 10px;
    color: #ccc;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 6px;
    box-sizing: border-box;
    font-weight: bold;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
}
.switch-circle {
    width: 16px;
    height: 16px;
    background-color: white;
    border-radius: 50%;
    position: absolute;
    top: 2px;
    left: 2px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* 4. ‰∏≠Èó¥ÈÉ®ÂàÜÂ∏ÉÂ±Ä */
.vinyl-body {
    flex-grow: 1;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* 5. ÈªëËÉ∂Âî±ÁâáÁ∫πÁêÜ */
.vinyl-disc-bg {
    width: 100px; /* Âî±ÁâáÂ§ßÂ∞è */
    height: 100px;
    border-radius: 50%;
    background: repeating-radial-gradient(
      #111 0, 
      #111 2px, 
      #222 3px, 
      #222 4px
    ); 
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 1;
    border: 4px solid #f5f5f5; /* ÁôΩËâ≤Â§ñÂúà */
}

/* 6. ‰∏≠Èó¥ÂèØÊç¢ÂõæÁâá (ÂúÜÂΩ¢Â∞ÅÈù¢) */
.vinyl-cover {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #111;
    cursor: pointer;
    transition: opacity 0.2s;
}
.vinyl-cover:active {
    opacity: 0.7;
}

/* 7. Âî±ÈíàË£ÖÈ•∞ */
.vinyl-arm-wrapper {
    position: absolute;
    right: -10px;
    top: -10px;
    width: 50px;
    height: 120px;
    z-index: 2;
    pointer-events: none;
    filter: drop-shadow(2px 4px 4px rgba(0,0,0,0.1));
    transform: rotate(0deg); /* ÂèØË∞ÉÊï¥ËßíÂ∫¶ */
}

/* 8. Â∫ïÈÉ®ÊñáÂ≠ó */
.vinyl-footer {
    text-align: center;
    font-size: 12px;
    color: #666;
    font-weight: 500;
    margin-top: 5px;
}

/* --- ÈÄÇÈÖçÊöóÈªëÊ®°Âºè --- */
#phone-screen.dark-mode .vinyl-widget-card {
    background-color: #2c2c2e;
}
#phone-screen.dark-mode .vinyl-disc-bg {
    border-color: #3a3a3c;
}
#phone-screen.dark-mode .vinyl-footer {
    color: #aaa;
}
#phone-screen.dark-mode .switch-track {
    background-color: #3a3a3c;
    color: #666;
}


/* --- ÈÄèÊòéÈªëËÉ∂Âî±ÁâáÊú∫Ê†∑Âºè --- */

/* 1. ÈÄèÊòéÂÆπÂô®ÔºöÂéªÊéâÁôΩËâ≤ËÉåÊôØÂíåÈò¥ÂΩ±ÔºåÂè™ÂÅöÂÆö‰Ωç */
.vinyl-transparent-widget {
    width: 155px !important; /* ‰øùÊåÅÂíåÂÖ∂‰ªñÁªÑ‰ª∂‰∏ÄÊ†∑Â§ß */
    height: 155px !important;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    /* ÂÖ≥ÈîÆÔºöËÉåÊôØÈÄèÊòéÔºåÊó†ËæπÊ°ÜÔºåÊó†Èò¥ÂΩ± */
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    flex-shrink: 0;
}

/* 2. ÈªëËÉ∂Âî±ÁâáÁ∫πÁêÜ */
.vinyl-disc-bg {
    width: 135px; /* Á®çÂæÆË∞ÉÂ§ß‰∏ÄÁÇπ */
    height: 135px;
    border-radius: 50%;
    background: repeating-radial-gradient(
      #111 0, 
      #111 2px, 
      #222 3px, 
      #222 4px
    ); 
    /* Âä†Âº∫Èò¥ÂΩ±ÔºåËÆ©ÂÆÉÊúâÊµÆËµ∑Êù•ÁöÑÊÑüËßâ */
    box-shadow: 0 8px 25px rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 1;
    border: 3px solid #f5f5f5;
}

/* 3. ‰∏≠Èó¥ÂèØÊç¢ÂõæÁâá */
.vinyl-cover {
    width: 75px;
    height: 75px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #111;
    cursor: pointer;
    transition: opacity 0.2s;
}
.vinyl-cover:active {
    opacity: 0.7;
}

/* 4. Âî±ÈíàË£ÖÈ•∞ (Ë∞ÉÊï¥‰ΩçÁΩÆ‰ª•ÈÄÇÂ∫îÊó†ËæπÊ°Ü) */
.vinyl-arm-wrapper {
    position: absolute;
    right: 0px; 
    top: 0px;   
    width: 50px;
    height: 120px;
    z-index: 2;
    pointer-events: none;
    filter: drop-shadow(3px 6px 8px rgba(0,0,0,0.3)); /* Âä†Âº∫Èò¥ÂΩ± */
}

/* --- ÁßªÈô§ÂéüÊù•ÁöÑÊöóÈªëÊ®°ÂºèÈÄÇÈÖç (Âõ†‰∏∫Áé∞Âú®ÊòØÈÄèÊòéÁöÑ‰∫Ü) --- */
/* Âè™‰øùÁïôÂî±ÁâáÂ§ñÂúàÈ¢úËâ≤ÁöÑÈÄÇÈÖç */
#phone-screen.dark-mode .vinyl-disc-bg {
    border-color: #3a3a3c;
}

.left-column-stack {
    display: flex;
    flex-direction: column;
    gap: 30px; /* <--- ÊääËøôÈáåÁöÑ 15px ÊîπÂ§ßÔºåÊØîÂ¶Ç 30px */
}

/* --- 1. Âè≥‰æßÂàóÂÆπÂô®Â∏ÉÂ±Ä --- */
.right-column-stack {
    display: flex;
    flex-direction: column;
    gap: 30px; /* ‰∏ä‰∏ãÈó¥Ë∑ù */
    min-width: 0;
    
    /* „ÄêÂÖ≥ÈîÆ„ÄëËÆ©ÂÜÖÈÉ®ÂÖÉÁ¥†Èù†Âè≥ÂØπÈΩê (Ë¥¥ËøëÂ±èÂπïÂè≥‰æß) */
    /* Â¶ÇÊûúÊÇ®ÂñúÊ¨¢Èù†Â∑¶Ë¥¥ÁùÄ‰∏≠Èó¥ÁºùÈöôÔºåÊîπÊàê flex-start */
    align-items: flex-end; 
}

/* --- 2. Âè≥‰æß 4‰∏™APP ÁöÑÁΩëÊ†ºÂ∏ÉÂ±Ä --- */
.app-subgrid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px; /* ÂõæÊ†áÈó¥Ë∑ù */
    
    /* „ÄêÂÖ≥ÈîÆ„ÄëÂº∫Âà∂Âõ∫ÂÆöÂÆΩÂ∫¶Ôºå‰∏éÂ∑¶‰æßÂ§ßÁªÑ‰ª∂/Âî±ÁâáÊú∫‰∏ÄËá¥ */
    width: 155px !important; 
    
    /* ËÆ©ÂõæÊ†áÂú®Ê†ºÂ≠êÈáåÂ±Ö‰∏≠ */
    justify-items: center;
}

/* --- 3. ÂÜçÊ¨°Á°Æ‰øùÈÄèÊòéÂî±ÁâáÊú∫‰πüÊòØÂõ∫ÂÆöÂ§ßÂ∞è --- */
.vinyl-transparent-widget {
    width: 155px !important;
    height: 155px !important;
    /* ...ÂÖ∂‰ªñÊ†∑Âºè‰øùÊåÅ‰∏çÂèò... */
}
/* ÂêàÊàêÈü≥‰πêÂç°ÁâáÊ†∑Âºè */
.message-bubble.is-music-synth .content {
    padding: 0 !important;
    background: transparent !important;
}

.synth-music-card {
    background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%); /* Ê∏ÖÊñ∞ÁöÑÊ∏êÂèòËâ≤ */
    border-radius: 12px;
    padding: 12px 15px;
    display: flex;
    align-items: center;
    gap: 12px;
    width: 220px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border: 1px solid rgba(255,255,255,0.5);
}

#phone-screen.dark-mode .synth-music-card {
    background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);
    border-color: #444;
}

.synth-icon {
    font-size: 24px;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
}

.synth-info {
    flex-grow: 1;
    overflow: hidden;
}

.synth-title {
    font-weight: 600;
    font-size: 15px;
    color: #333;
    margin-bottom: 2px;
}

#phone-screen.dark-mode .synth-title {
    color: #fff;
}

.synth-reason {
    font-size: 12px;
    color: #666;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#phone-screen.dark-mode .synth-reason {
    color: #ddd;
}

.synth-play-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: none;
    background-color: rgba(255,255,255,0.6);
    color: #007bff;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.synth-play-btn:active {
    transform: scale(0.9);
}

.synth-play-btn.playing {
    background-color: #007bff;
    color: white;
    animation: pulse-play 1s infinite;
}

@keyframes pulse-play {
    0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.7); }
    70% { box-shadow: 0 0 0 6px rgba(0, 123, 255, 0); }
    100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
}
/* --- ‰øÆÂ§çÈªëÂ∏ÇÂ§¥ÈÉ®Â∏ÉÂ±ÄÈîôËØØ --- */

/* 1. Ëß£Èô§ÊåâÈíÆÂÆΩÂ∫¶ÈôêÂà∂ÔºåËÆ©ÊñáÂ≠óÊ®™ÂêëÊòæÁ§∫ */
#auction-screen .header .action-btn {
    width: auto !important;      /* ÂèñÊ∂àÂõ∫ÂÆö30px */
    min-width: 30px;
    padding: 4px 12px !important; /* Â¢ûÂä†ÂÜÖËæπË∑ù */
    font-size: 14px !important;
    white-space: nowrap;         /* Âº∫Âà∂‰∏çÊç¢Ë°å */
}

/* 2. Á°Æ‰øùÂè≥‰∏äËßíÊåâÈíÆÁªÑÊ®™ÂêëÊéíÂàó */
#auction-screen .header .header-actions {
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
    z-index: 20; /* Á°Æ‰øùÂú®ÊúÄ‰∏äÂ±ÇÔºåÂèØÁÇπÂáª */
}

/* 3. ‰ªìÂ∫ìÂºπÁ™óÁöÑÊ†∑Âºè */
.inventory-item {
    display: flex;
    gap: 12px;
    background-color: #252525;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 12px;
    border: 1px solid #333;
    position: relative;
}

.inventory-img {
    width: 70px;
    height: 70px;
    object-fit: cover;
    border-radius: 6px;
    border: 1px solid #444;
    background-color: #000;
}

.inventory-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.inventory-name {
    font-size: 16px;
    font-weight: bold;
    color: #d4af37;
    margin-bottom: 4px;
}

.inventory-desc {
    font-size: 12px;
    color: #999;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}

.inventory-price {
    font-size: 12px;
    color: #555;
    margin-top: 4px;
    font-family: monospace;
}

.inventory-use-btn {
    position: absolute;
    right: 10px;
    bottom: 10px;
    background: linear-gradient(135deg, #d4af37, #f2d06b);
    color: #000;
    border: none;
    border-radius: 4px;
    padding: 4px 10px;
    font-size: 12px;
    font-weight: bold;
    cursor: pointer;
}
/* --- To-Do List Ê†∑Âºè --- */

/* Êó•ÊúüÂØºËà™Ê†è */
.todo-date-navigator {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background-color: #fff;
    border-bottom: 1px solid var(--border-color);
    flex-shrink: 0;
}
.todo-date-navigator button {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--accent-color);
    cursor: pointer;
    padding: 0 10px;
}
#todo-current-date-display {
    font-size: 17px;
    font-weight: 600;
    color: var(--text-primary);
}

/* ‰ªªÂä°Âç°Áâá */
.todo-item {
    background-color: #fff;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 12px;
    display: flex;
    align-items: flex-start; /* ÂØπÈΩêÈ°∂ÈÉ®ÔºåÈÄÇÂ∫îÂ§öË°åÊñáÊú¨ */
    gap: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
}
.todo-item.completed {
    opacity: 0.6;
    background-color: #f9f9f9;
}

/* Â§çÈÄâÊ°ÜÊ†∑Âºè */
.todo-checkbox {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2px solid #c7c7cc;
    flex-shrink: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    margin-top: 2px; /* ÂæÆË∞ÉÂØπÈΩê */
}
.todo-item.completed .todo-checkbox {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}
.todo-item.completed .todo-checkbox::after {
    content: '‚úî';
    color: white;
    font-size: 14px;
}

/* ‰ªªÂä°ÂÜÖÂÆπ */
.todo-info {
    flex-grow: 1;
    min-width: 0;
}
.todo-content {
    font-size: 16px;
    color: var(--text-primary);
    margin-bottom: 6px;
    line-height: 1.4;
    word-break: break-word;
}
.todo-item.completed .todo-content {
    text-decoration: line-through;
    color: var(--text-secondary);
}
.todo-meta {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
}

/* Ê†áÁ≠æ Tag */
.todo-tag {
    padding: 2px 8px;
    border-radius: 6px;
    color: white;
    font-weight: 500;
    font-size: 11px;
    background-color: var(--tag-color, #8e8e93);
}

/* Êó∂Èó¥ÊòæÁ§∫ */
.todo-time {
    color: #ff3b30; /* Á∫¢Ëâ≤Âº∫Ë∞ÉÊó∂Èó¥ */
    font-weight: 500;
}
.todo-item.completed .todo-time {
    color: var(--text-secondary);
}

/* Âà†Èô§ÊåâÈíÆ */
.todo-delete-btn {
    padding: 5px 10px;
    color: #ff3b30;
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    margin-left: 5px;
}

/* Á©∫Áä∂ÊÄÅ */
.todo-empty-state {
    text-align: center;
    color: var(--text-secondary);
    margin-top: 50px;
}

/* --- Á±ªÂûãÈÄâÊã©Âô®Ê†∑Âºè --- */
.todo-type-selector {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}
.todo-type-option {
    padding: 6px 12px;
    border-radius: 15px;
    border: 1px solid #e5e5ea;
    font-size: 14px;
    cursor: pointer;
    color: var(--text-primary);
    background-color: #fff;
    transition: all 0.2s;
}
.todo-type-option.active {
    background-color: var(--tag-color);
    color: white;
    border-color: var(--tag-color);
}

/* --- ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç --- */
#phone-screen.dark-mode #todo-list-screen {
    background-color: #000 !important;
}
#phone-screen.dark-mode .todo-date-navigator {
    background-color: #1c1c1e;
    border-bottom-color: #38383a;
}
#phone-screen.dark-mode .todo-item {
    background-color: #1c1c1e;
}
#phone-screen.dark-mode .todo-item.completed {
    background-color: #121212;
}
#phone-screen.dark-mode .todo-type-option {
    background-color: #2c2c2e;
    border-color: #38383a;
    color: #fff;
}
/* --- ÂæÖÂäû‰∫ãÈ°πÔºöÂ∑¶Âè≥ÂàÜÊ†èÂ∏ÉÂ±Ä (Chat Style) --- */

/* 1. AI ÂàõÂª∫ÁöÑ (ÈªòËÆ§Èù†Â∑¶) - ‰øùÊåÅÂéüÊ†∑ÔºåÂæÆË∞ÉÈó¥Ë∑ù */
.todo-item.is-char {
    flex-direction: row; /* ÈªòËÆ§ÊñπÂêëÔºöÂ§öÈÄâÊ°Ü -> ÂÜÖÂÆπ -> Âà†Èô§ */
}

/* 2. Áî®Êà∑ÂàõÂª∫ÁöÑ (Èù†Âè≥) - ‰ΩøÁî® row-reverse ÁøªËΩ¨Â∏ÉÂ±Ä */
.todo-item.is-user {
    flex-direction: row-reverse; /* ÁøªËΩ¨ÊñπÂêëÔºöÂà†Èô§ -> ÂÜÖÂÆπ -> Â§öÈÄâÊ°Ü */
    background-color: #e7f3ff;   /* ÂèØÈÄâÔºöÁªôÁî®Êà∑ÂèëÁöÑÊ∞îÊ≥°Âä†‰∏ÄÁÇπÊ∑°Ê∑°ÁöÑËìùËâ≤ËÉåÊôØÔºåÂå∫ÂàÜÊõ¥ÊòéÊòæ */
}

/* 3. Áî®Êà∑ÂÜÖÂÆπÁöÑÊñáÂ≠óÂØπÈΩê */
.todo-item.is-user .todo-info {
    text-align: right;       /* ÊñáÂ≠óÈù†Âè≥ */
    align-items: flex-end;   /* Â¶ÇÊûúÂÜÖÈÉ®ÊòØ flexÔºåÂàôÈù†Âè≥ÂØπÈΩê */
}

/* 4. Ê†áÁ≠æÂíåÊó∂Èó¥ÁöÑÂØπÈΩê */
.todo-item.is-user .todo-meta {
    justify-content: flex-end; /* Ê†áÁ≠æÂíåÊó∂Èó¥Èù†Âè≥ÊéíÂàó */
}

/* 5. Èó¥Ë∑ù‰øÆÊ≠£ (Âõ†‰∏∫ÁøªËΩ¨‰∫ÜÔºåmarginÊñπÂêë‰πüË¶ÅÂèçËøáÊù•) */
.todo-item.is-user .todo-checkbox {
    margin-right: 0;
    margin-left: 12px; /* Checkbox Âú®ÊúÄÂè≥ËæπÔºåÁªôÂ∑¶ËæπÁïôÁ©∫Èöô */
}

.todo-item.is-user .todo-delete-btn {
    margin-left: 0;
    margin-right: 5px; /* Âà†Èô§ÊåâÈíÆÂú®ÊúÄÂ∑¶ËæπÔºåÁªôÂè≥ËæπÁïôÁ©∫Èöô */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .todo-item.is-user {
    background-color: #1a2a3a; /* ÊöóÈªëÊ®°Âºè‰∏ãÁöÑÊ∑±ËìùËâ≤ËÉåÊôØ */
}
#todo-current-date-display {
    cursor: pointer;       /* Èº†Ê†áÊÇ¨ÂÅúÂèòÂ∞èÊâã */
    user-select: none;     /* Èò≤Ê≠¢ÂèåÂáªÈÄâ‰∏≠ÊñáÂ≠ó */
    transition: opacity 0.2s;
    padding: 5px 10px;     /* Â¢ûÂä†‰∏ÄÁÇπÁÇπÂáªÂå∫Âüü */
    border-radius: 8px;
}

#todo-current-date-display:active {
    background-color: rgba(0, 0, 0, 0.05); /* ÁÇπÂáªÊó∂ÁöÑÈ´ò‰∫ÆÂèçÈ¶à */
    opacity: 0.6;
}
/* --- Green River (ÁªøÊ±ü) ÊûÅÁÆÄÈ´òÁ´ØÈ£éÊ†º --- */
:root {
    --gr-primary: #1B4F3E;       /* Ê∑±Â¢®Áªø */
    --gr-accent: #2E7D32;        /* Âº∫Ë∞ÉÁªø */
    --gr-bg: #FAFAF9;            /* ÊöñÁôΩ/Ë±°ÁâôÁôΩ */
    --gr-surface: #FFFFFF;       /* Á∫ØÁôΩÂç°Áâá */
    --gr-text-main: #1C1C1E;     /* Ê∑±Èªë */
    --gr-text-sub: #8E8E93;      /* ‰∏≠ÁÅ∞ */
    --gr-border: #E5E5E5;        /* ÊûÅÁªÜËæπÊ°Ü */
    --gr-shadow: 0 4px 20px rgba(0,0,0,0.03);
}

/* ÂÖ®Â±Ä‰∏ªÈ¢ò */
.gr-theme {
    background-color: var(--gr-bg) !important;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color: var(--gr-text-main);
}

/* Â§¥ÈÉ®Ê†∑Âºè - ÊûÅËá¥ÁÆÄÁ∫¶ */
.gr-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 24px;
    padding-top: calc(15px + env(safe-area-inset-top));
    background-color: rgba(250, 250, 249, 0.95); /* Á£®Á†ÇËÉåÊôØ */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    position: sticky;
    top: 0;
    z-index: 10;
    border-bottom: 1px solid transparent; /* ÈªòËÆ§Êó†ËæπÊ°Ü */
}

.gr-title {
    font-family: "Georgia", serif; /* Ë°¨Á∫ø‰ΩìÂ¢ûÂä†ÊñáÂ≠¶ÊÑü */
    font-size: 20px;
    font-weight: 600;
    color: var(--gr-primary);
    letter-spacing: 0.5px;
}

.gr-icon-btn {
    background: none;
    border: none;
    color: var(--gr-text-main);
    padding: 8px;
    cursor: pointer;
    opacity: 0.7;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}
.gr-icon-btn:hover {
    opacity: 1;
    background-color: rgba(0,0,0,0.03);
}

/* ÂÜÖÂÆπÂå∫Âüü */
.gr-content-area {
    padding: 24px;
    overflow-y: auto;
    flex-grow: 1;
}

/* Ê†áÈ¢ò‰∏éÂàÜÂâ≤ */
.gr-section-header {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
}
.gr-section-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--gr-text-sub);
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* ‰π¶Á±çÂàóË°® (Grid) */
.gr-grid-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 20px;
}

/* ‰π¶Á±çÂç°Áâá */
.gr-book-card {
    background: var(--gr-surface);
    border-radius: 12px;
    padding: 20px;
    box-shadow: var(--gr-shadow);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    border: 1px solid var(--gr-border);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 120px;
}
.gr-book-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.06);
    border-color: var(--gr-primary);
}

.gr-book-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--gr-text-main);
    margin-bottom: 8px;
    line-height: 1.4;
}
.gr-book-meta {
    font-size: 12px;
    color: var(--gr-text-sub);
    display: flex;
    align-items: center;
    gap: 5px;
}

/* ‰ΩúËÄÖÂàóË°®È°π */
.gr-author-item {
    background: var(--gr-surface);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
    box-shadow: var(--gr-shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid var(--gr-border);
}
.gr-author-info h3 {
    margin: 0 0 4px 0;
    font-size: 16px;
    color: var(--gr-text-main);
}
.gr-author-info p {
    margin: 0;
    font-size: 13px;
    color: var(--gr-text-sub);
    max-width: 250px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ÈòÖËØªÂô®Ê≠£Êñá */
.gr-reader-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: 30px 24px 100px 24px; /* Â∫ïÈÉ®ÁïôÁôΩÁªôËæìÂÖ•Ê°Ü */
    font-family: "Georgia", "Songti SC", serif; /* Ë°¨Á∫ø‰ΩìÈÄÇÂêàÈòÖËØª */
    font-size: 17px;
    line-height: 1.8;
    color: #333;
}

.gr-chapter {
    margin-bottom: 40px;
}
.gr-chapter-text {
    white-space: pre-wrap;
    margin-bottom: 15px;
}

/* ÊëòË¶ÅÊäòÂè†Âùó */
.gr-summary-box {
    background-color: #F4F4F5;
    border-radius: 8px;
    padding: 12px 16px;
    margin-bottom: 20px;
    font-family: sans-serif;
}
.gr-summary-box summary {
    cursor: pointer;
    font-size: 13px;
    color: var(--gr-text-sub);
    font-weight: 500;
    list-style: none; /* ÈöêËóèÈªòËÆ§‰∏âËßí */
    display: flex;
    align-items: center;
    gap: 6px;
}
.gr-summary-box summary::before {
    content: '‚ñ∏'; 
    display: inline-block;
    transition: transform 0.2s;
}
.gr-summary-box[open] summary::before {
    transform: rotate(90deg);
}
.gr-summary-content {
    font-size: 14px;
    color: #666;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid #E5E5E5;
    line-height: 1.6;
}

/* Â∫ïÈÉ®ÊéßÂà∂Ê†è */
.gr-control-panel {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(20px);
    padding: 16px 24px;
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
    border-top: 1px solid var(--gr-border);
    box-sizing: border-box;
}

.gr-input-group {
    display: flex;
    gap: 12px;
    align-items: center;
}

.gr-input {
    flex-grow: 1;
    background: #F4F4F5;
    border: 1px solid transparent;
    border-radius: 20px;
    padding: 12px 16px;
    font-size: 15px;
    outline: none;
    transition: all 0.2s;
}
.gr-input:focus {
    background: #FFF;
    border-color: var(--gr-primary);
    box-shadow: 0 0 0 3px rgba(27, 79, 62, 0.1);
}

.gr-main-btn {
    background-color: var(--gr-primary);
    color: white;
    border: none;
    border-radius: 20px;
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: transform 0.1s, opacity 0.2s;
    flex-shrink: 0;
}
.gr-main-btn:active {
    transform: scale(0.96);
}
.gr-main-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* ÂºπÁ™óÂÜÖË°®ÂçïÂÖÉÁ¥† */
.gr-form-group {
    margin-bottom: 20px;
}
.gr-form-group label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--gr-text-main);
    margin-bottom: 8px;
}
.gr-select {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fff;
    font-size: 15px;
    outline: none;
}
.gr-checkbox-list {
    max-height: 150px;
    overflow-y: auto;
    border: 1px solid #ddd;
    border-radius: 10px;
    background: #fff;
    padding: 5px;
}
.gr-checkbox-item {
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    border-radius: 6px;
}
.gr-checkbox-item:hover {
    background-color: #F5F5F7;
}
.gr-checkbox-item input {
    accent-color: var(--gr-primary);
    width: 16px;
    height: 16px;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .gr-theme,
#phone-screen.dark-mode .gr-header,
#phone-screen.dark-mode .gr-control-panel,
#phone-screen.dark-mode .gr-book-card,
#phone-screen.dark-mode .gr-author-item,
#phone-screen.dark-mode .modal-content {
    background-color: #1C1C1E !important;
    color: #FFFFFF;
}
#phone-screen.dark-mode .gr-title,
#phone-screen.dark-mode .gr-section-title,
#phone-screen.dark-mode .gr-book-title,
#phone-screen.dark-mode .gr-author-info h3,
#phone-screen.dark-mode .gr-form-group label {
    color: #FFFFFF;
}
#phone-screen.dark-mode .gr-reader-content {
    color: #E0E0E0;
}
#phone-screen.dark-mode .gr-summary-box {
    background-color: #2C2C2E;
}
#phone-screen.dark-mode .gr-summary-content {
    color: #AAAAAA;
    border-top-color: #38383A;
}
#phone-screen.dark-mode .gr-input,
#phone-screen.dark-mode .gr-select,
#phone-screen.dark-mode .gr-checkbox-list {
    background-color: #2C2C2E;
    border-color: #38383A;
    color: #FFFFFF;
}
#phone-screen.dark-mode .gr-icon-btn {
    color: #FFFFFF;
}
#phone-screen.dark-mode .gr-book-card:hover {
    border-color: #2E7D32; /* ÊöóÈªëÊ®°Âºè‰∏ãÁöÑÁªøËâ≤È´ò‰∫Æ */
}
/* ÁªøÊ±üÔºöÊëòË¶ÅÁºñËæëÊ°ÜÊ†∑Âºè */
.gr-summary-input {
    width: 100%;
    background-color: transparent;
    border: 1px dashed transparent; /* ÈªòËÆ§Êó†ËæπÊ°Ü */
    font-family: inherit;
    font-size: 13px;
    color: #333;
    resize: vertical;
    padding: 5px;
    box-sizing: border-box;
    transition: all 0.2s;
    min-height: 60px;
}

/* ÂΩìÂÆÉÊòØÂèØÁºñËæëÁä∂ÊÄÅÔºàÊúÄÂêé‰∏ÄÁ´†ÔºâÊó∂ */
.gr-summary-box.editable {
    background-color: #fffbe6; /* Ê∑°ÈªÑËâ≤ËÉåÊôØÔºåÊèêÁ§∫ËøôÊòØÂ≠òÊ°£Âå∫ */
    border: 1px solid #e0e0e0;
}

.gr-summary-box.editable .gr-summary-input {
    border-color: #ddd; /* ÊòæÁ§∫ËôöÁ∫øÊ°Ü */
    background-color: rgba(255, 255, 255, 0.5);
}

.gr-summary-box.editable .gr-summary-input:focus {
    background-color: #fff;
    border-color: var(--gr-primary);
    outline: none;
}

.gr-mini-btn {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 4px;
    border: 1px solid var(--gr-primary);
    background-color: var(--gr-primary);
    color: white;
    cursor: pointer;
}
/* --- ÁªøÊ±üÈòÖËØªÂô®Êñ∞Ê†∑Âºè (Jinjiang Style) --- */

/* 1. ‰æßËæπÊ†è (Drawer) */
#gr-sidebar-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(2px);
    z-index: 90;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
}
#gr-sidebar-overlay.visible {
    opacity: 1;
    visibility: visible;
}

#gr-chapter-sidebar {
    position: absolute;
    top: 0;
    left: 0;
    width: 75%; /* ‰æßËæπÊ†èÂÆΩÂ∫¶ */
    height: 100%;
    background: var(--gr-bg);
    z-index: 100;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 2px 0 15px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
}
#gr-chapter-sidebar.visible {
    transform: translateX(0);
}

.gr-sidebar-header {
    padding: 20px;
    padding-top: calc(20px + env(safe-area-inset-top));
    border-bottom: 1px solid var(--gr-border);
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#gr-chapter-list-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px 0;
}

.gr-sidebar-item {
    padding: 15px 20px;
    border-bottom: 1px solid #f5f5f5;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    transition: background 0.2s;
}
.gr-sidebar-item:hover {
    background-color: rgba(0,0,0,0.02);
}
.gr-sidebar-item.active {
    color: var(--gr-primary);
    font-weight: 600;
    background-color: rgba(27, 79, 62, 0.05);
}
.gr-sidebar-item span {
    margin-left: 10px;
}

/* 2. Â∫ïÈÉ®ÊéßÂà∂Ê†èË∞ÉÊï¥ */
.gr-control-panel {
    display: flex;
    flex-direction: column;
    gap: 10px;
    /* Á°Æ‰øùÂõ∫ÂÆöÂú®Â∫ïÈÉ® */
    position: absolute;
    bottom: 0;
}

.gr-text-btn {
    background: transparent;
    border: none;
    color: var(--gr-primary);
    font-size: 14px;
    font-weight: 600;
    padding: 10px 20px;
    cursor: pointer;
}
.gr-text-btn:disabled {
    color: #ccc;
    cursor: default;
}

/* 3. Ê≠£ÊñáÂå∫ÂüüÂæÆË∞É */
.gr-reader-content {
    padding-bottom: 120px; /* ÁªôÂ∫ïÈÉ®Ê†èÁïôÂá∫Ë∂≥Â§üÁ©∫Èó¥ */
}
.gr-chapter-title-large {
    font-family: "Georgia", serif;
    font-size: 22px;
    font-weight: bold;
    text-align: center;
    margin: 20px 0 30px 0;
    color: #111;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #gr-chapter-sidebar {
    background-color: #1c1c1e;
    border-right: 1px solid #333;
}
#phone-screen.dark-mode .gr-sidebar-item {
    color: #ddd;
    border-bottom-color: #2c2c2e;
}
#phone-screen.dark-mode .gr-sidebar-item.active {
    background-color: rgba(255,255,255,0.1);
    color: #fff;
}
/* --- ÁªøÊ±üÔºöÈ´òÁ´ØÊëòË¶ÅÂç°ÁâáÈáçÊûÑ --- */

/* 1. Âç°ÁâáÂÆπÂô®ÔºöÂπ≤ÂáÄ„ÄÅÊÇ¨ÊµÆÊÑü */
.gr-summary-card.editable {
    background-color: #FFFFFF; /* Á∫ØÂáÄÁôΩÂ∫ï */
    border: 1px solid rgba(0,0,0,0.05); /* Âá†‰πé‰∏çÂèØËßÅÁöÑÊûÅÁªÜËæπÊ°Ü */
    border-radius: 12px; /* Êõ¥Â§ßÁöÑÂúÜËßíÔºåÁé∞‰ª£ÊÑü */
    padding: 24px; /* ÂÖÖË∂≥ÁöÑÂÜÖÈÉ®ÁïôÁôΩÔºåÂëºÂê∏ÊÑü */
    box-shadow: 0 8px 30px rgba(0,0,0,0.04); /* ÊûÅËΩªÊüîÁöÑÈ´òÁ∫ßÁÅ∞Èò¥ÂΩ± */
    margin-top: 40px; /* ‰∏éÊ≠£ÊñáÊãâÂºÄÊõ¥Â§ßË∑ùÁ¶ªÔºåÂΩ∞ÊòæÈáçË¶ÅÊÄß */
    transition: all 0.3s ease;
}
/* Èº†Ê†áÊÇ¨ÂÅúÊó∂Á®çÂæÆÂº∫Ë∞É‰∏Ä‰∏ã */
.gr-summary-card.editable:hover {
    box-shadow: 0 10px 40px rgba(0,0,0,0.06);
    border-color: rgba(27, 79, 62, 0.1);
}

/* 2. Âç°ÁâáÂ§¥ÈÉ® */
.gr-summary-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

/* Ê†áÈ¢òÔºö‰ΩøÁî®‰ºòÈõÖÁöÑË°¨Á∫ø‰ΩìÔºåÂìÅÁâåËâ≤ */
.gr-summary-title {
    font-family: "Georgia", "Songti SC", serif; /* Ë°¨Á∫ø‰Ωì */
    color: var(--gr-primary); /* Ê∑±Â¢®Áªø */
    font-size: 16px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

/* 3. ËæìÂÖ•Ê°ÜÊú¨‰ΩìÔºöÊûÅÁÆÄ„ÄÅËûçÂÖ•ËÉåÊôØ */
.gr-summary-input {
    width: 100%;
    box-sizing: border-box; /* ÂÖ≥ÈîÆÔºöÈò≤Ê≠¢paddingÊíëÁ†¥ÂÆΩÂ∫¶ */
    background-color: #F9F9F9; /* ÊûÅÊ∑°ÁöÑÁÅ∞Ôºå‰∏éÁ∫ØÁôΩÂç°ÁâáÂΩ¢ÊàêÂæÆÂº±ÂØπÊØî */
    border: 1px solid #EAEAEA; /* ÊûÅÁªÜÊ∑°ÁÅ∞ËæπÊ°Ü */
    border-radius: 8px;
    padding: 16px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; /* ËæìÂÖ•ÂÜÖÂÆπÁî®Êó†Ë°¨Á∫ø‰ΩìÊõ¥Ê∏ÖÊô∞ */
    font-size: 14px;
    color: #333;
    line-height: 1.7;
    resize: vertical;
    min-height: 100px;
    outline: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ËæìÂÖ•Ê°ÜËÅöÁÑ¶Áä∂ÊÄÅÔºöÊòæÁé∞ÂìÅÁâåÊÑü */
.gr-summary-input:focus {
    background-color: #FFFFFF; /* ËÅöÁÑ¶ÂèòÁ∫ØÁôΩ */
    border-color: var(--gr-primary); /* ËæπÊ°ÜÂèòÂìÅÁâåÁªø */
    box-shadow: 0 0 0 4px rgba(27, 79, 62, 0.05); /* ÊûÅÂæÆÂº±ÁöÑÁªøËâ≤ÂÖâÊôï */
}
.gr-summary-input::placeholder {
    color: #CCC;
}

/* 4. Â∫ïÈÉ®ÊèêÁ§∫Â∞èÂ≠óÔºöÂº±ÂåñÂ§ÑÁêÜ */
.gr-summary-footer {
    font-size: 12px;
    color: #AAA; /* Êõ¥ÊµÖÁöÑÁÅ∞Ëâ≤ */
    margin-top: 12px;
    text-align: right; /* Âè≥ÂØπÈΩêÔºå‰∏çÂπ≤Êâ∞ËßÜÁ∫ø */
    font-weight: 400;
}

/* ‰øùÂ≠òÊåâÈíÆÂæÆË∞É */
.gr-mini-btn.save-summary-btn {
    background-color: transparent;
    color: var(--gr-primary);
    border: 1px solid var(--gr-primary);
    padding: 6px 12px;
    font-weight: 500;
    opacity: 0; /* ÈªòËÆ§ÈöêËóèÔºåËæìÂÖ•Êó∂JS‰ºöËÆ©ÂÆÉÊòæÁ§∫ÔºåËøôÈáåÈÖçÂêàJS */
    transition: all 0.2s;
}
/* JSÊéßÂà∂ÊòæÁ§∫Êó∂ÁöÑÊ†∑Âºè */
.gr-mini-btn.save-summary-btn[style*="display: block"] {
    opacity: 1;
}
.gr-mini-btn.save-summary-btn:hover {
    background-color: var(--gr-primary);
    color: white;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .gr-summary-card.editable {
    background-color: #2C2C2E;
    border-color: #3A3A3C;
}
#phone-screen.dark-mode .gr-summary-title {
    color: #FFFFFF;
}
#phone-screen.dark-mode .gr-summary-input {
    background-color: #1C1C1E;
    border-color: #3A3A3C;
    color: #EEE;
}
#phone-screen.dark-mode .gr-summary-input:focus {
    background-color: #000;
    border-color: var(--gr-primary);
}
#phone-screen.dark-mode .gr-summary-footer {
    color: #666;
}
/* ‰ΩúËÄÖÂàóË°®È°πÁöÑÊìç‰ΩúÊåâÈíÆÂÆπÂô® */
.gr-author-actions {
    display: flex;
    gap: 10px; /* ÊåâÈíÆ‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    align-items: center;
}

/* Â¶ÇÊûú‰πãÂâçÊ≤°ÊúâÂÆö‰πâ gr-inputÔºåË°•ÂÖÖ‰∏Ä‰∏ã‰ª•Èò≤‰∏á‰∏Ä */
.gr-input {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #f9f9f9;
    font-size: 15px;
    outline: none;
    box-sizing: border-box;
}
.gr-input:focus {
    background: #fff;
    border-color: #1B4F3E;
}
/* ========================================== */
/* ‚ñº‚ñº‚ñº ÁªøÊ±ü (Green River) È£éÊ†ºÁªàÊûÅ‰øÆÊ≠£ ‚ñº‚ñº‚ñº */
/* ========================================== */

/* 1. È°∂Ê†èÂ∏ÉÂ±Ä‰∏éÂÆΩÂ∫¶Áªü‰∏Ä (ÂØπÈΩêQQÈ£éÊ†º) */
.gr-header {
    /* 1. Â∏ÉÂ±Ä‰∏éÂ∞∫ÂØ∏ÔºöÂº∫Âà∂Âç†Êª°ÂÆΩÂ∫¶ */
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    width: 100% !important;
    box-sizing: border-box !important;
    
    /* 2. È´òÂ∫¶Ê†∏ÂøÉ‰øÆÂ§çÔºöÂØπÈΩê QQ Â§¥ÈÉ®È´òÂ∫¶ */
    /* QQ Â§¥ÈÉ®Ê†∑Âºè‰∏∫: padding: 15px 20px; padding-top: 45px; */
    padding: 15px 20px !important; 
    padding-top: 45px !important; /* ÂÖ≥ÈîÆÔºöÂº∫Âà∂È¢ÑÁïô 45px Áä∂ÊÄÅÊ†èÈ´òÂ∫¶ */
    
    /* 3. ÂÆö‰Ωç‰∏éÂ§ñËßÇ */
    position: sticky !important;
    top: 0 !important;
    z-index: 100 !important;
    background-color: rgba(250, 250, 249, 0.98) !important;
    border-bottom: 1px solid #E5E5E5 !important;
    flex-shrink: 0 !important; /* Èò≤Ê≠¢Ë¢´ÂÜÖÂÆπÊå§Âéã */
}

/* Á°Æ‰øùÊ†áÈ¢òÂ≠ó‰Ωì‰∏é QQ Â§¥ÈÉ®Â§ßÂ∞èÁõ∏ËøëÔºå‰ΩÜ‰øùÊåÅÁªøÊ±üÈ£éÊ†º */
.gr-title {
    font-family: "Georgia", "Songti SC", serif !important;
    font-size: 20px !important; /* Á®çÂæÆÂ§ß‰∏ÄÁÇπÁÇπÔºåÊòæÂæóÊõ¥ÊúâÊñáÂ≠¶ÊÑüÔºå‰ΩçÁΩÆÂ±Ö‰∏≠ */
    font-weight: 700 !important;
    color: #1B4F3E !important;
    /* ÁªùÂØπÂÆö‰ΩçÂ±Ö‰∏≠ (ÂèØÈÄâÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÁªùÂØπÂ±Ö‰∏≠ÂØπÈΩêËØ∑Ëß£ÂºÄ‰∏ãÈù¢Ê≥®ÈáäÔºåÂê¶Âàô‰øùÊåÅ Flex Â±Ö‰∏≠) */
    /* position: absolute;
    left: 50%;
    transform: translateX(-50%);
    */
}

/* ‰øÆÂ§çÂè≥‰æßÊåâÈíÆÂÆπÂô®ÔºåÁ°Æ‰øùÊ®™ÂêëÊéíÂàó */
.gr-header-actions {
    display: flex !important;
    flex-direction: row !important;
    gap: 15px !important;
    align-items: center !important;
    /* Á°Æ‰øùÂÆÉÂú®ÊúÄ‰∏äÂ±ÇÔºåÂ¶ÇÊûú‰ΩøÁî®‰∫ÜÊ†áÈ¢òÁªùÂØπÂÆö‰Ωç */
    z-index: 10 !important; 
}

/* ‰øÆÊ≠£ÊåâÈíÆÊú¨Ë∫´ÁöÑÂ§ßÂ∞èÂíåÂØπÈΩê */
.gr-header .gr-icon-btn {
    width: 32px !important;
    height: 32px !important;
    padding: 6px !important;
    margin: 0 !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    /* ÂéªÊéâÂèØËÉΩÂØºËá¥Êç¢Ë°åÁöÑÂ±ûÊÄß */
    flex: none !important; 
}

/* 3. ‰ΩúËÄÖÂàóË°®È°πÂÜÖÊåâÈíÆÂº∫Âà∂Ê®™Âêë */
.gr-author-actions {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 10px !important;
}

/* 4. ÁªøÊ±ü‰∏ìÂ±ûÊ®°ÊÄÅÁ™óÊ†∑Âºè (Áªü‰∏Ä‰∏∫‚ÄúÊ∑ªÂä†‰π¶‚ÄùÁöÑÈ´òÁ´ØÈ£éÊ†º) */
#gr-author-editor-modal .modal-content {
    background-color: #FAFAF9 !important; /* ÊöñÁôΩËÉåÊôØ */
    border-radius: 16px !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1) !important;
    padding: 0 !important;
    overflow: hidden !important;
}

/* ÂºπÁ™óÂ§¥ÈÉ® */
#gr-author-editor-modal .modal-header {
    background: transparent !important;
    border-bottom: none !important;
    padding: 25px 25px 10px 25px !important;
    justify-content: flex-start !important; /* Ê†áÈ¢òÈù†Â∑¶ÊàñÂ±Ö‰∏≠ÔºåËøôÈáåÈÄâÈù†Â∑¶Êõ¥ÂÉè‰π¶ */
}

#gr-author-editor-modal .modal-header span {
    font-family: "Georgia", "Songti SC", serif !important;
    color: #1B4F3E !important; /* Â¢®ÁªøËâ≤ */
    font-size: 22px !important;
    font-weight: 700 !important;
}

/* ÂºπÁ™ó‰∏ª‰Ωì */
#gr-author-editor-modal .modal-body {
    padding: 10px 25px 30px 25px !important;
}

/* ËæìÂÖ•Ê°ÜÁªÑ */
#gr-author-editor-modal .form-group {
    margin-bottom: 20px !important;
}

/* Ê†áÁ≠æ */
#gr-author-editor-modal label {
    color: #1B4F3E !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    margin-bottom: 8px !important;
    display: block !important;
    opacity: 0.8;
}

/* ËæìÂÖ•Ê°ÜÊú¨‰Ωì */
#gr-author-editor-modal input,
#gr-author-editor-modal textarea {
    background-color: #FFFFFF !important;
    border: 1px solid #E5E5E5 !important;
    border-radius: 10px !important;
    padding: 15px !important;
    font-size: 16px !important;
    color: #333 !important;
    width: 100% !important;
    box-sizing: border-box !important;
    font-family: -apple-system, sans-serif !important;
    transition: all 0.2s !important;
}

#gr-author-editor-modal input:focus,
#gr-author-editor-modal textarea:focus {
    border-color: #1B4F3E !important;
    box-shadow: 0 0 0 3px rgba(27, 79, 62, 0.05) !important;
    outline: none !important;
}

/* ÂºπÁ™óÂ∫ïÈÉ® */
#gr-author-editor-modal .modal-footer {
    border-top: 1px solid #E5E5E5 !important;
    padding: 15px 25px !important;
    background-color: #FFFFFF !important;
    gap: 15px !important;
}

/* ÊåâÈíÆ */
#gr-author-editor-modal .modal-footer button {
    border-radius: 25px !important;
    padding: 12px 0 !important;
    font-size: 15px !important;
    font-weight: 600 !important;
    border: none !important;
}

#gr-author-editor-modal .modal-footer .cancel {
    background-color: #F5F5F7 !important;
    color: #8E8E93 !important;
    width: 30% !important;
}

#gr-author-editor-modal .modal-footer .save {
    background-color: #1B4F3E !important;
    color: #FFFFFF !important;
    width: 70% !important;
    box-shadow: 0 4px 15px rgba(27, 79, 62, 0.2) !important;
}
/* === Mail App Theme (‰øÆÂ§çÁâà) === */
:root {
    --mail-bg: #F2F2F7;
    --mail-surface: #FFFFFF;
    --mail-text-primary: #000000;
    --mail-text-secondary: #8E8E93;
    --mail-accent: #007AFF;
    --mail-separator: #C6C6C8;
    --mail-border-radius: 12px;
}

/* ‰∏ªÂ±èÂπïËÉåÊôØ */
#email-screen {
    background-color: var(--mail-bg);
    color: var(--mail-text-primary);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
    display: flex;         /* Êñ∞Â¢ûÔºöÊîπ‰∏∫FlexÂ∏ÉÂ±Ä‰ª•‰æøÊéßÂà∂ÊªöÂä® */
    flex-direction: column;
}

/* --- 1. Â§¥ÈÉ®Âå∫Âüü (Áªü‰∏ÄQQÈ£éÊ†º) --- */
.mail-header, .mail-detail-header {
    /* Ê†∏ÂøÉ‰øÆÂ§çÔºöÈ´òÂ∫¶ÂíåÂÜÖËæπË∑ù‰∏é QQ ‰øùÊåÅ‰∏ÄËá¥ */
    padding: 15px 20px !important;
    padding-top: 45px !important; /* ÈÅøÂºÄÂàòÊµ∑ */
    background-color: rgba(242, 242, 247, 0.95); /* Áï•Â∏¶ÈÄèÊòéËÉåÊôØ */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    position: sticky;
    top: 0;
    z-index: 10;
    border-bottom: 0.5px solid #C6C6C8;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    min-height: 40px;
}

/* ËØ¶ÊÉÖÈ°µÂ§¥ÈÉ®ËÉåÊôØÊîπ‰∏∫Á∫ØÁôΩÔºå‰∏éËØ¶ÊÉÖÈ°µ‰∏ÄËá¥ */
.mail-detail-header {
    background-color: rgba(255, 255, 255, 0.95);
}

/* Â§¥ÈÉ®‰∏äÊñπÁöÑÂÆπÂô® (Áî®‰∫éÂÆπÁ∫≥ËøîÂõûÊåâÈíÆÂíåÊ†áÈ¢ò) */
.mail-header-top {
    display: contents; /* ÂèñÊ∂àËøôÂ±ÇÂÆπÂô®ÁöÑÂ∏ÉÂ±ÄÂΩ±ÂìçÔºåÁõ¥Êé•ËÆ©Â≠êÂÖÉÁ¥†ÂèÇ‰∏é Grid/Flex */
}

/* 2. ÊåâÈíÆÊ†∑ÂºèÁªü‰∏Ä */
.mail-icon-btn {
    background: none;
    border: none;
    color: var(--mail-accent);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 5px; /* Â¢ûÂä†ÁÇπÂáªÂå∫Âüü */
    cursor: pointer;
    font-size: 16px;
    font-weight: 500;
    transition: opacity 0.2s;
}
.mail-icon-btn:active { opacity: 0.6; }
.mail-icon-btn svg {
    width: 24px;
    height: 24px;
}

/* Âè≥‰∏äËßíÊìç‰ΩúÂå∫ */
.mail-header-actions {
    display: flex;
    align-items: center;
    gap: 15px; /* ÊåâÈíÆÈó¥Ë∑ù */
}

/* 3. Êî∂‰ª∂ÁÆ±Â§ßÊ†áÈ¢ò (‰∏ãÁßªÔºå‰∏çÂç†Áî®È°∂Ê†è) */
.mail-large-title {
    font-size: 30px;
    font-weight: 700;
    margin: 10px 20px 10px 20px; /* Â∑¶Âè≥ËæπË∑ùÂØπÈΩêÂàóË°® */
    letter-spacing: -0.5px;
    color: #000;
}

/* 4. ÊêúÁ¥¢Ê†è */
.mail-search-bar {
    background-color: rgba(118, 118, 128, 0.12);
    border-radius: 10px;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0 16px 10px 16px; /* Â¢ûÂä†Â§ñËæπË∑ù */
}
.mail-search-bar input {
    background: transparent;
    border: none;
    font-size: 16px;
    width: 100%;
    outline: none;
    color: #000;
}

/* 5. ÂàóË°®ÂÆπÂô® */
.mail-list-container {
    background-color: var(--mail-surface);
    border-radius: var(--mail-border-radius);
    margin: 0 16px; /* ‰∏§‰æßÁïôÁôΩ */
    flex-grow: 1;
    overflow-y: auto;
    box-shadow: 0 1px 2px rgba(0,0,0,0.02);
    padding-bottom: 20px;
}

/* 6. ËØ¶ÊÉÖÈ°µÂÜÖÂÆπË∞ÉÊï¥ */
.mail-detail-content {
    padding: 20px;
    overflow-y: auto;
    flex-grow: 1; /* Âç†Êª°Ââ©‰ΩôÁ©∫Èó¥ */
    height: auto; /* ÂèñÊ∂àÂõ∫ÂÆöÈ´òÂ∫¶ËÆ°ÁÆó */
    background-color: #fff;
}

/* 7. ÈöêËóèÂ∫ïÈÉ®Â∑•ÂÖ∑Ê†è */
.mail-toolbar {
    display: none !important;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .mail-header,
#phone-screen.dark-mode .mail-detail-header {
    background-color: #000;
    border-bottom-color: #38383A;
}
#phone-screen.dark-mode .mail-detail-content {
    background-color: #000;
}
#phone-screen.dark-mode .mail-large-title { color: #fff; }


/* ========================================= */
/* ‚ñº‚ñº‚ñº Swiss Minimalist Mail Theme ‚ñº‚ñº‚ñº */
/* ========================================= */

:root {
    /* Ê†∏ÂøÉËâ≤Êùø - ÊûÅÁÆÄ„ÄÅÂÜ∑Ê∑°„ÄÅÈ´òÁ∫ß */
    --mail-bg: #F2F2F7;            /* iOSÁ≥ªÁªüÁ∫ßÊµÖÁÅ∞ËÉåÊôØ */
    --mail-surface: #FFFFFF;       /* Á∫ØÂáÄÁôΩ */
    --mail-text-main: #1C1C1E;     /* Ê∑±ÁÇ≠ÈªëÔºåÈùûÁ∫ØÈªë */
    --mail-text-sub: #8E8E93;      /* ‰∏≠ÊÄßÁÅ∞ */
    --mail-accent: #007AFF;        /* ÁëûÂ£´Ëìù (Swiss Blue) */
    --mail-border: rgba(0, 0, 0, 0.04); /* ÊûÅÁªÜÂæÆÁöÑËæπÁïå */
    --mail-divider: #C6C6C8;       /* ÂàÜÂâ≤Á∫ø */
    --mail-radius-l: 16px;         /* Â§ßÂúÜËßí */
    --mail-radius-m: 10px;         /* ‰∏≠ÂúÜËßí */
    --mail-radius-s: 6px;          /* Â∞èÂúÜËßí */
    --mail-shadow: 0 4px 24px rgba(0, 0, 0, 0.03); /* ÊºÇÊµÆÊÑüÈò¥ÂΩ± */
}

/* ÊöóÈªëÊ®°ÂºèÂèòÈáèÈáçÂÜô */
#phone-screen.dark-mode {
    --mail-bg: #000000;
    --mail-surface: #1C1C1E;
    --mail-text-main: #FFFFFF;
    --mail-text-sub: #98989D;
    --mail-border: rgba(255, 255, 255, 0.1);
    --mail-divider: #38383A;
    --mail-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

/* ÈÇÆÁÆ±‰∏ªÂÆπÂô® */
#email-screen, #email-detail-screen {
    background-color: var(--mail-bg) !important;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
    letter-spacing: -0.01em; /* Êî∂Á¥ßÂ≠óÈó¥Ë∑ùÔºåÊõ¥Á≤æËá¥ */
}



/* --- 2. Ê†áÈ¢ò‰∏éÊêúÁ¥¢Ê†è --- */
.mail-large-title {
    font-size: 34px;
    font-weight: 700;
    color: var(--mail-text-main);
    margin: 10px 20px 15px 20px !important;
    letter-spacing: 0.01em;
}

.mail-search-bar {
    background-color: rgba(118, 118, 128, 0.12);
    border-radius: 10px;
    margin: 0 16px 16px 16px;
    padding: 10px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background-color 0.2s;
}
.mail-search-bar:focus-within {
    background-color: rgba(118, 118, 128, 0.18);
}
.mail-search-bar input {
    font-size: 17px;
    color: var(--mail-text-main);
    height: auto;
}
.mail-search-bar input::placeholder {
    color: var(--mail-text-sub);
}

/* --- 3. ÈÇÆ‰ª∂ÂàóË°® (List) --- */
.mail-list-container {
    background-color: var(--mail-bg) !important; /* ËÉåÊôØÈÄèÊòéÔºåÊòæÁ§∫Â±ÇÁ∫ß */
    padding: 0 16px !important; /* ‰∏§‰æßÁïôÁôΩ */
    border-radius: 0 !important;
    box-shadow: none !important;
    margin: 0 !important;
    gap: 12px; /* ÂàóË°®È°πÈó¥Ë∑ù */
    display: flex;
    flex-direction: column;
}

.mail-item {
    background-color: var(--mail-surface);
    border-radius: var(--mail-radius-m);
    padding: 16px !important;
    margin-bottom: 0 !important; /* Áî± gap ÊéßÂà∂ */
    border: 1px solid var(--mail-border);
    box-shadow: 0 2px 8px rgba(0,0,0,0.02); /* ÊûÅËΩªÁöÑÈò¥ÂΩ± */
    position: relative;
    transition: transform 0.1s, background-color 0.2s;
}

.mail-item:active {
    transform: scale(0.98);
    background-color: var(--mail-bg);
}

/* Êú™ËØªÁä∂ÊÄÅÔºöÂ∑¶‰æßËìùÁÇπ */
.mail-item.unread::before {
    content: '';
    position: absolute;
    left: 10px;
    top: 20px;
    width: 8px;
    height: 8px;
    background-color: var(--mail-accent);
    border-radius: 50%;
    box-shadow: 0 0 8px rgba(0, 122, 255, 0.4);
}
.mail-item.unread {
    padding-left: 26px !important; /* ‰∏∫ËìùÁÇπÁïôÂá∫Á©∫Èó¥ */
}

/* ÂàóË°®ÊéíÁâà‰ºòÂåñ */
.mail-item-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 4px;
}

.mail-sender {
    font-size: 16px;
    font-weight: 600;
    color: var(--mail-text-main);
}

.mail-date {
    font-size: 13px;
    color: var(--mail-text-sub);
    font-weight: 400;
}

.mail-subject {
    font-size: 15px;
    font-weight: 500;
    color: var(--mail-text-main);
    margin-bottom: 4px;
}

.mail-preview {
    font-size: 14px;
    color: var(--mail-text-sub);
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* --- 4. ÈÇÆ‰ª∂ËØ¶ÊÉÖÈ°µ (Detail) --- */
#email-detail-screen {
    background-color: var(--mail-surface) !important;
}

.mail-detail-content {
    padding: 24px 20px !important;
    max-width: 600px;
    margin: 0 auto;
    background-color: transparent !important;
}

/* ËØ¶ÊÉÖÈ°µÂ§¥ÈÉ®‰ø°ÊÅØÂùó */
.mail-meta-header {
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--mail-border);
}

.mail-subject-line {
    font-size: 22px;
    font-weight: 700;
    color: var(--mail-text-main);
    line-height: 1.3;
    margin-bottom: 16px;
}

.mail-meta-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.mail-sender-avatar {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: linear-gradient(135deg, #8E8E93, #636366);
    color: white;
    font-size: 18px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.mail-meta-info {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.mail-from-row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
}

.mail-from-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--mail-text-main);
}

.mail-time {
    font-size: 12px;
    color: var(--mail-text-sub);
}

.mail-to-row {
    font-size: 13px;
    color: var(--mail-text-sub);
    margin-top: 2px;
}

/* ÈÇÆ‰ª∂Ê≠£Êñá */
.mail-body-text {
    font-size: 16px;
    line-height: 1.6;
    color: var(--mail-text-main);
    white-space: pre-wrap;
}

/* --- 5. ÁîüÊàêÂô®ÂºπÁ™ó (The "Ugly" Fix) --- */
#email-generator-modal .modal-content {
    background-color: var(--mail-bg) !important;
    border-radius: var(--mail-radius-l) !important;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2) !important;
    border: 1px solid rgba(255,255,255,0.1);
    max-width: 400px;
    width: 92%;
}

.mail-modal-header {
    padding: 20px 24px !important;
    border-bottom: 1px solid var(--mail-border);
}
.mail-modal-header span {
    font-size: 18px;
    font-weight: 600;
    color: var(--mail-text-main);
}

/* Ë°®ÂçïÊéß‰ª∂‰ºòÂåñ */
.gr-form-group {
    background-color: var(--mail-surface);
    border-radius: var(--mail-radius-m);
    padding: 16px;
    margin-bottom: 16px !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.02);
}

.gr-form-group label {
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--mail-text-sub) !important;
    margin-bottom: 10px !important;
    display: block;
    font-weight: 600;
}

.gr-input, textarea.gr-input {
    width: 100%;
    background-color: var(--mail-bg);
    border: none;
    border-radius: 8px;
    padding: 12px;
    font-size: 15px;
    color: var(--mail-text-main);
    outline: none;
    transition: box-shadow 0.2s;
}
.gr-input:focus {
    box-shadow: 0 0 0 2px var(--mail-accent);
    background-color: var(--mail-surface);
}

/* Checkbox ÂàóË°®‰ºòÂåñ */
.gr-checkbox-list {
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.gr-checkbox-item {
    display: flex;
    align-items: center;
    padding: 10px;
    background-color: var(--mail-bg); /* ÊµÖÁÅ∞Â∫ïËâ≤ */
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s;
}
.gr-checkbox-item:hover {
    background-color: #E5E5EA; /* ÊÇ¨ÂÅúÂä†Ê∑± */
}
#phone-screen.dark-mode .gr-checkbox-item:hover {
    background-color: #3A3A3C;
}

/* Â§çÈÄâÊ°ÜÁæéÂåñ */
.gr-checkbox-item input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid #C7C7CC;
    border-radius: 50%; /* ÂúÜÂΩ¢Â§çÈÄâÊ°ÜÔºåÂÉèÈÄâÊã©ÂàóË°® */
    margin-right: 12px;
    position: relative;
    transition: all 0.2s;
}
.gr-checkbox-item input[type="checkbox"]:checked {
    background-color: var(--mail-accent);
    border-color: var(--mail-accent);
}
.gr-checkbox-item input[type="checkbox"]:checked::after {
    content: '‚úî';
    font-size: 12px;
    color: white;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* ÂºπÁ™óÂ∫ïÈÉ®ÊåâÈíÆ */
.modal-footer {
    padding: 16px 24px !important;
    background-color: var(--mail-surface) !important;
}
.modal-footer button {
    padding: 12px 0 !important;
    border-radius: 10px !important;
    font-size: 16px !important;
    font-weight: 600 !important;
}
/* Â∫ïÈÉ®Êìç‰ΩúÊ†èÊ†∑Âºè */
#mail-action-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: rgba(242, 242, 247, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 0.5px solid #c6c6c8;
    padding: 10px 20px;
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;
    z-index: 20;
}

.select-all-btn {
    color: var(--mail-accent);
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
}

.mail-delete-action-btn {
    color: #ff3b30;
    background: none;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
}
.mail-delete-action-btn:disabled {
    color: #999;
    pointer-events: none;
}

/* ÈÇÆ‰ª∂ÂàóË°®È°πÁöÑÈÄâÊã©Áä∂ÊÄÅÊ†∑Âºè */
.mail-item {
    transition: transform 0.2s ease, padding-left 0.2s ease;
    position: relative;
    overflow: visible !important; /* ÂÖÅËÆ∏ÈÄâ‰∏≠ÂúàÊòæÁ§∫Âú®Â∑¶‰æß */
}

/* ÁºñËæëÊ®°Âºè‰∏ãÔºåÁªôÂ∑¶‰æßÁïôÂá∫Á©∫Èó¥ */
.mail-item.editing {
    transform: translateX(40px); /* Êï¥‰ΩìÂè≥Áßª */
    width: calc(100% - 40px); /* ÂÆΩÂ∫¶Ëá™ÈÄÇÂ∫î */
}

/* ÈÄâÊã©Âúà (Checkbox) */
.mail-select-checkbox {
    position: absolute;
    left: -30px; /* ÊîæÂú®Âç°ÁâáÂ∑¶‰æß */
    top: 50%;
    transform: translateY(-50%);
    width: 22px;
    height: 22px;
    border: 2px solid #c7c7cc;
    border-radius: 50%;
    box-sizing: border-box;
    background-color: transparent;
    transition: all 0.2s;
    display: none; /* ÈªòËÆ§ÈöêËóè */
}

/* ÁºñËæëÊ®°Âºè‰∏ãÊòæÁ§∫ÈÄâÊã©Âúà */
.mail-item.editing .mail-select-checkbox {
    display: block;
}

/* ÈÄâ‰∏≠Áä∂ÊÄÅ */
.mail-item.selected .mail-select-checkbox {
    background-color: var(--mail-accent);
    border-color: var(--mail-accent);
}
.mail-item.selected .mail-select-checkbox::after {
    content: '‚úî';
    color: white;
    font-size: 14px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #mail-action-bar {
    background-color: rgba(28, 28, 30, 0.95);
    border-top-color: #38383a;
}


/* === ÈÇÆ‰ª∂ËΩ¨ÂèëÂç°ÁâáÊ†∑Âºè === */
.email-share-card {
    width: 240px;
    background-color: #ffffff;
    border-radius: 12px;
    padding: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.05);
    cursor: pointer;
    transition: transform 0.2s;
    overflow: hidden;
}
.email-share-card:active {
    transform: scale(0.98);
    background-color: #f9f9f9;
}

/* È°∂ÈÉ®ÔºöÂõæÊ†á + Ê†áÈ¢ò‰ø°ÊÅØ */
.email-card-top {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    align-items: flex-start;
}

/* ËìùËâ≤ÂõæÊ†áÂùó */
.email-icon-box {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #007aff, #0056b3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
    box-shadow: 0 2px 5px rgba(0, 122, 255, 0.2);
}

.email-card-header-text {
    flex: 1;
    overflow: hidden;
}

.email-card-subject {
    font-size: 15px;
    font-weight: 600;
    color: #1f1f1f;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
    margin-bottom: 3px;
}

.email-card-sender {
    font-size: 12px;
    color: #8a8a8a;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ‰∏≠Èó¥ÔºöÊëòË¶ÅÈ¢ÑËßà */
.email-card-preview {
    font-size: 13px;
    color: #666;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    margin-bottom: 8px;
    background-color: #f7f7f9;
    padding: 8px;
    border-radius: 6px;
}

/* Â∫ïÈÉ®ÔºöËÑöÊ†á */
.email-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid #f0f0f0;
    padding-top: 8px;
    font-size: 11px;
    color: #999;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .email-share-card {
    background-color: #1c1c1e;
    border-color: #333;
}
#phone-screen.dark-mode .email-share-card:active {
    background-color: #2c2c2e;
}
#phone-screen.dark-mode .email-card-subject {
    color: #fff;
}
#phone-screen.dark-mode .email-card-preview {
    background-color: #2c2c2e;
    color: #aaa;
}
#phone-screen.dark-mode .email-card-footer {
    border-top-color: #333;
}
/* --- Ê∏≤ÊüìËßÑÂàôÁªëÂÆöËåÉÂõ¥ÁæéÂåñ --- */

/* 1. ÂÆπÂô®ÁæéÂåñÔºöÁ±ª‰ºº iOS ÂàÜÁªÑÂç°Áâá */
#rule-scope-checkboxes {
    max-height: 250px;
    overflow-y: auto;
    background-color: var(--secondary-bg); /* ÈÄÇÈÖçÊöóÈªëÊ®°Âºè */
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 5px;
    margin-top: 5px;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

/* 2. ÂçïË°åÂàóË°®È°πÁæéÂåñ */
.rule-scope-item {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    user-select: none; /* Èò≤Ê≠¢ÂèåÂáªÈÄâ‰∏≠ÊñáÂ≠ó */
}

/* ÊÇ¨ÂÅúÂíåÁÇπÂáªÊïàÊûú */
.rule-scope-item:hover {
    background-color: rgba(0, 0, 0, 0.05);
}
.rule-scope-item:active {
    background-color: rgba(0, 0, 0, 0.1);
}

/* 3. Â§çÈÄâÊ°ÜÁæéÂåñÔºöÂèòÂ§ß‰∏ÄÁÇπÔºåÂπ∂Â¢ûÂä†Âè≥ËæπË∑ù */
.rule-scope-item input[type="checkbox"] {
    appearance: none; /* ÁßªÈô§ÈªòËÆ§Ê†∑Âºè */
    -webkit-appearance: none;
    width: 22px;
    height: 22px;
    border: 2px solid #c7c7cc;
    border-radius: 50%; /* ÂúÜÂΩ¢Â§çÈÄâÊ°ÜÔºåÂÉèÈÄâÊã©ÂàóË°® */
    margin-right: 12px;
    position: relative;
    transition: all 0.2s;
    flex-shrink: 0;
}

/* ÈÄâ‰∏≠Áä∂ÊÄÅ */
.rule-scope-item input[type="checkbox"]:checked {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}

/* ÈÄâ‰∏≠Êó∂ÁöÑÂØπÂãæ */
.rule-scope-item input[type="checkbox"]:checked::after {
    content: '‚úî';
    font-size: 14px;
    color: white;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: bold;
}

/* 4. Â§¥ÂÉèÊ†∑Âºè */
.rule-scope-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    margin-right: 12px;
    border: 1px solid rgba(0,0,0,0.1);
    flex-shrink: 0;
}

/* ÂÖ¨Áî®ÂõæÊ†áÁöÑÁâπÊÆäÊ†∑Âºè */
.rule-scope-icon-box {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: #007aff; /* ËìùËâ≤ËÉåÊôØ */
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    font-size: 18px;
    flex-shrink: 0;
}

/* 5. ÊñáÂ≠óÊéíÁâà */
.rule-scope-info {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    overflow: hidden;
}

.rule-scope-name {
    font-size: 15px;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.rule-scope-desc {
    font-size: 12px;
    color: var(--text-secondary);
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #rule-scope-checkboxes {
    background-color: #1c1c1e;
    border-color: #38383a;
}
#phone-screen.dark-mode .rule-scope-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}
/* --- Ê∏≤ÊüìËßÑÂàôÁÆ°ÁêÜÊ®°ÂºèÊ†∑Âºè --- */

/* 1. ËßÑÂàôÂç°ÁâáÂÆπÂô®Ë∞ÉÊï¥ */
.rule-card {
    position: relative; /* ‰∏∫Â§çÈÄâÊ°ÜÂÆö‰Ωç */
    transition: transform 0.2s ease, border-color 0.2s;
}

/* 2. ÈöêËóèÁöÑÂ§çÈÄâÊ°Ü */
.rule-select-checkbox {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 22px;
    height: 22px;
    border: 2px solid #c7c7cc;
    border-radius: 50%;
    appearance: none;
    -webkit-appearance: none;
    background-color: transparent;
    display: none; /* ÈªòËÆ§ÈöêËóè */
    z-index: 5;
    transition: all 0.2s;
}

/* 3. ÈÄâ‰∏≠Áä∂ÊÄÅ */
.rule-select-checkbox:checked {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}
.rule-select-checkbox:checked::after {
    content: '‚úî';
    color: white;
    font-size: 14px;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-weight: bold;
}

/* 4. ÁÆ°ÁêÜÊ®°ÂºèÊøÄÊ¥ªÊó∂ */
#rules-content-container.management-mode {
    padding-bottom: 80px; /* ‰∏∫Â∫ïÈÉ®Ê†èÁïôÁ©∫ */
}

#rules-content-container.management-mode .rule-select-checkbox {
    display: block; /* ÊòæÁ§∫Â§çÈÄâÊ°Ü */
}

#rules-content-container.management-mode .rule-card {
    border-right: 30px solid transparent; /* Á®çÂæÆÊå§Âéã‰∏ÄÁÇπÂÜÖÂÆπ */
}

#rules-content-container.management-mode .rule-card.selected {
    background-color: rgba(0, 122, 255, 0.05);
    border-color: var(--accent-color);
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #rules-action-bar {
    background-color: rgba(28, 28, 30, 0.95);
    border-top-color: #38383a;
    color: #fff;
}
/* --- START: ËÅäÂ§©ÂõæÁâáÁº©Áï•Âõæ‰∏éÊîæÂ§ßÊ†∑Âºè --- */

/* 1. Âº∫Âà∂Áº©Â∞èËÅäÂ§©ËÆ∞ÂΩï‰∏≠ÁöÑÂõæÁâáÂ∞∫ÂØ∏ */
.message-bubble .chat-image {
    max-width: 140px !important;  /* Áº©Áï•ÂõæÊúÄÂ§ßÂÆΩÂ∫¶ */
    max-height: 180px !important; /* Áº©Áï•ÂõæÊúÄÂ§ßÈ´òÂ∫¶ */
    width: auto !important;
    height: auto !important;
    border-radius: 8px !important;
    cursor: zoom-in !important;   /* Èº†Ê†áÁßª‰∏äÂéªÊòæÁ§∫ÊîæÂ§ßÂõæÊ†á */
    object-fit: cover !important;
    display: block;
}

/* 2. ÁÆÄÂçïÁöÑÂÖ®Â±èÊîæÂ§ßÈÅÆÁΩ©Â±Ç (‰∏ç‰æùËµñÁõ∏ÂÜåÁªÑ‰ª∂) */
#simple-image-zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.85); /* Ê∑±Ëâ≤ÂçäÈÄèÊòéËÉåÊôØ */
    z-index: 99999; /* ‰øùËØÅÂú®ÊúÄ‰∏äÂ±Ç */
    display: none; /* ÈªòËÆ§ÈöêËóè */
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.25s ease; /* Ê∏êÂèòÂä®Áîª */
    backdrop-filter: blur(5px);
}

#simple-image-zoom-overlay.visible {
    display: flex;
    opacity: 1;
}

/* ÊîæÂ§ßÂêéÁöÑÂõæÁâáÊú¨‰Ωì */
#simple-image-zoom-overlay img {
    max-width: 95%;
    max-height: 90%;
    border-radius: 4px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    transform: scale(0.9);
    transition: transform 0.25s ease;
    object-fit: contain;
}

#simple-image-zoom-overlay.visible img {
    transform: scale(1);
}
/* --- END: ËÅäÂ§©ÂõæÁâáÁº©Áï•Âõæ‰∏éÊîæÂ§ßÊ†∑Âºè --- */
/* ÈÄöÁî®ÊåâÈíÆÊ†∑Âºè */
.nai-regenerate-btn,
.nai-upload-imgbb-btn,
.nai-save-local-btn {
    width: 32px;
    height: 32px;
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    opacity: 0;
    transition: all 0.2s ease-in-out;
}

/* ÊÇ¨ÂÅúÊòæÁ§∫ */
.nai-image-wrapper:hover .nai-regenerate-btn,
.nai-image-wrapper:hover .nai-upload-imgbb-btn,
.nai-image-wrapper:hover .nai-save-local-btn {
    opacity: 1;
}

/* ÊåâÈíÆÈ´ò‰∫Æ */
.nai-regenerate-btn:hover,
.nai-upload-imgbb-btn:hover,
.nai-save-local-btn:hover {
    background-color: rgba(0, 0, 0, 0.85);
    transform: scale(1.1);
}
/* --- Reddit App Ê†∑Âºè --- */
.reddit-post-item {
    background-color: #fff;
    margin-bottom: 10px;
    padding: 10px 15px;
    cursor: pointer;
    display: flex;
    gap: 10px;
    border-bottom: 1px solid #eee;
}

.reddit-post-item:active {
    background-color: #f0f0f0;
}

.reddit-vote-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 30px;
    font-size: 12px;
    color: #1a1a1b;
    font-weight: 700;
}

.reddit-content-box {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 5px;
    min-width: 0;
}

.reddit-meta {
    font-size: 11px;
    color: #787c7e;
    display: flex;
    align-items: center;
    gap: 5px;
}

.reddit-sub-icon {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: #0079d3;
}

.reddit-title {
    font-size: 15px;
    font-weight: 600;
    color: #222;
    line-height: 1.4;
}

.reddit-preview-img {
    width: 100%;
    max-height: 200px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid #edeff1;
    margin-top: 5px;
}

.reddit-forward-btn {
    margin-top: 8px;
    background-color: #f0f0f0;
    color: #555;
    border: none;
    border-radius: 20px;
    padding: 5px 12px;
    font-size: 12px;
    cursor: pointer;
    align-self: flex-start;
    display: flex;
    align-items: center;
    gap: 4px;
}

/* --- ËÅäÂ§©Ê∞îÊ≥°‰∏≠ÁöÑÁ≤æÁæé Reddit Âç°ÁâáÊ†∑Âºè --- */
.message-bubble.is-reddit-card {
    flex: initial;
    min-width: auto;
}

.message-bubble.is-reddit-card .content {
    padding: 0;
    background: transparent !important;
    box-shadow: none;
}

.reddit-share-card {
    width: 240px;
    background-color: #ffffff;
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    cursor: pointer;
}

.reddit-card-header {
    padding: 8px 12px;
    background-color: #f8f9fa;
    display: flex;
    align-items: center;
    gap: 6px;
    border-bottom: 1px solid #eee;
}

.reddit-card-logo {
    width: 16px;
    height: 16px;
}

.reddit-card-sub {
    font-size: 11px;
    color: #1c1c1c;
    font-weight: 700;
}

.reddit-card-user {
    font-size: 11px;
    color: #787c7e;
}

.reddit-card-body {
    padding: 10px 12px;
}

.reddit-card-title {
    font-size: 14px;
    font-weight: 600;
    color: #222;
    margin-bottom: 8px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.reddit-card-img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: 5px;
    background-color: #eee;
}

.reddit-card-footer {
    padding: 8px 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid #f0f0f0;
    font-size: 11px;
    color: #878a8c;
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #char-reddit-screen { background-color: #000; }
#phone-screen.dark-mode #char-reddit-list { background-color: #121212; }
#phone-screen.dark-mode .reddit-post-item { background-color: #1a1a1b; border-bottom-color: #343536; }
#phone-screen.dark-mode .reddit-title { color: #d7dadc; }
#phone-screen.dark-mode .reddit-share-card { background-color: #1a1a1b; border-color: #343536; }
#phone-screen.dark-mode .reddit-card-header { background-color: #272729; border-bottom-color: #343536; }
#phone-screen.dark-mode .reddit-card-sub { color: #d7dadc; }
#phone-screen.dark-mode .reddit-card-title { color: #d7dadc; }
#phone-screen.dark-mode .reddit-card-footer { border-top-color: #343536; }
/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç Reddit ËØ¶ÊÉÖ */
#phone-screen.dark-mode #char-article-content h2 { color: #e0e0e0 !important; }
#phone-screen.dark-mode #char-article-content div { color: #ccc !important; }
#phone-screen.dark-mode .reddit-comment-item { border-bottom-color: #333 !important; }
/* ÁªøÊ±ü‰π¶Á±çÂç°Áâá‰∏äÁöÑÂä†ÂÖ•‰π¶Êû∂ÊåâÈíÆ */
.gr-add-shelf-btn {
    background: none;
    border: 1px solid var(--gr-primary);
    color: var(--gr-primary);
    border-radius: 12px;
    padding: 2px 8px;
    font-size: 11px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.2s;
    z-index: 2; /* Á°Æ‰øùÂú®Âç°ÁâáÁÇπÂáªÂ±Ç‰πã‰∏ä */
}
.gr-add-shelf-btn:hover {
    background-color: var(--gr-primary);
    color: white;
}
/* Â∑≤Âä†ÂÖ•Áä∂ÊÄÅÔºöÂÆûÂøÉËÉåÊôØÔºåÊòæÁ§∫‰∏∫Â∑≤ÂÆåÊàê */
.gr-add-shelf-btn.added {
    background-color: rgba(0,0,0,0.05);
    border-color: transparent;
    color: #888;
    cursor: pointer; /* ‰øùÊåÅÂèØÁÇπÂáª */
}
/* Â∑≤Âä†ÂÖ•Áä∂ÊÄÅÊÇ¨ÂÅúÔºöÂèòÊàêÁ∫¢Ëâ≤ÔºåÊèêÁ§∫ÁßªÈô§ */
.gr-add-shelf-btn.added:hover {
    background-color: #ffebee;
    color: #ff3b30;
    border-color: #ff3b30;
}
/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .gr-add-shelf-btn.added {
    background-color: rgba(255,255,255,0.1);
    color: #aaa;
}
#phone-screen.dark-mode .gr-add-shelf-btn.added:hover {
    background-color: rgba(255, 59, 48, 0.2);
    color: #ff453a;
    border-color: #ff453a;
}
/* ========================================= */
/* ‚ñº‚ñº‚ñº ÁëûÂ£´ÊûÅÁÆÄ‰∏ª‰πâÈÄöÁü•Á≥ªÁªü (Swiss Toast) ‚ñº‚ñº‚ñº */
/* ========================================= */

.toast-container {
    position: fixed;
    top: 12px; /* È°∂ÈÉ®ÁïôÂá∫Áä∂ÊÄÅÊ†èÂëºÂê∏ÊÑü */
    left: 50%;
    transform: translateX(-50%);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    pointer-events: none; /* ÂÖÅËÆ∏ÁÇπÂáªÁ©øÈÄè */
}

.toast-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px 12px 16px;
    background-color: rgba(255, 255, 255, 0.92); /* ÊûÅÈ´òÁ∫ØÂ∫¶ÁöÑÁôΩ */
    backdrop-filter: blur(20px); /* Á£®Á†ÇÁéªÁíÉË¥®ÊÑü */
    -webkit-backdrop-filter: blur(20px);
    border-radius: 50px; /* ÂÆåÂÖ®ËÉ∂ÂõäÁä∂ */
    box-shadow: 
        0 4px 24px rgba(0, 0, 0, 0.06), /* Âº•Êï£Èò¥ÂΩ± */
        0 1px 2px rgba(0, 0, 0, 0.04),  /* ÈîêÂà©Èò¥ÂΩ± */
        inset 0 0 0 0.5px rgba(0, 0, 0, 0.05); /* ÂÜÖÊèèËæπ‰ª£ÊõøËæπÊ°Ü */
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
    font-size: 14px;
    font-weight: 500;
    color: #1d1d1f; /* Ê∑±ÁÇ≠ÁÅ∞ÔºåÈùûÁ∫ØÈªë */
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); /* iOS Áâ©ÁêÜÂä®ÊïàÊõ≤Á∫ø */
}

.toast-item.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
}

.toast-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    color: #0071e3; /* ËãπÊûúËìù */
}

.toast-icon svg {
    width: 100%;
    height: 100%;
    stroke-width: 2;
}

/* Âä†ËΩΩ‰∏≠Âä®Áîª */
.toast-icon.spinning svg {
    animation: toast-spin 1s linear infinite;
}

@keyframes toast-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç - Ê∑±ÈÇÉËÄåÈÄöÈÄè */
#phone-screen.dark-mode .toast-item {
    background-color: rgba(28, 28, 30, 0.92);
    color: #f5f5f7;
    box-shadow: 
        0 4px 24px rgba(0, 0, 0, 0.2),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.1);
}
#phone-screen.dark-mode .toast-icon {
    color: #0a84ff;
}

/* ========================================= */
/* ‚ñº‚ñº‚ñº ËÆæÁΩÆÈ°µÈù¢Â∏ÉÂ±Ä‰ºòÂåñ (Spa Aesthetics) ‚ñº‚ñº‚ñº */
/* ========================================= */

/* 1. Â¢ûÂä†ÂëºÂê∏ÊÑü */
.settings-container {
    padding: 24px 20px !important; /* Â¢ûÂä†Êï¥‰ΩìÂÜÖËæπË∑ù */
}

/* 2. Âç°ÁâáÈó¥Ë∑ù‰∏éË¥®ÊÑü */
.settings-section {
    margin-bottom: 24px !important; /* Âç°ÁâáÈó¥Ë∑ùÂ¢ûÂ§ß */
    border-radius: 16px !important; /* Êõ¥ÂúÜÊ∂¶ÁöÑËßí */
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.02) !important; /* ÊûÅËΩªÂæÆÁöÑÊÇ¨ÊµÆÊÑü */
    border: 1px solid rgba(0,0,0,0.03); /* ÊûÅÂÖ∂ÂæÆÂ¶ôÁöÑËæπÁïå */
    overflow: hidden !important;
}

/* 3. ÂàóË°®È°πÈ´òÂ∫¶‰∏éÂàÜÂâ≤Á∫ø */
.settings-item, .settings-item-block {
    padding: 18px 20px !important; /* Â¢ûÂä†ÂçïË°åÈ´òÂ∫¶Ôºå‰∏ç‰ªÖÊòØÁÇπÂáªÂå∫ÂüüÔºåÊõ¥ÊòØËßÜËßâÁïôÁôΩ */
    min-height: 56px !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important; /* Á∫øÊù°Êõ¥ÁªÜÊõ¥Ê∑° */
}

/* 4. Â≠ó‰Ωì‰ºòÂåñ */
.settings-item label {
    font-size: 16px !important;
    font-weight: 500 !important; /* Áï•ÂæÆÂä†Á≤óÔºåÊèêÂçáÂ±ÇÁ∫ß */
    letter-spacing: -0.01em;
    color: #1d1d1f !important;
}

.settings-header {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: #86868b !important; /* È´òÁ∫ßÁÅ∞ */
    margin: 30px 0 10px 20px !important; /* Ê†áÈ¢ò‰∏éÂç°ÁâáÁöÑË∑ùÁ¶ª */
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* 5. ÊöóÈªëÊ®°ÂºèÂæÆË∞É */
#phone-screen.dark-mode .settings-section {
    border: 1px solid rgba(255,255,255,0.05);
    background-color: #1c1c1e !important;
}
#phone-screen.dark-mode .settings-item {
    border-bottom-color: rgba(255, 255, 255, 0.08) !important;
}
#phone-screen.dark-mode .settings-item label {
    color: #f5f5f7 !important;
}
/* ========================================= */
/* ‚ñº‚ñº‚ñº CPhone Browser È´òÁ´ØÈáçÊûÑ (Swiss Style) ‚ñº‚ñº‚ñº */
/* ========================================= */

/* 1. ÊµèËßàÂô®Êï¥‰ΩìÂÆπÂô®ËÉåÊôØ */
#char-browser-screen, 
#char-browser-article-screen {
    background-color: #F2F2F7 !important; /* iOS È´òÁ∫ßÁÅ∞Â∫ïËâ≤ */
}
#phone-screen.dark-mode #char-browser-screen,
#phone-screen.dark-mode #char-browser-article-screen {
    background-color: #000000 !important;
}

/* 2. ÂéÜÂè≤ËÆ∞ÂΩïÂàóË°®ÂÆπÂô® */
#char-browser-history {
    padding: 20px !important; /* Â¢ûÂä†Â§ñËæπË∑ùÔºåËÆ©ÂÜÖÂÆπÂëºÂê∏ */
    display: flex;
    flex-direction: column;
    gap: 12px; /* Âç°Áâá‰πãÈó¥ÁöÑÂÆåÁæéÈó¥Ë∑ù */
}

/* 3. Âçï‰∏™ÂéÜÂè≤ËÆ∞ÂΩïÂç°Áâá */
.char-browser-item {
    background-color: #FFFFFF;
    padding: 16px 20px !important; /* ÂÜÖÈÉ®ÁïôÁôΩ */
    border-radius: 12px; /* Áé∞‰ª£ÊÑüÂúÜËßí */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02); /* ÊûÅËΩªÂæÆÁöÑÊÇ¨ÊµÆÊÑü */
    border: 1px solid rgba(0, 0, 0, 0.03); /* Âá†‰πé‰∏çÂèØËßÅÁöÑËæπÁïå */
    display: flex;
    align-items: center;
    gap: 16px; /* ÂõæÊ†á‰∏éÊñáÂ≠óÁöÑÈó¥Ë∑ù */
    transition: transform 0.1s, background-color 0.2s;
}
.char-browser-item:active {
    transform: scale(0.98);
    background-color: #F9F9F9;
}

/* 4. ÂàóË°®È°πÂ∑¶‰æßÂõæÊ†áÂÆπÂô® (Êõø‰ª£ Emoji) */
.char-browser-icon-box {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    background-color: #F2F2F7; /* ÊµÖÁÅ∞ËÉåÊôØË°¨ÊâòÂõæÊ†á */
    display: flex;
    align-items: center;
    justify-content: center;
    color: #007AFF; /* ÁëûÂ£´Ëìù Accent Color */
    flex-shrink: 0;
}
.char-browser-icon-box svg {
    width: 20px;
    height: 20px;
    stroke-width: 2;
}

/* 5. ÂàóË°®È°πÊñáÂ≠óÂÜÖÂÆπ */
.char-browser-info {
    flex-grow: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 4px; /* Ê†áÈ¢ò‰∏éURLÁöÑÈó¥Ë∑ù */
}

.char-browser-item .title {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: #1C1C1E;
    margin: 0 !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    letter-spacing: -0.01em;
}

.char-browser-item .url {
    font-size: 12px !important;
    color: #8E8E93 !important; /* Ê¨°Ë¶Å‰ø°ÊÅØÁÅ∞Ëâ≤ */
    font-weight: 400;
    font-family: -apple-system, BlinkMacSystemFont, "SF Mono", monospace; /* ÁΩëÂùÄÁî®Á≠âÂÆΩÂ≠ó‰ΩìÊõ¥ÊúâÁßëÊäÄÊÑü */
}

/* 6. ÂàóË°®È°πÂè≥‰æßÁÆ≠Â§¥ */
.char-browser-arrow {
    color: #C7C7CC;
    flex-shrink: 0;
}

/* 7. ÊñáÁ´†ËØ¶ÊÉÖÈ°µÊéíÁâà (ÈòÖËØª‰ΩìÈ™å‰ºòÂåñ) */
#char-article-content {
    padding: 30px 24px !important; /* ÂÆΩÊïûÁöÑÈòÖËØªËæπË∑ù */
    background-color: #FFFFFF !important; /* Á∫ØÁôΩÈòÖËØªËÉåÊôØ */
    
    /* --- ‰øÆÂ§çÂºÄÂßã --- */
    /* 1. Âà†Èô§ÊàñÊ≥®ÈáäÊéâ min-height: 100%; */
    /* min-height: 100%; */ 
    
    /* 2. Ê∑ªÂä† height: 0; ÈÖçÂêà flex-grow ‰ΩøÁî®ÔºåÂº∫Âà∂ÂÆÉÂú® flex ÂÆπÂô®ÂÜÖÊªöÂä® */
    height: 0 !important; 
    
    /* 3. Á°Æ‰øù flex Â±ûÊÄßÂíåÊªöÂä®ÂºÄÂêØ */
    flex-grow: 1;
    overflow-y: auto !important;
    /* --- ‰øÆÂ§çÁªìÊùü --- */
}

/* ÊñáÁ´†Ê†áÈ¢ò */
#char-article-title {
    font-size: 17px !important; /* ÂØºËà™Ê†èÊ†áÈ¢òÂ§ßÂ∞è */
    font-weight: 600;
}

/* ÊñáÁ´†Ê≠£ÊñáÂÆπÂô®ÂÜÖÁöÑÂ§ßÊ†áÈ¢ò (Â¶ÇÊûúÊúâ) */
.article-large-title {
    font-size: 24px;
    font-weight: 700;
    color: #1C1C1E;
    margin-bottom: 16px;
    line-height: 1.3;
    letter-spacing: -0.02em;
}

/* ÊñáÁ´†Ê≠£ÊñáÊñáÂ≠ó */
#char-article-content p {
    font-size: 17px; /* ÊúÄ‰Ω≥ÈòÖËØªÂ≠óÂè∑ */
    line-height: 1.6; /* ÈªÑÈáëÊØî‰æãË°åÈ´ò */
    color: #333333;
    margin-bottom: 20px; /* ÊÆµËêΩÈó¥Ë∑ù */
    text-align: justify; /* ‰∏§Á´ØÂØπÈΩê */
}

/* ÊñáÁ´†ÂõæÁâá */
.char-browser-image-description {
    margin-top: 40px;
    padding: 40px 20px;
    background-color: #F9F9F9;
    border-radius: 12px;
    color: #666;
    font-style: italic;
    text-align: center;
    border: 1px dashed #E5E5E5;
}

/* --- ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç --- */
#phone-screen.dark-mode .char-browser-item {
    background-color: #1C1C1E;
    border-color: #333;
}
#phone-screen.dark-mode .char-browser-icon-box {
    background-color: #2C2C2E;
    color: #0A84FF;
}
#phone-screen.dark-mode .char-browser-item .title {
    color: #FFFFFF;
}
#phone-screen.dark-mode #char-article-content {
    background-color: #000000 !important;
}
#phone-screen.dark-mode .article-large-title {
    color: #FFFFFF;
}
#phone-screen.dark-mode #char-article-content p {
    color: #E0E0E0;
}
#phone-screen.dark-mode .char-browser-image-description {
    background-color: #1C1C1E;
    border-color: #333;
    color: #AAA;
}
/* ========================================= */
/* ‚ñº‚ñº‚ñº CPhone Â§áÂøòÂΩï & Êó•ËÆ∞ È´òÁ´ØÈáçÊûÑ ‚ñº‚ñº‚ñº */
/* ========================================= */

/* 1. ÂàóË°®ÂÆπÂô®ËÉåÊôØ */
#char-memo-list, #char-diary-list {
    padding: 20px !important; /* Áªü‰∏ÄÂ§ñËæπË∑ù */
    display: flex;
    flex-direction: column;
    gap: 12px; /* Âç°ÁâáÈó¥Ë∑ù */
    background-color: #F2F2F7 !important; /* Áªü‰∏ÄÂ∫ïËâ≤ */
}
#phone-screen.dark-mode #char-memo-list, 
#phone-screen.dark-mode #char-diary-list {
    background-color: #000000 !important;
}

/* 2. ÂàóË°®È°πÂç°ÁâáÊ†∑Âºè */
.memo-item, .diary-item {
    background-color: #FFFFFF;
    padding: 16px 20px !important;
    border-radius: 12px; /* Áé∞‰ª£ÊÑüÂúÜËßí */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02);
    border: 1px solid rgba(0, 0, 0, 0.03);
    display: flex;
    align-items: center;
    gap: 16px;
    transition: transform 0.1s, background-color 0.2s;
    cursor: pointer;
    border-bottom: 1px solid rgba(0,0,0,0.03) !important; /* Ë¶ÜÁõñÊóßÊ†∑ÂºèÁöÑËæπÊ°Ü */
}
.memo-item:active, .diary-item:active {
    transform: scale(0.98);
    background-color: #F9F9F9;
}

/* 3. ÂõæÊ†áÂÆπÂô® (Â∑¶‰æßÊñπÂΩ¢Âå∫Âüü) */
.cphone-item-icon-box {
    width: 42px;
    height: 42px;
    border-radius: 10px; /* iOS È£éÊ†ºÂúÜËßí */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}
.cphone-item-icon-box svg {
    width: 22px;
    height: 22px;
    stroke-width: 2;
}

/* Â§áÂøòÂΩï‰∏ìÂ±ûÈÖçËâ≤ (ÊöñÈªÑ) */
.memo-icon-style {
    background-color: #FFF8E1; /* ÊûÅÊ∑°ÈªÑÂ∫ï */
    color: #FF9500; /* Ê¥ªÂäõÊ©ôÈªÑ */
}

/* Êó•ËÆ∞‰∏ìÂ±ûÈÖçËâ≤ (Ê∏ÖÊñ∞Áªø) */
.diary-icon-style {
    background-color: #E8F5E9; /* ÊûÅÊ∑°ÁªøÂ∫ï */
    color: #34C759; /* ËãπÊûúÁªø */
}

/* 4. ‰∏≠Èó¥ÊñáÂ≠óÂå∫Âüü */
.cphone-item-info {
    flex-grow: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.cphone-item-title {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: #1C1C1E;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    letter-spacing: -0.01em;
}

.cphone-item-preview {
    font-size: 13px !important;
    color: #8E8E93 !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 400;
    line-height: 1.3;
}

/* 5. Âè≥‰æßÂÖÉÁ¥† (ÁÆ≠Â§¥ÊàñÊó∂Èó¥) */
.cphone-item-arrow {
    color: #C7C7CC;
    flex-shrink: 0;
}

/* --- ËØ¶ÊÉÖÈ°µÈáçÊûÑ --- */

/* Â§áÂøòÂΩïËØ¶ÊÉÖÈ°µ */
#char-memo-detail-screen .form-container {
    padding: 20px !important;
    background-color: #F2F2F7 !important;
    height: 100%;
    box-sizing: border-box;
}
#char-memo-detail-content {
    background-color: #FFFFFF !important;
    border-radius: 12px;
    padding: 24px !important;
    font-size: 16px !important;
    line-height: 1.6 !important;
    color: #1C1C1E !important;
    box-shadow: 0 2px 12px rgba(0,0,0,0.02);
    border: 1px solid rgba(0,0,0,0.03);
    height: 100% !important;
    resize: none;
    outline: none;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
}

/* Êó•ËÆ∞ËØ¶ÊÉÖÈ°µ */
#char-diary-detail-screen {
    background-color: #F2F2F7 !important;
}
#char-diary-detail-content-wrapper {
    padding: 20px !important;
    background: transparent !important;
}
#char-diary-detail-content {
    /* Ê†∏ÂøÉ‰øÆÂ§çÔºöÂº∫Âà∂È´òÂ∫¶Ëá™Âä®ÔºåÈöèÊñáÂ≠óÊíëÂºÄ */
    height: auto !important; 
    
    /* ‰øùÊåÅÊúÄÂ∞èÈ´òÂ∫¶ÔºåÂÜÖÂÆπÂ∞ëÊó∂‰πüÂ•ΩÁúã */
    min-height: 80vh; 
    
    /* Á°Æ‰øùËÉåÊôØËâ≤ÂíåÂúÜËßíÂÆåÊï¥ÂåÖË£πÂÜÖÂÆπ */
    background-color: #FFFFFF !important;
    border-radius: 12px;
    
    /* ‰ºòÂåñÂÜÖËæπË∑ù */
    padding: 32px 28px 60px 28px !important; /* Â∫ïÈÉ®Â¢ûÂä†ÂÜÖËæπË∑ùÔºåÈò≤Ê≠¢ÊñáÂ≠óË¥¥Â∫ï */
    
    /* ËßÜËßâÊ†∑Âºè */
    box-shadow: 0 2px 15px rgba(0,0,0,0.03);
    border: 1px solid rgba(0,0,0,0.03);
    font-family: "Georgia", "Songti SC", serif !important;
    color: #333 !important;
    line-height: 1.8 !important;
    
    /* Èò≤Ê≠¢ÂÆΩÂ∫¶Ê∫¢Âá∫ */
    width: 100%;
    box-sizing: border-box;
    overflow: visible !important;
}

/* Á°Æ‰øùÂ§ñÂ±ÇÂÆπÂô®ÂÖÅËÆ∏ÊªöÂä®‰∏îÂ∏ÉÂ±ÄÊ≠£Á°Æ */
#char-diary-detail-content-wrapper {
    padding: 20px !important;
    background: transparent !important;
    overflow-y: auto !important; /* Á°Æ‰øùÁ´ñÂêëÊªöÂä®Êù°Âú® wrapper ‰∏ä */
    display: block !important;    /* Èò≤Ê≠¢ Flex Â∏ÉÂ±ÄÊüê‰∫õÊÉÖÂÜµ‰∏ãÂéãÁº©Â≠êÂÖÉÁ¥†È´òÂ∫¶ */
}

/* --- ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç --- */
#phone-screen.dark-mode .memo-item,
#phone-screen.dark-mode .diary-item {
    background-color: #1C1C1E;
    border-color: #333;
}
#phone-screen.dark-mode .cphone-item-title {
    color: #FFFFFF;
}
#phone-screen.dark-mode .memo-icon-style {
    background-color: #332A15; /* Ê∑±ÈªÑËÉåÊôØ */
    color: #FFD60A;
}
#phone-screen.dark-mode .diary-icon-style {
    background-color: #1A3021; /* Ê∑±ÁªøËÉåÊôØ */
    color: #30D158;
}
#phone-screen.dark-mode #char-memo-detail-screen .form-container,
#phone-screen.dark-mode #char-diary-detail-screen {
    background-color: #000000 !important;
}
#phone-screen.dark-mode #char-memo-detail-content,
#phone-screen.dark-mode #char-diary-detail-content {
    background-color: #1C1C1E !important;
    color: #E0E0E0 !important;
    border-color: #333;
}
#phone-screen.dark-mode #char-diary-detail-content > p:first-of-type {
    color: #FFFFFF !important;
    border-bottom-color: #333;
}
/* 1. Â§ñÂ±ÇÂÆπÂô®ÔºöËê•ÈÄ†Ê≤âÊµ∏ÂºèÈòÖËØªÁéØÂ¢É */
#char-diary-detail-screen {
    background-color: #F2F2F7 !important; /* iOS Á≥ªÁªüÁ∫ßÊµÖÁÅ∞ËÉåÊôØÔºåÊèê‰æõËßÜËßâÊîØÊíë */
}
#phone-screen.dark-mode #char-diary-detail-screen {
    background-color: #000000 !important;
}

/* 2. ÊªöÂä®Âå∫Âüü */
#char-diary-detail-content-wrapper {
    padding: 20px 16px !important; /* ÁßªÂä®Á´Ø‰∏§‰æßÁïôÂá∫ÂêàÈÄÇÁöÑÂëºÂê∏Á©∫Èó¥ */
    background: transparent !important;
    box-sizing: border-box;
}

/* 3. Êó•ËÆ∞Á∫∏Âº†Êú¨‰Ωì (Ê†∏ÂøÉ‰øÆÊîπ) */
#char-diary-detail-content {
    background-color: #FFFFFF !important;
    border-radius: 16px; /* Êõ¥ÂúÜÊ∂¶„ÄÅÂèãÂ•ΩÁöÑÂúÜËßí */
    /* ÁßªÈô§ÊòæÁúºÁöÑËæπÊ°ÜÔºåÊîπÁî®ÊûÅËΩªÊüîÁöÑÂº•Êï£Èò¥ÂΩ±ÔºåËê•ÈÄ†ÊÇ¨ÊµÆÊÑü */
    border: none !important;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.04); 
    
    /* ÂÜÖÈÉ®ÁïôÁôΩÔºöÂÉèÈ´òÁ∫ßÊùÇÂøó‰∏ÄÊ†∑ÁöÑÊéíÁâà */
    padding: 32px 24px 48px 24px !important;
    
    /* Â≠ó‰ΩìËÆæÁΩÆÔºöÂõûÂΩíÁ≥ªÁªüÂéüÁîüÔºåËøΩÊ±ÇÊûÅËá¥Ê∏ÖÊô∞ */
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Songti SC", serif !important; 
    color: #1D1D1F !important; /* Apple Ê∑±ÁÇ≠ÁÅ∞ÔºåÊØîÁ∫ØÈªëÊõ¥Êä§Áúº */
    
    min-height: 85vh; /* ‰øùËØÅÁ∫∏Âº†ÈïøÂ∫¶ÔºåÂç≥‰ΩøÂÜÖÂÆπÂ∞ë‰πü‰∏çÊòæÂæóÂçïËñÑ */
    box-sizing: border-box;
}

/* 4. Ê†áÈ¢ò/Êó•Êúü (ÊÇ®ËßâÂæóÂ§™Â§ßÁöÑÈÇ£‰∏™Â≠ó) - ÈáçÊûÑ‰∏∫‚ÄúÁúâÊâπ‚ÄùÈ£éÊ†º */
#char-diary-detail-content > p:first-of-type {
    /* Âç≥‰ΩøÊòØÊ†áÈ¢òÔºå‰πü‰∏çÈúÄË¶ÅÂ∑®Â§ß„ÄÇÁ≤æËá¥ > Â∑®Â§ß */
    font-size: 15px !important; 
    font-weight: 600 !important;
    color: #86868B !important; /* ‰ΩøÁî®È´òÁ∫ß‰∏≠ÁÅ∞Ëâ≤ÔºåÈôç‰ΩéËßÜËßâÂπ≤Êâ∞ */
    text-transform: uppercase; /* Â¢ûÂä†‰∏ÄÁÇπÂΩ¢ÂºèÊÑü */
    letter-spacing: 0.05em; /* Â¢ûÂä†Â≠óÈó¥Ë∑ùÔºåÂ¢ûÂä†ÈÄèÊ∞îÊÑü */
    
    margin-top: 0 !important;
    margin-bottom: 24px !important; /* Ê†áÈ¢ò‰∏éÊ≠£ÊñáÁöÑÂÆåÁæéË∑ùÁ¶ª */
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05); /* ÊûÅÁªÜÁöÑÂàÜÈöîÁ∫ø */
    text-align: left !important;
}

#char-diary-detail-content p {
     
    line-height: 1.6 !important; 
    
    /* Ê†∏ÂøÉ‰øÆÊîπÔºöÂáèÂ∞èÊÆµËêΩÈó¥Ë∑ù */
    margin-bottom: 1px !important; /* ‰ªé 16px ÂáèÂ∞èÂà∞ 8pxÔºåÊõ¥Âä†Á¥ßÂáë */
    margin-top: 0 !important;      /* Âº∫Âà∂ÂéªÈô§È°∂ÈÉ®Èó¥Ë∑ùÔºåÈò≤Ê≠¢Âè†Âä† */
    
    text-align: justify; 
    letter-spacing: -0.01em; 
}

/* 6. ÁâπÊÆäÊ†ºÂºè‰øÆÈ•∞ (‰øùÊåÅÈ£éÊ†ºÁªü‰∏Ä) */
#char-diary-detail-content strong {
    font-weight: 600;
    color: #000;
}

/* ÈáçÁÇπÈ´ò‰∫ÆÔºöÊîπ‰∏∫ËçßÂÖâÁ¨îÈ£éÊ†ºÔºåËÄåÈùûÁÆÄÂçïÁöÑËÉåÊôØËâ≤ */
#char-diary-detail-content .diary-highlight {
    background: linear-gradient(120deg, rgba(255, 214, 10, 0.3) 0%, rgba(255, 214, 10, 0.3) 100%);
    background-position: 0 88%;
    background-size: 100% 0.4em; /* Âè™È´ò‰∫Æ‰∏ãÂçäÈÉ®ÂàÜ */
    background-repeat: no-repeat;
    padding: 0;
    border-radius: 0;
}

/* --- ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç (Ê∑±ÈÇÉÊ®°Âºè) --- */
#phone-screen.dark-mode #char-diary-detail-content {
    background-color: #1C1C1E !important; /* Ê∑±ÁÅ∞Âç°Áâá */
    color: #F5F5F7 !important; /* ÊüîÁôΩÊñáÂ≠ó */
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
}

#phone-screen.dark-mode #char-diary-detail-content > p:first-of-type {
    color: #98989D !important;
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

#phone-screen.dark-mode #char-diary-detail-content .diary-highlight {
    background: rgba(255, 214, 10, 0.2); /* ÊöóÈªëÊ®°Âºè‰∏ãÊîπ‰∏∫ÂÖ®ËÉåÊôØÊ∑°Ê∑°È´ò‰∫Æ */
    background-size: 100% 100%;
    border-radius: 4px;
}
/* =================================================== */
/* ‚ñº‚ñº‚ñº CPhone ÁªàÊûÅÂõ∫ÂÆöÂ∏ÉÂ±Ä (‰ªø iOS È´òÁ∫ßË¥®ÊÑü) ‚ñº‚ñº‚ñº */
/* =================================================== */

/* CPhone ÁøªÈ°µÂÆπÂô® */
#cphone-pages-container {
    flex-grow: 1;
    width: 100%;
    overflow: hidden;
    position: relative;
}

#cphone-pages {
    display: flex;
    width: 200%; /* ‰∏§È°µ */
    height: 100%;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.cphone-page {
    width: 50%; /* ÊØèÈ°µÂç†50% */
    height: 100%;
    flex-shrink: 0;
}

/* CPhone È°µÈù¢ÊåáÁ§∫Âô® */
.cphone-pagination {
    display: none; /* ÈöêËóèÈ°µÈù¢ÊåáÁ§∫Âô® */
    justify-content: center;
    gap: 8px;
    padding: 10px 0;
    position: absolute;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
}

.cphone-pagination-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.4);
    transition: all 0.3s ease;
    cursor: pointer;
}

.cphone-pagination-dot.active {
    background-color: white;
    transform: scale(1.2);
}

#cphone-layout-container, #cphone-page-2-container, #myphone-layout-container {
    padding: 0 20px;
    display: flex;
    flex-direction: column;
    gap: 25px; /* Ë°å‰∏éË°å‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    width: 100%;
    box-sizing: border-box;
    align-items: center; /* Êï¥‰ΩìÂ±Ö‰∏≠ */
}

/* --- ÈÄöÁî®Ë°åÂ∏ÉÂ±ÄÔºöÂ∑¶Âè≥ÊéíÂàó --- */
.cphone-fixed-row {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 340px; /* ÈôêÂà∂ÊúÄÂ§ßÂÆΩÂ∫¶ÔºåÈò≤Ê≠¢Âú®Â§ßÂ±è‰∏äÊï£ÂºÄ */
}

/* --- 1. È°∂ÈÉ®ÈîôËêΩÊ∞îÊ≥° --- */
.cphone-staggered-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    max-width: 340px;
}

.cphone-bubble-pill {
    width: 85%; /* ‰∏çÂç†Êª°ÔºåÁïôÂá∫Á©∫ÈöôÊòæÁ§∫ÈîôËêΩÊÑü */
    height: 55px;
    border-radius: 28px;
    padding: 5px 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    box-sizing: border-box;
    
    /* ÁéªÁíÉÊãüÊÄÅ */
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    color: #fff;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* Â∑¶‰æßÊ∞îÊ≥°Èù†Â∑¶ */
.cphone-bubble-pill.left {
    align-self: flex-start;
    border-bottom-left-radius: 4px; /* Á®çÂæÆÊîπÂèò‰∏ÄÁÇπÂΩ¢Áä∂Â¢ûÂä†ËÆæËÆ°ÊÑü */
}

/* Âè≥‰æßÊ∞îÊ≥°Èù†Âè≥ */
.cphone-bubble-pill.right {
    align-self: flex-end;
    flex-direction: row-reverse; /* Â§¥ÂÉèÂú®Âè≥Ëæπ */
    border-top-right-radius: 4px;
}

.bubble-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.8);
    object-fit: cover;
    flex-shrink: 0;
}
.bubble-content {
    flex-grow: 1;
    overflow: hidden;
}
.bubble-content p {
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 13px;
    font-weight: 500;
}

/* --- 2. Âõ∫ÂÆöÂ§ßÂ∞èÁöÑ App ÁΩëÊ†º (2x2) --- */
.cphone-fixed-app-grid {
    width: 155px;  /* Âº∫Âà∂Âõ∫ÂÆöÂÆΩÂ∫¶ÔºÅ */
    height: 155px; /* Âº∫Âà∂Âõ∫ÂÆöÈ´òÂ∫¶ÔºÅ */
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 10px 15px; /* Ë°åÈó¥Ë∑ù10ÔºåÂàóÈó¥Ë∑ù15 */
    justify-items: center;
    align-items: center;
}

/* Ë∞ÉÊï¥ÂõæÊ†áÂ§ßÂ∞è‰ª•ÈÄÇÂ∫îÁ¥ßÂáëÂ∏ÉÂ±Ä */
.cphone-fixed-app-grid .app-icon.small {
    width: 60px; /* ÈôêÂà∂Êï¥‰ΩìÁÇπÂáªÂå∫Âüü */
}
.cphone-fixed-app-grid .app-icon.small .icon-bg {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    margin-bottom: 4px;
    /* Á°Æ‰øùÂõæÊ†á‰∏ç‰ºöË¢´Êãâ‰º∏ */
    min-width: 56px; 
}
.cphone-fixed-app-grid .app-icon.small .label {
    font-size: 11px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.6);
}

/* --- 3. Â†ÜÂè†ÊãçÁ´ãÂæóÁªÑ‰ª∂ --- */
.cphone-stack-polaroid-widget {
    width: 155px; /* Âõ∫ÂÆöÂ§ßÂ∞è */
    height: 155px;
    position: relative; /* Áî®‰∫éÁªùÂØπÂÆö‰ΩçÂ≠êÂÖÉÁ¥† */
}

.polaroid-stack-layer {
    width: 140px;
    height: 160px;
    background-color: #fff;
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    padding: 8px 8px 25px 8px; /* Â∫ïÈÉ®ÁïôÁôΩ */
    box-sizing: border-box;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    border-radius: 2px;
    transition: transform 0.3s ease;
}

/* Â∫ïÂ±ÇÁÖßÁâáÔºöÊóãËΩ¨ */
.polaroid-stack-layer.back {
    transform: translateX(-50%) rotate(-6deg);
    z-index: 1;
    background-color: #f0f0f0; /* Á®çÂæÆÊöó‰∏ÄÁÇπ */
}

/* È°∂Â±ÇÁÖßÁâáÔºöÁ®çÂæÆÂèçÂêëÊóãËΩ¨ */
.polaroid-stack-layer.front {
    transform: translateX(-50%) rotate(3deg) translateY(-5px);
    z-index: 2;
}

/* ÊÇ¨ÂÅúÊïàÊûúÔºöÊï£ÂºÄ */
.cphone-stack-polaroid-widget:hover .polaroid-stack-layer.back {
    transform: translateX(-65%) rotate(-12deg);
}
.cphone-stack-polaroid-widget:hover .polaroid-stack-layer.front {
    transform: translateX(-35%) rotate(8deg) scale(1.05);
}

.polaroid-inner {
    width: 100%;
    height: 100%;
    background: #eee;
    overflow: hidden;
}
.polaroid-inner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* --- 4. ÂúÜÂΩ¢ÁªÑ‰ª∂ --- */
.cphone-circle-widget-container {
    width: 155px;
    height: 155px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    
    /* ËÉåÊôØÊùø */
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 24px;
    border: 1px solid rgba(255,255,255,0.3);
}

.cphone-circle-widget {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(255,255,255,0.9);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    margin-bottom: 8px;
}
.cphone-circle-widget img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.circle-deco-text p {
    margin: 0;
    font-size: 12px;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0,0,0,0.4);
    font-family: "Georgia", serif; /* Ë°¨Á∫ø‰ΩìÊõ¥ÊñáËâ∫ */
    font-style: italic;
}
.circle-deco-line {
    width: 30px;
    height: 2px;
    background: rgba(255,255,255,0.6);
    margin: 4px auto 0 auto;
    border-radius: 2px;
}

/* --- Dock Ê†è‰ºòÂåñ --- */
.cphone-dock-container {
    padding: 0 15px;
    margin-bottom: calc(25px + env(safe-area-inset-bottom));
    margin-top: auto;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
}

.cphone-dock.glass {
    background: rgba(40, 40, 40, 0.4); /* Ê∑±Ëâ≤ÂçäÈÄèÊòéDockÔºåÂÉèiOS */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 32px;
    padding: 18px 20px;
    width: 100%;
    max-width: 340px; /* ÈôêÂà∂DockÊúÄÂ§ßÂÆΩÂ∫¶ */
    display: flex;
    justify-content: space-between;
}

.cphone-dock .app-icon .icon-bg {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    margin-bottom: 0; /* DockÈáå‰∏çË¶ÅÊñáÂ≠óÔºåÊâÄ‰ª•‰∏çÈúÄË¶Å‰∏ãËæπË∑ù */
}
.cphone-dock .app-icon .label {
    display: none; /* ÈöêËóèDockÊñáÂ≠ó */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .cphone-bubble-pill {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.1);
}
#phone-screen.dark-mode .polaroid-stack-layer {
    background-color: #333; /* ÊãçÁ´ãÂæóÁôΩËæπÂèòÈªë */
}
/* =================================================== */
/* ‚ñº‚ñº‚ñº CPhone È´òÁ∫ßÂõ∫ÂÆöÂ∏ÉÂ±Ä V3 (ÂÆåÁæéÂ§çÂàªÁâà) ‚ñº‚ñº‚ñº */
/* =================================================== */

#cphone-layout-container {
    display: flex;
    flex-direction: column;
    align-items: center; /* Âº∫Âà∂Â±Ö‰∏≠ */
    gap: 20px;
    width: 100%;
}

/* --- 1. ÈîôËêΩÊ∞îÊ≥°ÁªÑ --- */
.cphone-staggered-group {
    display: flex;
    flex-direction: column;
    gap: 8px; /* ‰∏§‰∏™Ê∞îÊ≥°‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    width: 330px; /* ÈîÅÂÆöÊÄªÂÆΩÂ∫¶ */
}

.cphone-bubble-pill {
    width: 290px; /* Âõ∫ÂÆöÊ∞îÊ≥°ÈïøÂ∫¶ */
    height: 60px; /* Âõ∫ÂÆöÊ∞îÊ≥°È´òÂ∫¶ */
    border-radius: 30px; /* ËÉ∂ÂõäÂΩ¢Áä∂ */
    display: flex;
    align-items: center;
    padding: 5px 8px;
    box-sizing: border-box;
    
    /* ÁéªÁíÉË¥®ÊÑüÂ§çÂàª */
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.35);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    color: #fff;
    text-shadow: 0 1px 3px rgba(0,0,0,0.15);
}

/* ‰∏äÊñπÊ∞îÊ≥°ÔºöÈù†Â∑¶ */
.cphone-bubble-pill.top {
    align-self: flex-start; 
}

/* ‰∏ãÊñπÊ∞îÊ≥°ÔºöÈù†Âè≥ */
.cphone-bubble-pill.bottom {
    align-self: flex-end;
    justify-content: flex-end; /* ÂÜÖÂÆπÈù†Âè≥ */
}

/* Â§¥ÂÉèÂÆπÂô® (Â∏¶ÁôΩËæπ) */
.bubble-avatar-container {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    background: rgba(255,255,255,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.bubble-avatar-container img {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    object-fit: cover;
}

/* Ê∞îÊ≥°ÊñáÂ≠óÂÜÖÂÆπÂå∫Âüü */
.bubble-content {
    flex-grow: 1;
    display: flex;
    align-items: center;
    padding: 0 10px;
    gap: 5px;
    overflow: hidden;
}

.bubble-content.left-align {
    justify-content: flex-start;
}
.bubble-content.right-align {
    justify-content: flex-end;
    text-align: right;
}

.bubble-content p {
    margin: 0;
    font-size: 14px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.bubble-deco-icon {
    font-size: 16px;
    opacity: 0.9;
}

/* --- ÈÄöÁî®Âõ∫ÂÆöË°å (ÈîÅÊ≠ªÂÆΩÂ∫¶) --- */
.cphone-fixed-row {
    display: flex;
    justify-content: space-between;
    width: 330px; /* ÈîÅÊ≠ªË°åÂÆΩ */
}

/* --- 2. App ÁΩëÊ†º (2x2 Âõ∫ÂÆö) --- */
.cphone-fixed-app-grid {
    width: 150px;
    height: 150px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 8px 15px;
    justify-items: center;
    align-items: start;
}
.app-icon.small .icon-bg {
    width: 54px;
    height: 54px;
    border-radius: 13px;
    margin-bottom: 3px;
    min-width: 54px; /* Èò≤Ê≠¢ÂéãÁº© */
}
.app-icon.small .label {
    font-size: 11px;
}

/* --- 3. Â†ÜÂè†ÊãçÁ´ãÂæó (Â§çÂàª) --- */
.cphone-stack-polaroid {
    width: 150px;
    height: 150px;
    position: relative;
}

/* Â∫ïÂ±ÇÁÖßÁâá (ÂÄæÊñú) */
.polaroid-bg-layer {
    width: 125px;
    height: 140px;
    background-color: #fff;
    position: absolute;
    top: 5px;
    left: 10px;
    transform: rotate(-6deg);
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    border-radius: 3px;
    z-index: 1;
}

/* È°∂Â±ÇÁÖßÁâá (‰∏ªÂõæ) */
.polaroid-main-layer {
    width: 125px;
    height: 145px;
    background-color: #fff;
    position: absolute;
    top: 0;
    left: 15px; /* Á®çÂæÆÈîô‰Ωç */
    transform: rotate(3deg);
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    border-radius: 3px;
    z-index: 2;
    padding: 8px 8px 25px 8px; /* ÁªèÂÖ∏ÁöÑÊãçÁ´ãÂæóÁïôÁôΩ */
    box-sizing: border-box;
    transition: transform 0.2s;
}

.polaroid-main-layer:hover {
    transform: rotate(0deg) scale(1.05) translateY(-5px);
    z-index: 10;
}

.polaroid-photo-frame {
    width: 100%;
    height: 100%;
    background-color: #eee;
    overflow: hidden;
}
.polaroid-photo-frame img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* --- 4. ÂúÜÂΩ¢ÁªÑ‰ª∂ (Â§çÂàª) --- */
.cphone-circle-widget-wrapper {
    width: 150px;
    height: 150px;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: 24px;
    border: 1px solid rgba(255,255,255,0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}

.cphone-circle-bg {
    width: 75px;
    height: 75px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(255,255,255,0.9);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    margin-bottom: 8px;
}
.cphone-circle-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.circle-text-area p {
    margin: 0;
    font-size: 12px;
    color: #fff;
    font-family: "Georgia", serif;
    font-style: italic;
    text-align: center;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.line-deco {
    width: 40px;
    height: 2px;
    background: rgba(255,255,255,0.5);
    margin: 4px auto 0 auto;
    border-radius: 2px;
    position: relative;
}
/* Âä†‰∏§‰∏™Â∞èÁÇπÂú®Ë£ÖÈ•∞Á∫ø‰∏§Á´Ø */
.line-deco::before, .line-deco::after {
    content: '';
    position: absolute;
    width: 4px;
    height: 4px;
    background: white;
    border-radius: 50%;
    top: -1px;
}
.line-deco::before { left: -2px; }
.line-deco::after { right: -2px; }

/* --- Dock Ê†è (‰øùÊåÅ‰∏çÂèò‰ΩÜÁ°Æ‰øùÂÆΩÂ∫¶) --- */
.cphone-dock-container {
    padding: 0;
    margin-top: auto;
    margin-bottom: calc(25px + env(safe-area-inset-bottom));
    width: 100%;
    display: flex;
    justify-content: center;
}

.cphone-dock {
    width: 330px; /* ÈîÅÊ≠ªÂÆΩÂ∫¶ */
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .cphone-bubble-pill,
#phone-screen.dark-mode .cphone-circle-widget-wrapper {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.1);
}
#phone-screen.dark-mode .polaroid-bg-layer,
#phone-screen.dark-mode .polaroid-main-layer {
    background-color: #2c2c2e;
}
/* --- 1. ÈîôËêΩÊ∞îÊ≥°ÁªÑ (Â∏¶ÂÄæÊñú) --- */
.cphone-staggered-group {
    display: flex;
    flex-direction: column;
    /* gap: 8px;  <-- ÁßªÈô§Ëøô‰∏™ gapÔºåÊîπÁî® margin ÊéßÂà∂ */
    width: 330px;
    padding: 10px 0; /* Â¢ûÂä†‰∏ä‰∏ãÂÜÖËæπË∑ùÔºåÁªôÂÄæÊñúÁïôÁ©∫Èó¥ */
}

.cphone-bubble-pill {
    width: 290px;
    height: 60px;
    border-radius: 30px;
    display: flex;
    align-items: center;
    padding: 5px 8px;
    box-sizing: border-box;
    
    /* ÁéªÁíÉË¥®ÊÑü */
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.35);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    color: #fff;
    text-shadow: 0 1px 3px rgba(0,0,0,0.15);
    
    /* ËÆ©ÊóãËΩ¨Êõ¥Âπ≥Êªë */
    transform-origin: center center;
    backface-visibility: hidden; 
}

/* ‰∏äÊñπÊ∞îÊ≥°ÔºöÈù†Â∑¶ + Âêë‰∏äÂÄæÊñú */
.cphone-bubble-pill.top {
    align-self: flex-start;
    transform: rotate(-3deg); /* ÂÖ≥ÈîÆÔºöÊóãËΩ¨ËßíÂ∫¶ */
    margin-bottom: -8px; /* Âêë‰∏äÊãâËøëË∑ùÁ¶ª */
    z-index: 2; /* Á®çÂæÆÂè†Âú®‰∏äÈù¢‰∏ÄÁÇπ */
}

/* ‰∏ãÊñπÊ∞îÊ≥°ÔºöÈù†Âè≥ + Âêë‰∏ãÂÄæÊñú */
.cphone-bubble-pill.bottom {
    align-self: flex-end;
    justify-content: flex-end;
    transform: rotate(2deg); /* ÂÖ≥ÈîÆÔºöÊóãËΩ¨ËßíÂ∫¶ */
    margin-top: -5px;
    z-index: 1;
}

/* ... (Â§¥ÂÉèÂÆπÂô®ÈÉ®ÂàÜ‰øùÊåÅ‰∏çÂèò) ... */
.bubble-avatar-container {
    width: 46px;
    height: 46px;
    border-radius: 50%;
    background: rgba(255,255,255,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.bubble-avatar-container img {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    object-fit: cover;
}

/* Ê∞îÊ≥°ÊñáÂ≠óÂÜÖÂÆπÂå∫Âüü */
.bubble-content {
    flex-grow: 1;
    display: flex;
    align-items: center;
    padding: 0 10px;
    gap: 5px;
    overflow: hidden;
    cursor: text; /* Èº†Ê†áÊîæ‰∏äÂéªÊòæÁ§∫ÂèØËæìÂÖ•Áä∂ÊÄÅ */
}

/* ÁºñËæëÊó∂ÁöÑËæìÂÖ•Ê°ÜÊ†∑Âºè */
.bubble-edit-input {
    background: rgba(255,255,255,0.2);
    border: none;
    border-radius: 4px;
    color: #fff;
    padding: 4px;
    width: 100%;
    outline: none;
    text-shadow: none;
}
/* =================================================== */
/* ‚ñº‚ñº‚ñº CPhone Â∏ÉÂ±Ä‰øÆÊ≠£ V4 (ÂÄæÊñú+Â§ñÊ°Ü+ÁºñËæë‰øÆÂ§ç) ‚ñº‚ñº‚ñº */
/* =================================================== */

#cphone-layout-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    width: 100%;
}

/* --- 1. È°∂ÈÉ®Ê∞îÊ≥° (ÂÄæÊñú‰øÆÊ≠£) --- */
.cphone-staggered-group {
    display: flex;
    flex-direction: column;
    width: 330px;
    /* ÁªôÊóãËΩ¨ÁïôÂá∫‰∏ä‰∏ãÁ©∫Èó¥ÔºåÈò≤Ê≠¢Ë¢´ÂàáÊéâ */
    padding: 15px 0; 
    position: relative;
}

.cphone-bubble-pill {
    width: 290px;
    height: 60px;
    border-radius: 35px; /* Êõ¥ÂúÜÊ∂¶ */
    display: flex;
    align-items: center;
    padding: 5px 8px;
    box-sizing: border-box;
    
    /* ÁéªÁíÉË¥®ÊÑü */
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    color: #fff;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    
    /* Ê†∏ÂøÉÔºöÊóãËΩ¨Âü∫ÁÇπ */
    transform-origin: center;
    transition: transform 0.3s ease;
}

/* ‰∏äÊñπÊ∞îÊ≥°ÔºöÂêëÂ∑¶‰∏äÂÄæÊñú (-3Â∫¶) */
.cphone-bubble-pill.top {
    align-self: flex-start;
    transform: rotate(-3deg); 
    margin-bottom: -10px; /* ÊãâËøëË∑ùÁ¶ª */
    z-index: 2;
    margin-left: 5px;
}

/* ‰∏ãÊñπÊ∞îÊ≥°ÔºöÂêëÂè≥‰∏ãÂÄæÊñú (2Â∫¶) */
.cphone-bubble-pill.bottom {
    align-self: flex-end;
    justify-content: flex-end; /* ÂÜÖÂÆπÈù†Âè≥ */
    transform: rotate(2deg); 
    margin-top: -5px;
    z-index: 1;
    margin-right: 5px;
}

/* ÁºñËæëÊó∂ÁöÑËæìÂÖ•Ê°ÜÊ†∑Âºè (‰øÆÂ§çÊñáÂ≠óÊó†Ê≥ï‰øÆÊîπÁöÑÈóÆÈ¢ò) */
.bubble-edit-input {
    background: rgba(0, 0, 0, 0.1);
    border: none;
    border-radius: 4px;
    color: #fff;
    padding: 2px 5px;
    font-size: inherit;
    font-family: inherit;
    width: 100%;
    outline: none;
}

/* Â§¥ÂÉèÂÆπÂô® */
.bubble-avatar-container {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba(255,255,255,0.7); /* ÂçäÈÄèÊòéÁôΩÂ∫ï */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    border: 1px solid rgba(255,255,255,0.8);
}
.bubble-avatar-container img {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    object-fit: cover;
}

/* ÊñáÂ≠óÂå∫Âüü */
.bubble-content {
    flex-grow: 1;
    display: flex;
    align-items: center;
    padding: 0 12px;
    gap: 6px;
    overflow: hidden;
    cursor: text; /* ÊèêÁ§∫ÂèØÁºñËæë */
}
.bubble-content.left-align { justify-content: flex-start; }
.bubble-content.right-align { justify-content: flex-end; text-align: right; }

.bubble-content p {
    margin: 0;
    font-size: 14px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    pointer-events: none; /* ËÆ©ÁÇπÂáªÁ©øÈÄèÂà∞Áà∂ÂÆπÂô®ÔºåËß¶Âèëonclick */
}

.bubble-deco-icon { font-size: 14px; opacity: 0.9; }

/* --- 2. App ÁΩëÊ†º (‰øùÊåÅÂõ∫ÂÆö) --- */
.cphone-fixed-row {
    display: flex;
    justify-content: space-between;
    width: 330px;
}
.cphone-fixed-app-grid {
    width: 150px;
    height: 150px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 8px 15px;
    justify-items: center;
    align-items: start;
}
.app-icon.small .icon-bg {
    width: 54px;
    height: 54px;
    border-radius: 13px;
    margin-bottom: 3px;
    min-width: 54px;
}
.app-icon.small .label { font-size: 11px; }

/* --- 3. ÊãçÁ´ãÂæó (‰øùÊåÅÂ†ÜÂè†) --- */
.cphone-stack-polaroid {
    width: 150px;
    height: 150px;
    position: relative;
}
.polaroid-bg-layer {
    width: 125px;
    height: 140px;
    background-color: #f5f5f5;
    position: absolute;
    top: 5px;
    left: 10px;
    transform: rotate(-6deg);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-radius: 2px;
    z-index: 1;
    border: 1px solid #eee;
}
.polaroid-main-layer {
    width: 125px;
    height: 145px;
    background-color: #fff;
    position: absolute;
    top: 0;
    left: 15px;
    transform: rotate(4deg);
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    border-radius: 2px;
    z-index: 2;
    padding: 8px 8px 25px 8px;
    box-sizing: border-box;
    transition: transform 0.2s;
}
.polaroid-main-layer:hover {
    transform: rotate(0deg) scale(1.05) translateY(-5px);
    z-index: 10;
}
.polaroid-photo-frame {
    width: 100%;
    height: 100%;
    background-color: #eee;
    overflow: hidden;
}
.polaroid-photo-frame img { width: 100%; height: 100%; object-fit: cover; }

/* --- 4. ÂúÜÂΩ¢ÁªÑ‰ª∂ (Â§ñÊ°Ü‰øÆÂ§ç) --- */
.cphone-circle-widget-wrapper {
    width: 150px;
    height: 150px;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: 24px;
    border: 1px solid rgba(255,255,255,0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* „Äê‰øÆÂ§ç„ÄëÂúÜÂΩ¢ÂõæÁâáÁöÑÂ§ñÊ°Ü */
.cphone-circle-bg {
    width: 75px;
    height: 75px;
    border-radius: 50%;
    overflow: hidden;
    /* ËøôÈáåÂä†Á≤ó‰∫ÜËæπÊ°ÜÔºåÂπ∂‰∏î‰ΩøÁî®‰∫ÜÁ∫ØÁôΩËâ≤ */
    border: 3px solid #ffffff; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* Â¢ûÂä†Èò¥ÂΩ±ËÆ©ÁôΩËæπÊõ¥ÊòéÊòæ */
    margin-bottom: 8px;
    background-color: #fff;
}
.cphone-circle-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.circle-text-area p {
    margin: 0;
    font-size: 12px;
    color: #fff;
    font-family: "Georgia", serif;
    font-style: italic;
    text-align: center;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}
.line-deco {
    width: 30px;
    height: 2px;
    background: rgba(255,255,255,0.8);
    margin: 5px auto 0 auto;
    border-radius: 2px;
    position: relative;
}
.line-deco::before, .line-deco::after {
    content: '';
    position: absolute;
    width: 4px;
    height: 4px;
    background: white;
    border-radius: 50%;
    top: -1px;
}
.line-deco::before { left: -3px; }
.line-deco::after { right: -3px; }

/* --- Dock --- */
.cphone-dock-container {
    padding: 0;
    margin-top: auto;
    margin-bottom: calc(25px + env(safe-area-inset-bottom));
    width: 100%;
    display: flex;
    justify-content: center;
}
.cphone-dock { width: 330px; }

/* ÊöóÈªëÊ®°Âºè */
#phone-screen.dark-mode .cphone-bubble-pill,
#phone-screen.dark-mode .cphone-circle-widget-wrapper {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.1);
}
#phone-screen.dark-mode .cphone-circle-bg {
    border-color: rgba(255, 255, 255, 0.8); /* ÊöóÈªëÊ®°Âºè‰∏ãÁ®çÂæÆÊöó‰∏ÄÁÇπÁöÑÁôΩ */
}
/* ================================================== */
/* ‚ñº‚ñº‚ñº CPhone ÁïåÈù¢Áªü‰∏ÄÂåñ‰øÆÂ§çË°•‰∏Å (ÂéªÈô§Â§ñÊ°Ü + ÊîæÂ§ßÂõæÊ†á) ‚ñº‚ñº‚ñº */
/* ================================================== */

/* 1. „ÄêÂ∑¶‰æßÁªÑ‰ª∂„ÄëÂéªÈô§ÂúÜÂΩ¢ÁªÑ‰ª∂ÁöÑ"‰∏ë"Â§ñÊ°Ü */
.cphone-circle-widget-wrapper {
    background: transparent !important;       /* ÂéªÊéâËÉåÊôØËâ≤ */
    border: none !important;                  /* ÂéªÊéâËæπÊ°ÜÁ∫ø */
    backdrop-filter: none !important;         /* ÂéªÊéâÁ£®Á†ÇÁéªÁíÉ */
    -webkit-backdrop-filter: none !important;
    box-shadow: none !important;              /* ÂéªÊéâÈò¥ÂΩ± */
}

/* ‰ºòÂåñÂéªÈô§Â§ñÊ°ÜÂêéÁöÑÊñáÂ≠óÊòæÁ§∫ (Âä†Âº∫Èò¥ÂΩ±ÔºåÈò≤Ê≠¢Áúã‰∏çÊ∏Ö) */
.circle-text-area p {
    text-shadow: 0 1px 4px rgba(0,0,0,0.8) !important;
    font-weight: 500 !important;
}
/* ÂéªÈô§Ë£ÖÈ•∞Á∫ø (Êó¢ÁÑ∂‰∏çË¶ÅÊ°Ü‰∫ÜÔºåË£ÖÈ•∞Á∫øÊÇ¨Á©∫‰ºöÂæàÊÄ™) */
.line-deco {
    display: none !important; 
}

/* 2. „ÄêÂõæÊ†áÂ§ßÂ∞è„ÄëÊîæÂ§ß CPhone ÂõæÊ†á (ÂØπÈΩê EPhone) */
/* Ë∞ÉÊï¥ÁΩëÊ†ºÈó¥Ë∑ùÔºåÁªôÂ§ßÂõæÊ†áËÖæÂá∫Á©∫Èó¥ */
.cphone-fixed-app-grid {
    gap: 2px 15px !important; /* ÂáèÂ∞èË°åÈó¥Ë∑ù */
}

/* Âº∫Âà∂ÊîæÂ§ßÂõæÊ†áËÉåÊôØ */
.app-icon.small .icon-bg {
    width: 62px !important;      /* Âéü‰∏∫ 54px -> Êîπ‰∏∫ 62px */
    height: 62px !important;
    min-width: 62px !important;
    border-radius: 16px !important; /* Á®çÂæÆÂúÜÊ∂¶‰∏ÄÁÇπ */
    margin-bottom: 5px !important;
}

/* 3. „ÄêÂ≠ó‰ΩìÁªü‰∏Ä„Äë‰øÆÊ≠£ CPhone Â≠ó‰ΩìÈ¢úËâ≤ÂíåÂ§ßÂ∞è */
.app-icon.small .label {
    font-size: 13px !important;  /* Âéü‰∏∫ 11px -> Êîπ‰∏∫ EPhone Ê†áÂáÜÁöÑ 13px */
    color: #ffffff !important;   /* Á∫ØÁôΩÊñáÂ≠ó */
    font-weight: 500 !important;
    /* Áªü‰∏Ä‰ΩøÁî® EPhone ÁöÑÂº∫Èò¥ÂΩ±Ôºå‰øùËØÅÂú®‰∫ÆËâ≤Â£ÅÁ∫∏‰∏ä‰πüÊ∏ÖÊô∞ */
    text-shadow: 0 1px 3px rgba(0,0,0,0.6) !important; 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
}

/* 4. „ÄêDockÊ†è„ÄëÊîπ‰∏∫ EPhone È£éÊ†º (ÊµÖËâ≤ÈÄèÊòé) */
.cphone-dock.glass {
    /* Âéü‰∏∫Ê∑±ÁÅ∞Ëâ≤ rgba(40, 40, 40, 0.4) -> Êîπ‰∏∫ÊµÖÁôΩÈÄèÊòé */
    background: rgba(255, 255, 255, 0.2) !important; 
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(20px) !important;
    -webkit-backdrop-filter: blur(20px) !important;
    /* Á®çÂæÆË∞ÉÊï¥ÂúÜËßíÔºå‰ΩøÂÖ∂‰∏çÈÇ£‰πàÂúÜÔºåÊõ¥ÂÉè EPhone ÁöÑ Dock */
    border-radius: 24px !important; 
}

/* 5. „ÄêDockÂõæÊ†á„ÄëÁ°Æ‰øù Dock ÈáåÁöÑÂõæÊ†á‰πüÂ§üÂ§ß */
.cphone-dock .app-icon .icon-bg {
    width: 60px !important;
    height: 60px !important;
}

/* --- ÊöóÈªëÊ®°Âºè‰∏ãÁöÑÈÄÇÈÖç‰øÆÊ≠£ --- */
#phone-screen.dark-mode .cphone-dock.glass {
    /* ÊöóÈªëÊ®°Âºè‰∏ãÁ®çÂæÆÊ∑±‰∏ÄÁÇπÔºå‰ΩÜ‰øùÊåÅÈÄöÈÄè */
    background: rgba(50, 50, 50, 0.4) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}
/* ================================================== */
/* ‚ñº‚ñº‚ñº CPhone ÁïåÈù¢Áªü‰∏ÄÂåñ‰øÆÂ§çË°•‰∏Å (ÂéªÈô§Â§ñÊ°Ü + ÊîæÂ§ßÂõæÊ†á) ‚ñº‚ñº‚ñº */
/* ================================================== */

/* 1. „ÄêÂ∑¶‰æßÁªÑ‰ª∂„ÄëÂéªÈô§ÂúÜÂΩ¢ÁªÑ‰ª∂ÁöÑ"‰∏ë"Â§ñÊ°Ü */
.cphone-circle-widget-wrapper {
    background: transparent !important;       /* ÂéªÊéâËÉåÊôØËâ≤ */
    border: none !important;                  /* ÂéªÊéâËæπÊ°ÜÁ∫ø */
    backdrop-filter: none !important;         /* ÂéªÊéâÁ£®Á†ÇÁéªÁíÉ */
    -webkit-backdrop-filter: none !important;
    box-shadow: none !important;              /* ÂéªÊéâÈò¥ÂΩ± */
}

/* ‰ºòÂåñÂéªÈô§Â§ñÊ°ÜÂêéÁöÑÊñáÂ≠óÊòæÁ§∫ (Âä†Âº∫Èò¥ÂΩ±ÔºåÈò≤Ê≠¢Áúã‰∏çÊ∏Ö) */
.circle-text-area p {
    text-shadow: 0 1px 4px rgba(0,0,0,0.8) !important;
    font-weight: 500 !important;
}
/* ÂéªÈô§Ë£ÖÈ•∞Á∫ø (Êó¢ÁÑ∂‰∏çË¶ÅÊ°Ü‰∫ÜÔºåË£ÖÈ•∞Á∫øÊÇ¨Á©∫‰ºöÂæàÊÄ™) */
.line-deco {
    display: none !important; 
}

/* 2. „ÄêÂõæÊ†áÂ§ßÂ∞è„ÄëÊîæÂ§ß CPhone ÂõæÊ†á (ÂØπÈΩê EPhone) */
/* Ë∞ÉÊï¥ÁΩëÊ†ºÈó¥Ë∑ùÔºåÁªôÂ§ßÂõæÊ†áËÖæÂá∫Á©∫Èó¥ */
.cphone-fixed-app-grid {
    gap: 2px 15px !important; /* ÂáèÂ∞èË°åÈó¥Ë∑ù */
}

/* Âº∫Âà∂ÊîæÂ§ßÂõæÊ†áËÉåÊôØ */
.app-icon.small .icon-bg {
    width: 62px !important;      /* Âéü‰∏∫ 54px -> Êîπ‰∏∫ 62px */
    height: 62px !important;
    min-width: 62px !important;
    border-radius: 16px !important; /* Á®çÂæÆÂúÜÊ∂¶‰∏ÄÁÇπ */
    margin-bottom: 5px !important;
}

/* 3. „ÄêÂ≠ó‰ΩìÁªü‰∏Ä„Äë‰øÆÊ≠£ CPhone Â≠ó‰ΩìÈ¢úËâ≤ÂíåÂ§ßÂ∞è */
.app-icon.small .label {
    font-size: 13px !important;  /* Âéü‰∏∫ 11px -> Êîπ‰∏∫ EPhone Ê†áÂáÜÁöÑ 13px */
    color: #ffffff !important;   /* Á∫ØÁôΩÊñáÂ≠ó */
    font-weight: 500 !important;
    /* Áªü‰∏Ä‰ΩøÁî® EPhone ÁöÑÂº∫Èò¥ÂΩ±Ôºå‰øùËØÅÂú®‰∫ÆËâ≤Â£ÅÁ∫∏‰∏ä‰πüÊ∏ÖÊô∞ */
    text-shadow: 0 1px 3px rgba(0,0,0,0.6) !important; 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
}

/* 4. „ÄêDockÊ†è„ÄëÊîπ‰∏∫ EPhone È£éÊ†º (ÊµÖËâ≤ÈÄèÊòé) */
.cphone-dock.glass {
    /* Âéü‰∏∫Ê∑±ÁÅ∞Ëâ≤ rgba(40, 40, 40, 0.4) -> Êîπ‰∏∫ÊµÖÁôΩÈÄèÊòé */
    background: rgba(255, 255, 255, 0.2) !important; 
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(20px) !important;
    -webkit-backdrop-filter: blur(20px) !important;
    /* Á®çÂæÆË∞ÉÊï¥ÂúÜËßíÔºå‰ΩøÂÖ∂‰∏çÈÇ£‰πàÂúÜÔºåÊõ¥ÂÉè EPhone ÁöÑ Dock */
    border-radius: 24px !important; 
}

/* 5. „ÄêDockÂõæÊ†á„ÄëÁ°Æ‰øù Dock ÈáåÁöÑÂõæÊ†á‰πüÂ§üÂ§ß */
.cphone-dock .app-icon .icon-bg {
    width: 60px !important;
    height: 60px !important;
}

/* --- ÊöóÈªëÊ®°Âºè‰∏ãÁöÑÈÄÇÈÖç‰øÆÊ≠£ --- */
#phone-screen.dark-mode .cphone-dock.glass {
    /* ÊöóÈªëÊ®°Âºè‰∏ãÁ®çÂæÆÊ∑±‰∏ÄÁÇπÔºå‰ΩÜ‰øùÊåÅÈÄöÈÄè */
    background: rgba(50, 50, 50, 0.4) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}
/* ========================================================= */
/* ‚ñº‚ñº‚ñº CPhone Â∏ÉÂ±ÄÂæÆË∞ÉË°•‰∏Å V2 (Ê∞îÊ≥°ÂØπÈΩê + ÂúÜÂΩ¢‰∏ãÁßª) ‚ñº‚ñº‚ñº */
/* ========================================================= */

/* 1. „ÄêÂúÜÂΩ¢ÁªÑ‰ª∂„Äë‰ΩçÁΩÆ‰∏ãÁßª‰øÆÊ≠£ */
.cphone-circle-widget-wrapper {
    /* ÂéüÊù•ÊòØÈù†È°∂ÂØπÈΩêÔºåÁé∞Âú®ÂæÄ‰∏ãÊé® 30pxÔºåËßÜËßâ‰∏äÊõ¥Âπ≥Ë°° */
    margin-top: 30px !important; 
    
    /* Êó¢ÁÑ∂ÂéªÊéâ‰∫ÜÂ§ñÊ°ÜÔºåÁ°Æ‰øùÂÆÉÊòØÈÄèÊòéÁöÑ */
    background: transparent !important;
    border: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    box-shadow: none !important;
}

/* 2. „ÄêÁ¨¨‰∏ÄË°åÊ∞îÊ≥°„ÄëÂÆπÂô®Ë∞ÉÊï¥ */
.cphone-staggered-group {
    width: 100% !important; /* Âç†Êª°Êï¥Ë°å */
    max-width: 360px !important; /* ÈôêÂà∂ÊúÄÂ§ßÂÆΩ */
    padding: 10px 5px !important; /* Â∑¶Âè≥ÁïôÁÇπÂëºÂê∏Á©∫Èó¥ */
    box-sizing: border-box !important;
    display: flex !important;
    flex-direction: column !important;
    /* ÂéªÊéâ gapÔºåÂÆåÂÖ®Èù† margin ÊéßÂà∂‰ΩçÁΩÆ */
    gap: 0 !important; 
}

/* 3. „Äê‰∏äÊñπÊ∞îÊ≥°„Äë‰∏•Ê†ºÂ∑¶ÂØπÈΩê + ÂêëÂ∑¶‰∏äÂÄæÊñú */
.cphone-bubble-pill.top {
    /* Á®çÂæÆÁº©Áü≠ÂÆΩÂ∫¶ÔºåËÆ©‚ÄúÈù†Â∑¶‚ÄùÊõ¥ÊòéÊòæ */
    width: 275px !important; 
    
    /* Ê†∏ÂøÉÂØπÈΩê‰ª£Á†Å */
    align-self: flex-start !important; 
    margin-right: auto !important; /* Âº∫Âà∂ÊääÂè≥ËæπÁ©∫Âá∫Êù• */
    margin-left: 5px !important;   /* Á¶ªÂ∑¶ËæπÁºò‰∏ÄÁÇπÁÇπË∑ùÁ¶ª */
    
    /* ÂÄæÊñú‰∏éÈáçÂè†ÊéßÂà∂ */
    transform: rotate(-3deg) !important;
    margin-bottom: -10px !important; /* Âè™ÊòØËΩªÂæÆÈáçÂè†Ôºå‰∏çÂÜçÊòØÂ§ßÈù¢ÁßØÈáçÂêà */
    z-index: 2 !important; /* ÂéãÂú®‰∏ãÈù¢ÈÇ£‰∏™‰∏äÈù¢ */
}

/* 4. „Äê‰∏ãÊñπÊ∞îÊ≥°„Äë‰∏•Ê†ºÂè≥ÂØπÈΩê + ÂêëÂè≥‰∏ãÂÄæÊñú */
.cphone-bubble-pill.bottom {
    /* ÂÆΩÂ∫¶‰øùÊåÅ‰∏ÄËá¥ */
    width: 275px !important;
    
    /* Ê†∏ÂøÉÂØπÈΩê‰ª£Á†Å */
    align-self: flex-end !important;
    margin-left: auto !important;  /* Âº∫Âà∂ÊääÂ∑¶ËæπÁ©∫Âá∫Êù• */
    margin-right: 5px !important;  /* Á¶ªÂè≥ËæπÁºò‰∏ÄÁÇπÁÇπË∑ùÁ¶ª */
    
    /* ÂÄæÊñú‰∏éÈáçÂè†ÊéßÂà∂ */
    transform: rotate(2deg) !important;
    margin-top: 0 !important;
    z-index: 1 !important;
}

/* 5. Á°Æ‰øùÊ∞îÊ≥°ÂÜÖÁöÑÊñáÂ≠óËÉΩÂÆåÊï¥ÊòæÁ§∫ */
.bubble-content {
    /* ‰øÆÂ§çÂèØËÉΩË¢´ÂéãÁº©ÁöÑÈóÆÈ¢ò */
    flex-shrink: 1 !important;
    min-width: 0 !important;
}
/* ================================================================= */
/* ‚ñº‚ñº‚ñº Swiss Style ÁªàÊûÅÁâàÂºè‰øÆÊ≠£ (Steve Jobs Approved) ‚ñº‚ñº‚ñº */
/* ================================================================= */

/* --- 1. ÂÖ®Â±ÄÂ∏ÉÂ±ÄÂÆπÂô®ÔºöÂ¢ûÂä†ÂëºÂê∏ÊÑü --- */
#cphone-layout-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    /* Â¢ûÂä†ÂûÇÁõ¥Èó¥Ë∑ùÔºåËøôÂ∞±ÊòØ‚ÄúÊï∞ÂçÉÁæéÂÖÉ‚ÄùÁöÑÈ´òÁ∫ßÊÑüÊù•Ê∫ê */
    gap: 35px !important; 
    padding-top: 10px; /* Á®çÂæÆÂæÄ‰∏ãÂéã‰∏ÄÁÇπÔºå‰∏çÈ°∂Â§¥ */
}

/* Áªü‰∏ÄÊâÄÊúâË°åÁöÑÂÆΩÂ∫¶ÔºåÁ°Æ‰øùËßÜËßâËæπÁºòÂûÇÁõ¥ÂØπÈΩê */
.cphone-staggered-group,
.cphone-fixed-row,
.cphone-dock {
    width: 330px !important; /* ÈªÑÈáëÂÆΩÂ∫¶ÔºåÈÄÇÈÖçÂ§ßÈÉ®ÂàÜÊâãÊú∫Â±è */
    max-width: 100% !important;
}

/* --- 2. ÈîôËêΩÊ∞îÊ≥°ÔºöÁ≤æÂáÜÂØπÈΩêÁÆóÊ≥ï --- */
.cphone-staggered-group {
    padding: 5px 0 !important;
    gap: 0 !important; /* ÈáçÂè†Áî± margin ÊéßÂà∂ */
    position: relative;
    /* Á°Æ‰øùÂÆπÂô®Êú¨Ë∫´‰∏çË£ÅÂâ™Èò¥ÂΩ± */
    overflow: visible !important; 
}

.cphone-bubble-pill {
    /* Á®çÂæÆÁº©Áü≠ÂÆΩÂ∫¶Ôºå‰∏∫ÊóãËΩ¨ÁïôÂá∫‰ΩôÈáèÔºåÈò≤Ê≠¢ËßÜËßâÊ∫¢Âá∫ */
    width: 285px !important; 
    height: 58px !important;
    border-radius: 29px !important;
    
    /* ÁéªÁíÉË¥®ÊÑüÂ¢ûÂº∫ÔºöÊõ¥ÈÄöÈÄè */
    background: rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(25px) !important;
    -webkit-backdrop-filter: blur(25px) !important;
    border: 1px solid rgba(255, 255, 255, 0.25) !important;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05) !important;
}

/* ‰∏äÊñπÊ∞îÊ≥°ÔºöÂ∑¶ÂØπÈΩê + ÁªïÂ∑¶‰æßÊóãËΩ¨ */
.cphone-bubble-pill.top {
    align-self: flex-start !important; /* Áâ©ÁêÜÈù†Â∑¶ */
    margin-right: auto !important;
    
    /* Ê†∏ÂøÉÔºöËΩ¥ÂøÉËÆæÂú®Â∑¶‰æßÔºåÊóãËΩ¨Êó∂Â∑¶Ëæπ‰∏çÂä®ÔºåÂè≥ËæπÁøòËµ∑ */
    transform-origin: center left !important; 
    transform: rotate(-4deg) translateY(0px) !important;
    
    margin-bottom: -18px !important; /* Âêë‰∏ãÊå§ÂéãÔºåÂàõÈÄ†Â±ÇÂè†ÊÑü */
    margin-left: 2px !important; /* ÂæÆË∞ÉËßÜËßâËæπÁºò */
    z-index: 2;
}

/* ‰∏ãÊñπÊ∞îÊ≥°ÔºöÂè≥ÂØπÈΩê + ÁªïÂè≥‰æßÊóãËΩ¨ */
.cphone-bubble-pill.bottom {
    align-self: flex-end !important; /* Áâ©ÁêÜÈù†Âè≥ */
    margin-left: auto !important;
    
    /* Ê†∏ÂøÉÔºöËΩ¥ÂøÉËÆæÂú®Âè≥‰æßÔºåÊóãËΩ¨Êó∂Âè≥Ëæπ‰∏çÂä®ÔºåÂ∑¶ËæπÂûÇ‰∏ã */
    transform-origin: center right !important;
    transform: rotate(3deg) translateY(0px) !important;
    
    margin-top: 0 !important;
    margin-right: 2px !important; /* ÂæÆË∞ÉËßÜËßâËæπÁºò */
    z-index: 1;
}

/* --- 3. ÂúÜÂΩ¢ÁªÑ‰ª∂ÊñáÂ≠ó‰ºòÂåñÔºöÂ¢ûÂä†Èó¥Ë∑ù --- */
.cphone-circle-widget-wrapper {
    /* ÁßªÈô§ËÉåÊôØÂíåËæπÊ°ÜÔºå‰øùÊåÅÈÄèÊòé */
    background: transparent !important;
    border: none !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    box-shadow: none !important;
    
    /* ÂûÇÁõ¥Â∏ÉÂ±Ä */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.cphone-circle-bg {
    /* ÂõæÁâáÂÆπÂô® */
    margin-bottom: 0 !important; /* ÁßªÈô§ÊóßËæπË∑ùÔºåÁî± text-area ÁöÑ margin-top ÊéßÂà∂ */
}

.circle-text-area {
    /* ÂºÄÂêØ Flex Â∏ÉÂ±ÄÊù•ÊéßÂà∂‰∏§Ë°åÂ≠óÁöÑÈó¥Ë∑ù */
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    
    /* ËøôÈáåÊéßÂà∂‰∏§Ë°åÊñáÂ≠ó‰∏≠Èó¥ÁöÑË∑ùÁ¶ªÔºåËøôÂ∞±ÊòØ‰Ω†Ë¶ÅÁöÑ */
    gap: 6px !important; 
    
    /* ÊéßÂà∂ÊñáÂ≠óÊï¥‰Ωì‰∏éÂúÜÂõæÁöÑË∑ùÁ¶ª */
    margin-top: 15px !important; 
}

/* Á¨¨‰∏ÄË°åÂ≠óÔºö‰∏ªÊ†áÈ¢ò */
#cphone-circle-text {
    font-size: 15px !important;
    font-weight: 600 !important;
    letter-spacing: 0.5px !important; /* Â≠óÈó¥Ë∑ùÂæÆË∞É */
    color: #ffffff !important;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5) !important;
    line-height: 1 !important;
    margin: 0 !important;
}

/* Á¨¨‰∫åË°åÂ≠óÔºöÂâØÊ†áÈ¢ò */
#cphone-circle-subtext {
    font-size: 12px !important;
    font-weight: 400 !important;
    opacity: 0.85 !important;
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5) !important;
    font-family: "Georgia", serif !important; /* Ë°¨Á∫ø‰ΩìÔºå‰ºòÈõÖ */
    font-style: italic !important;
    line-height: 1 !important;
    margin: 0 !important;
}

/* --- 4. ÂÜçÊ¨°Á°Æ‰øùÂõæÊ†áÂ§ßÂ∞èÁªü‰∏Ä (Èò≤Ê≠¢Ë¢´Ë¶ÜÁõñ) --- */
.cphone-fixed-app-grid {
    gap: 8px 15px !important; /* ÂæÆË∞ÉÁΩëÊ†ºÈó¥Ë∑ù */
}
.app-icon.small .icon-bg {
    width: 62px !important;
    height: 62px !important;
    min-width: 62px !important;
    border-radius: 15px !important; /* iOS Ê†áÂáÜÂúÜËßí */
    box-shadow: 0 4px 10px rgba(0,0,0,0.1) !important;
}
.app-icon.small .label {
    margin-top: 4px !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5) !important;
}

/* --- 5. ÊãçÁ´ãÂæóÂ†ÜÂè†‰ºòÂåñ (Âè≥‰æßÁªÑ‰ª∂) --- */
/* ËÆ©ÊãçÁ´ãÂæó‰πüÁ®çÂæÆÂÄæÊñú‰∏ÄÁÇπÁÇπÔºåÂ¢ûÂä†ÈöèÊÑèÊÑü */
.cphone-stack-polaroid {
    transform: rotate(2deg);
}


/* --- CPhone Ê∞îÊ≥°ÔºöÂº∫Âà∂ÂØπÈΩêÂ§çÂàªÁâà --- */

/* 1. ÂÆπÂô®ÔºöÂº∫Âà∂Â±Ö‰∏≠ÔºåÈîÅÊ≠ªÂÆΩÂ∫¶ */
.cphone-staggered-group {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important; /* Ê†∏ÂøÉÔºöÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê */
    width: 330px !important;        /* Ê†∏ÂøÉÔºöÂõ∫ÂÆöÂÆΩÂ∫¶ */
    margin: 0 auto !important;
    padding: 10px 0 !important;
    gap: 0 !important;              /* ÂéªÊéâÈó¥ÈöôÔºåÁî® margin ÊéßÂà∂Â†ÜÂè† */
}

/* 2. Ê∞îÊ≥°ÈÄöÁî®ÔºöÂ°´Êª°ÂÆπÂô®Ôºå‰øùÊåÅ‰∏ÄËá¥ */
.cphone-bubble-pill {
    width: 100% !important;         /* Âº∫Âà∂Âç†Êª° 330pxÔºå‰øùËØÅ‰∏ä‰∏ã‰∏ÄÊ†∑ÂÆΩ */
    height: 60px !important;
    border-radius: 35px !important; /* Êõ¥ÂúÜÊ∂¶‰∏ÄÁÇπ */
    box-sizing: border-box !important;
    transition: transform 0.3s ease !important;
    
    /* Ê†∏ÂøÉÔºöÂÖ®ÈÉ®Áªï‰∏≠ÂøÉÊóãËΩ¨Ôºå‰øùËØÅ‰∏ç‰ºöÊ≠™Âà∞Ê≤°Ëæπ */
    transform-origin: center center !important; 
}

/* 3. ‰∏äÊñπÊ∞îÊ≥°ÔºöÂ∑¶‰ΩéÂè≥È´ò (-3deg) */
.cphone-bubble-pill.top {
    align-self: center !important;  /* Âº∫Âà∂Â±Ö‰∏≠Ôºå‰∏çË¶ÅÈù†Â∑¶ */
    transform: rotate(-3deg) !important;
    
    margin-bottom: -12px !important; /* Âêë‰∏ãÊå§ÂéãÔºå‰∫ßÁîüÂ†ÜÂè†ÊÑü */
    z-index: 2 !important;           /* ÂéãÂú®‰∏ãÈù¢ÈÇ£‰∏™‰∏äÈù¢ */
    
    /* Ê∏ÖÈô§ÊóßÁöÑÂπ≤Êâ∞ */
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* 4. ‰∏ãÊñπÊ∞îÊ≥°ÔºöÂêåÊ†∑Â∑¶‰ΩéÂè≥È´ò (-3deg)Ôºå‰øùÊåÅÂπ≥Ë°å */
/* Ê†πÊçÆÂéüÂõæÔºåÂÆÉ‰ª¨ÊòØÂπ≥Ë°åÁöÑÔºåËøôÊ†∑ËßÜËßâ‰∏äÊúÄÊï¥ÈΩê */
.cphone-bubble-pill.bottom {
    align-self: center !important;  /* Âº∫Âà∂Â±Ö‰∏≠Ôºå‰∏çË¶ÅÈù†Âè≥ */
    transform: rotate(-3deg) !important; 
    
    margin-top: 0 !important;
    z-index: 1 !important;
    
    /* Ê∏ÖÈô§ÊóßÁöÑÂπ≤Êâ∞ */
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* 5. ‰øÆÂ§ç Dock Ê†èÊñáÂ≠óÊòæÁ§∫ */
.cphone-dock .app-icon .label {
    display: block !important;
    margin-top: 4px !important;
    font-size: 11px !important;
    font-weight: 500 !important;
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.6) !important;
    text-align: center !important;
}
/* --- CPhone Ê∞îÊ≥°ÔºöÂ±Ö‰∏≠ÂØπÈΩê + ÂèçÂêëÂÄæÊñú + Â¢ûÂä†Èó¥Ë∑ùÁâà --- */

/* 1. ÂÆπÂô®ÔºöÊéßÂà∂Êï¥‰ΩìÈó¥Ë∑ù */
.cphone-staggered-group {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important; /* ÂûÇÁõ¥Â±Ö‰∏≠ */
    width: 330px !important;
    margin: 0 auto !important;
    padding: 10px 0 !important;
    
    /* „ÄêÂÖ≥ÈîÆ‰øÆÊîπ 1„ÄëÂ¢ûÂä†Ê∞îÊ≥°‰πãÈó¥ÁöÑÁâ©ÁêÜÈó¥Ë∑ù */
    gap: 5px !important; 
}

/* 2. Ê∞îÊ≥°ÈÄöÁî®ËÆæÁΩÆ */
.cphone-bubble-pill {
    width: 100% !important;
    height: 60px !important;
    border-radius: 35px !important;
    box-sizing: border-box !important;
    transition: transform 0.3s ease !important;
    transform-origin: center center !important;
}

/* 3. ‰∏äÊñπÊ∞îÊ≥°ÔºöÂ∑¶‰ΩéÂè≥È´ò (-3deg) */
.cphone-bubble-pill.top {
    align-self: center !important;
    transform: rotate(-3deg) !important;
    
    /* „ÄêÂÖ≥ÈîÆ‰øÆÊîπ 2„ÄëÁßªÈô§Ë¥üËæπË∑ùÔºå‰∏çÂÜçÊå§Âéã */
    margin-bottom: 0 !important; 
    
    z-index: 2 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* 4. ‰∏ãÊñπÊ∞îÊ≥°ÔºöÂ∑¶È´òÂè≥‰Ωé (3deg) */
.cphone-bubble-pill.bottom {
    align-self: center !important;
    transform: rotate(3deg) !important; 
    
    margin-top: 0 !important;
    z-index: 1 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* 5. Á°Æ‰øùDockÊñáÂ≠óÊòæÁ§∫ */
.cphone-dock .app-icon .label {
    display: block !important;
}
/* --- CPhone ÂÖ®Â±ÄÂ∏ÉÂ±ÄË∞ÉÊï¥ÔºöÁ¥ßÂáëÁâà --- */

#cphone-layout-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    
    /* „ÄêÂÖ≥ÈîÆ‰øÆÊîπ„ÄëÂáèÂ∞èË°å‰∏éË°å‰πãÈó¥ÁöÑÈó¥Ë∑ù */
    /* ÂéüÊù•ÊòØ 35pxÔºåÁé∞Âú®Êîπ‰∏∫ 10pxÔºåÁ´ãÂàªÂèòÁ¥ßÂáë */
    gap: 35px !important; 
    
    /* È°∂ÈÉ®Á®çÂæÆÁïô‰∏ÄÁÇπÁÇπÂëºÂê∏Á©∫Èó¥ÔºåÈò≤Ê≠¢Ê∞îÊ≥°È°∂Âà∞ÂàòÊµ∑ */
    padding-top: 15px !important;
}

/* Á°Æ‰øùÈîôËêΩÊ∞îÊ≥°ÁªÑÊú¨Ë∫´Ê≤°ÊúâÂ§ö‰ΩôÁöÑÂ§ñÈÉ®ËæπË∑ù */
.cphone-staggered-group {
    margin-bottom: 0 !important;
    padding-bottom: 5px !important; /* Á®çÂæÆÂáèÂ∞è‰∏ÄÁÇπÂ∫ïÈÉ®ÂÜÖËæπË∑ù */
}

.cphone-dock-container {
    /* Ê†∏ÂøÉ‰øÆÊîπÔºöÁßªÈô§ env() ËÆ°ÁÆóÔºåÁõ¥Êé•‰ΩøÁî®Âõ∫ÂÆöÊï∞ÂÄº */
    /* 20px ÊòØÊØîËæÉÊ†áÂáÜÁöÑË∑ùÁ¶ªÔºåÂ¶ÇÊûúÊÇ®ÊÉ≥ËÆ©ÂÆÉÊõ¥Èù†‰∏ãÔºåÂèØ‰ª•Êîπ‰∏∫ 10px */
    margin-bottom: 20px !important;
    
    /* Á°Æ‰øùÊ≤°ÊúâÈ¢ùÂ§ñÁöÑÂ∫ïÈÉ®ÂÜÖËæπË∑ùÂπ≤Êâ∞ */
    padding-bottom: 0 !important;
    
    /* Á°Æ‰øùÂÆÉÊòØÈÄöËøá margin-top: auto Ë¢´Êé®Âà∞Â∫ïÈÉ®ÁöÑ (‰øùÊåÅÂéüÊúâÈÄªËæë) */
    margin-top: auto !important;
}

/* Â¶ÇÊûúÊÇ®ÂºÄÂêØ‰∫Ü„ÄêÊâãÊú∫Â§ñÊ°ÜÊ®°Âºè„ÄëÔºåÂèØËÉΩÈúÄË¶ÅÁ®çÂæÆÊä¨È´ò‰∏ÄÁÇπÁÇπÈò≤Ê≠¢Ë¥¥ËæπÂ§™Á¥ß */
body.frame-mode-active .cphone-dock-container {
    margin-bottom: 25px !important;
}
.nai-binding-checkbox {
    width: 20px;
    height: 20px;
    border: 2px solid #ccc;
    border-radius: 50%; /* ÂúÜÂΩ¢ */
    appearance: none;
    -webkit-appearance: none;
    transition: all 0.2s;
    position: relative;
    cursor: pointer;
}
.nai-binding-checkbox:checked {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}
.nai-binding-checkbox:checked::after {
    content: '‚úî';
    color: white;
    font-size: 12px;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
}
/* Âø´Êç∑ÂõûÂ§çÁÆ°ÁêÜÊ®°ÂºèÊ†∑Âºè */
.quick-reply-item {
    position: relative;
    transition: background-color 0.2s;
}

/* ÈöêËóèÁöÑÂ§çÈÄâÊ°Ü */
.quick-reply-checkbox {
    display: none;
    margin-right: 15px;
    width: 20px;
    height: 20px;
    border: 2px solid #ccc;
    border-radius: 50%;
    appearance: none;
    -webkit-appearance: none;
    flex-shrink: 0;
    position: relative;
}

.quick-reply-checkbox:checked {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
}

.quick-reply-checkbox:checked::after {
    content: '‚úî';
    color: white;
    font-size: 12px;
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
}

/* ÁÆ°ÁêÜÊ®°Âºè‰∏ãÊòæÁ§∫Â§çÈÄâÊ°Ü */
#quick-reply-list.management-mode .quick-reply-checkbox {
    display: block;
}

#quick-reply-list.management-mode .quick-reply-actions {
    display: none; /* ÁÆ°ÁêÜÊ®°Âºè‰∏ãÈöêËóèÂçïË°åÊìç‰ΩúÊåâÈíÆ */
}

/* ÈÄâ‰∏≠Áä∂ÊÄÅÈ´ò‰∫Æ */
.quick-reply-item.selected {
    background-color: rgba(0, 123, 255, 0.05);
}

/* ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode #quick-reply-action-bar {
    background-color: rgba(28, 28, 30, 0.95);
    border-top-color: #38383a;
    color: #fff;
}/* --- ÈöêËóèÂ±ÇÊ∂àÊÅØÊòæÂΩ¢Ê†∑Âºè (ÂÆåÁæé‰º™Ë£ÖÊàêÁ≥ªÁªüÊèêÁ§∫) --- */

/* 1. Â∏ÉÂ±ÄÈáçÁΩÆÔºöÂº∫Âà∂Â±Ö‰∏≠ */
.message-wrapper.hidden-revealed {
    justify-content: center !important;
    align-self: center !important;
    width: 100%;
    margin: 5px 0; /* ‰øùÊåÅÁ≥ªÁªüÊ∂àÊÅØÁöÑÈó¥Ë∑ù */
    padding: 0;
    border: none !important;
    background: transparent !important;
    flex-direction: row !important;
}

/* 2. ÈöêËóèÊó†ÂÖ≥ÂÖÉÁ¥† (Â§¥ÂÉè„ÄÅÂêçÂ≠ó„ÄÅÊó∂Èó¥„ÄÅÂºïÁî®„ÄÅÂ∞èÂ∞ñËßí) */
.message-wrapper.hidden-revealed .avatar-group,
.message-wrapper.hidden-revealed .sender-name,
.message-wrapper.hidden-revealed .timestamp,
.message-wrapper.hidden-revealed .quoted-message,
.message-wrapper.hidden-revealed .message-bubble::after, /* ÂéªÊéâÊ∞îÊ≥°Â∞ñËßí */
.message-wrapper.hidden-revealed .message-bubble::before {
    display: none !important;
}

/* 3. Â§ñÂ±ÇÊ∞îÊ≥°ÔºöÂèòÊàêÁÅ∞Ëâ≤Â∞èËÉ∂Âõä */
.message-wrapper.hidden-revealed .message-bubble {
    /* Ê†∏ÂøÉÂ§ñËßÇÔºöÊ®°‰ªøÁ≥ªÁªüÊ∂àÊÅØ */
    background-color: rgba(0, 0, 0, 0.1) !important; 
    color: #8a8a8a !important; /* ÁÅ∞Ëâ≤ÊñáÂ≠ó */
    font-size: 12px !important;
    padding: 4px 12px !important;
    border-radius: 10px !important;
    
    /* Â∏ÉÂ±ÄÈáçÁΩÆ */
    flex: initial !important; /* ‰∏çË¶ÅËá™Âä®‰º∏Áº© */
    min-width: auto !important;
    max-width: 85% !important;
    width: fit-content !important; /* ÂÆΩÂ∫¶ÈöèÂÜÖÂÆπ */
    display: inline-block !important;
    margin: 0 auto !important; /* Ëá™Ë∫´Â±Ö‰∏≠ */
    border: none !important;
    box-shadow: none !important;
    text-align: center;
}

/* 4. „ÄêÂÖ≥ÈîÆ‰øÆÂ§ç„ÄëÂΩªÂ∫ïÂâ•Á¶ªÂÜÖÈÉ® .content ÁöÑÊ†∑Âºè */
/* ËøôÂ∞±ÊòØÂØºËá¥‚ÄúËÉ∂ÂõäÈáåÊúâÊ∞îÊ≥°‚ÄùÁöÑÂÖÉÂá∂ÔºåÊàë‰ª¨ÊääÂÆÉÂèòÈÄèÊòé */
.message-wrapper.hidden-revealed .message-bubble .content {
    background-color: transparent !important; /* ÂéªÊéâÁôΩËâ≤ËÉåÊôØ */
    box-shadow: none !important;              /* ÂéªÊéâÈò¥ÂΩ± */
    border: none !important;
    padding: 0 !important;                    /* ÂéªÊéâÂÜÖËæπË∑ù */
    margin: 0 !important;
    
    /* Â≠ó‰ΩìÈáçÁΩÆ */
    color: inherit !important;                /* ÁªßÊâøÂ§ñÂ±ÇÁöÑÁÅ∞Ëâ≤ */
    font-size: inherit !important;            /* ÁªßÊâøÂ∞èÂ≠óÂè∑ */
    line-height: 1.4 !important;
    font-weight: normal !important;
    
    /* Â∏ÉÂ±Ä */
    display: inline !important;               /* ÂèòÊàêË°åÂÜÖÂÖÉÁ¥†ÔºåÁ¥ßË¥¥ÊñáÂ≠ó */
    width: auto !important;
    min-width: 0 !important;
}

/* 5. ÊöóÈªëÊ®°ÂºèÈÄÇÈÖç */
#phone-screen.dark-mode .message-wrapper.hidden-revealed .message-bubble {
    background-color: rgba(255, 255, 255, 0.15) !important; /* Ê∑±Ëâ≤‰∏ãÁöÑÂçäÈÄèÊòéÁôΩ */
    color: #8d8d92 !important; /* ÊµÖÁÅ∞Â≠ó */
}

/* ========== ‰∏ÄËµ∑ÁúãÁîµÂΩ±ÂäüËÉΩÊ†∑Âºè ========== */
#watch-together-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #000;
    display: none;
    z-index: 9000;
}

#watch-together-upload-modal,
#watch-together-url-modal,
#watch-together-settings-modal,
#watch-together-playlist-modal,
#watch-together-save-video-modal {
    z-index: 10000 !important;
}

/* Êí≠ÊîæÂàóË°®Ê†∑Âºè */
.playlist-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    transition: all 0.2s;
}

.playlist-item:hover {
    background-color: #f0f0f0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.playlist-item-info {
    flex: 1;
    min-width: 0;
}

.playlist-item-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 5px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.playlist-item-time {
    font-size: 12px;
    color: #999;
    margin-bottom: 3px;
}

.playlist-item-type {
    font-size: 12px;
    color: #667eea;
    font-weight: 500;
}

.playlist-item-actions {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
}

.playlist-play-btn,
.playlist-delete-btn {
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
}

.playlist-play-btn {
    background-color: #667eea;
    color: white;
}

.playlist-play-btn:hover {
    background-color: #5568d3;
    transform: translateY(-1px);
}

.playlist-delete-btn {
    background-color: #f5f5f5;
    color: #ff4757;
}

.playlist-delete-btn:hover {
    background-color: #ffecee;
    transform: translateY(-1px);
}

#watch-together-header button {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

#watch-together-header button:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* ========== ‰øÆÂ§çÔºöËßÇÂΩ±ÁïåÈù¢ÂºπÁ™óÂ±ÇÁ∫ßÂÖ®Èù¢‰ºòÂåñ ========== */

/* Ê∂àÊÅØÈïøÊåâËèúÂçïÂèäÊâÄÊúâÂäüËÉΩÂºπÁ™óÁöÑÂ±ÇÁ∫ßË¶ÅÈ´ò‰∫éËßÇÂΩ±ÁïåÈù¢ */
#message-actions-modal {
    z-index: 10100 !important;
}

/* ÊâÄÊúâÊ∂àÊÅØÊìç‰ΩúÁõ∏ÂÖ≥ÁöÑÂºπÁ™óÂ±ÇÁ∫ßÈÉΩË¶ÅÈ´ò‰∫éËßÇÂΩ±ÁïåÈù¢ */
#message-editor-modal,
#ai-response-editor-modal {
    z-index: 10100 !important;
}

/* ÂÖ∂‰ªñÂèØËÉΩÂú®ËßÇÂΩ±Êó∂Ëß¶ÂèëÁöÑÂºπÁ™ó‰πüÊèêÂçáÂ±ÇÁ∫ß */
#photo-viewer-modal {
    z-index: 10100 !important;
}

#character-profile-modal {
    z-index: 10100 !important;
}

#watch-together-modal.visible {
    display: block;
}

#watch-together-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    background-color: #000;
}

#watch-together-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    padding-top: calc(15px + env(safe-area-inset-top)); /* iOS ÂÆâÂÖ®Âå∫ÊîØÊåÅ */
    background-color: #1a1a1a;
    border-bottom: 1px solid #333;
    color: #fff;
}

#watch-together-header button {
    background: none;
    border: none;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    padding: 5px 10px;
}

#watch-together-header button:hover {
    background-color: #333;
    border-radius: 4px;
}

#watch-together-main {
    flex: 1;
    position: relative;
    display: flex;
    overflow: hidden;
}

#watch-together-video-container {
    flex: 1;
    position: relative;
    background-color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
}

#watch-together-video {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

#watch-together-placeholder {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #999;
    text-align: center;
    font-size: 16px;
}

#watch-together-chat-float {
    position: absolute;
    right: 20px;
    bottom: 20px;
    width: 350px;
    max-height: 500px;
    background-color: rgba(255, 255, 255, 0.95);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    overflow: hidden;
}

#watch-together-chat-float.minimized {
    max-height: 40px;
}

#watch-together-chat-float.minimized #watch-together-chat-messages,
#watch-together-chat-float.minimized #watch-together-chat-input-area {
    display: none;
}

#watch-together-chat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: #f5f5f5;
    border-bottom: 1px solid #e0e0e0;
    cursor: move;
}

#watch-together-chat-name {
    font-size: 14px;
    font-weight: 500;
    color: #333;
}

#watch-together-chat-toggle {
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    color: #666;
    padding: 0;
    width: 24px;
    height: 24px;
}

#watch-together-chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    background-color: #fff;
    max-height: 350px;
}

.watch-together-message {
    margin-bottom: 15px;
    display: flex;
    gap: 10px;
}

.watch-together-message.user {
    flex-direction: row-reverse;
}

.watch-together-message-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
}

.watch-together-message-content {
    max-width: 70%;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.4;
    word-wrap: break-word;
}

.watch-together-message.user .watch-together-message-content {
    background-color: #07c160;
    color: #fff;
}

.watch-together-message.assistant .watch-together-message-content {
    background-color: #f0f0f0;
    color: #333;
}

.watch-together-system-message {
    text-align: center;
    color: #999;
    font-size: 12px;
    margin: 10px 0;
}

#watch-together-chat-input-area {
    display: flex;
    gap: 8px;
    padding: 10px 15px;
    background-color: #f5f5f5;
    border-top: 1px solid #e0e0e0;
}

#watch-together-chat-input {
    flex: 1;
    padding: 8px 10px;
    border: 1px solid #d0d0d0;
    border-radius: 4px;
    resize: none;
    font-size: 14px;
    outline: none;
    max-height: 80px;
}

#watch-together-call-api-btn {
    padding: 8px 15px;
    background-color: #576b95;
    border: none;
    border-radius: 4px;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
    white-space: nowrap;
}

#watch-together-call-api-btn:hover {
    background-color: #4a5b82;
}

#watch-together-call-api-btn:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

#watch-together-chat-send {
    padding: 8px 15px;
    background-color: #07c160;
    border: none;
    border-radius: 4px;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
    white-space: nowrap;
}

#watch-together-chat-send:hover {
    background-color: #06ad56;
}

#watch-together-chat-send:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

/* ========== ÁúüÂøÉËØùÊÇ¨ÊµÆÁêÉÊ†∑Âºè ========== */
#truth-game-float-ball {
    position: fixed;
    bottom: 80px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 9999;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s ease;
    overflow: hidden;
    border: 3px solid #fff;
}

#truth-game-float-ball:hover {
    transform: scale(1.1);
}

#truth-game-float-ball:active {
    transform: scale(0.95);
}

#truth-game-float-avatar {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

#truth-game-float-indicator {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 16px;
    height: 16px;
    background-color: #ff4444;
    border-radius: 50%;
    border: 2px solid #fff;
    display: none;
    animation: pulse-indicator 1.5s ease-in-out infinite;
}

#truth-game-float-indicator.active {
    display: block;
}

@keyframes pulse-indicator {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.2);
        opacity: 0.7;
    }
}

/* ÁúüÂøÉËØùmodalÊúÄÂ∞èÂåñÊó∂ÈöêËóè */
#truth-game-modal.minimized {
    display: none !important;
}

/* ========== ÁúüÂøÉËØùÊ∏∏ÊàèÁßªÂä®Á´ØÈÄÇÈÖç ========== */
/* Ê°åÈù¢Á´Ø‰ºòÂåñ */
@media (min-width: 769px) {
    #truth-game-buttons {
        flex: 0 1 auto !important;
    }
    
    #truth-input {
        flex: 1 1 auto !important;
    }
}

/* Âπ≥ÊùøÂíåÂ∞èÂ±èÂπïÈÄÇÈÖç */
@media (max-width: 768px) {
    /* ÁúüÂøÉËØùÂØπËØùÊ°ÜÂÆΩÂ∫¶ÈÄÇÈÖç */
    #truth-game-modal .modal-content {
        max-width: 100% !important;
        margin: 0 10px !important;
        height: 88vh !important;
    }
    
    /* ËæìÂÖ•Âå∫ÂüüÂÆπÂô® */
    #truth-game-input-area {
        padding: 10px 12px !important;
    }
    
    /* ËæìÂÖ•Ê°Ü */
    #truth-input {
        font-size: 15px !important;
        padding: 10px !important;
        min-height: 42px !important;
        margin-bottom: 8px !important;
    }
    
    /* ÊåâÈíÆÁªÑ */
    #truth-game-buttons {
        gap: 8px !important;
    }
    
    /* ‰∏â‰∏™ÊåâÈíÆ */
    #truth-start-game-btn,
    #truth-call-api-btn,
    #truth-send-btn {
        padding: 10px 10px !important;
        font-size: 14px !important;
        min-height: 42px !important;
    }
}

/* ÊâãÊú∫Á´ñÂ±èÈÄÇÈÖç */
@media (max-width: 480px) {
    /* ÁúüÂøÉËØùÂØπËØùÊ°ÜÂç†Êª°Â±èÂπï */
    #truth-game-modal .modal-content {
        max-width: 100% !important;
        margin: 0 !important;
        height: 100vh !important;
        border-radius: 0 !important;
    }
    
    /* ËæìÂÖ•Âå∫ÂüüÊõ¥Á¥ßÂáë */
    #truth-game-input-area {
        padding: 8px 10px !important;
    }
    
    /* ËæìÂÖ•Ê°Ü */
    #truth-input {
        font-size: 14px !important;
        padding: 8px 10px !important;
        min-height: 38px !important;
        margin-bottom: 8px !important;
    }
    
    /* ÊåâÈíÆÁªÑ */
    #truth-game-buttons {
        gap: 6px !important;
    }
    
    /* ‰∏â‰∏™ÊåâÈíÆÂùáÂàÜÂÆΩÂ∫¶Âπ∂‰ºòÂåñÈó¥Ë∑ù */
    #truth-start-game-btn,
    #truth-call-api-btn,
    #truth-send-btn {
        padding: 9px 6px !important;
        font-size: 13px !important;
        min-height: 38px !important;
        flex: 1 1 0 !important;
    }
}

/* Ë∂ÖÂ∞èÂ±èÂπïÈÄÇÈÖç */
@media (max-width: 360px) {
    /* ËæìÂÖ•Âå∫Âüü */
    #truth-game-input-area {
        padding: 6px 8px !important;
    }
    
    /* ËæìÂÖ•Ê°Ü */
    #truth-input {
        font-size: 13px !important;
        padding: 7px 8px !important;
        min-height: 36px !important;
    }
    
    /* ÊåâÈíÆÁªÑ */
    #truth-game-buttons {
        gap: 5px !important;
    }
    
    /* ‰∏â‰∏™ÊåâÈíÆ */
    #truth-start-game-btn,
    #truth-call-api-btn,
    #truth-send-btn {
        font-size: 12px !important;
        padding: 8px 4px !important;
        min-height: 36px !important;
    }
}

/* ========================================= */
/* ‚ñº‚ñº‚ñº ‰Ω†ÁîªÊàëÁåúAppÊ†∑Âºè ‚ñº‚ñº‚ñº */
/* ========================================= */

#draw-guess-screen {
    background-color: #f0f2f5;
}
#phone-screen.dark-mode #draw-guess-screen {
    background-color: #000000;
}

#draw-guess-content {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: 15px;
    gap: 15px;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
}

#draw-guess-interactive-area {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.player-avatars-container {
    display: flex;
    justify-content: space-around;
    padding: 0 40px;
}

.player-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.player-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--border-color);
}

.player-name {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-primary);
}

#draw-guess-dialogue-box {
    height: 80px;
    background-color: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 10px;
    overflow-y: auto;
    font-size: 14px;
    color: var(--text-secondary);
}

#draw-guess-dialogue-box:empty::before {
    content: attr(data-placeholder);
    color: var(--text-secondary);
    font-style: italic;
    animation: typing-pulse 1.5s infinite;
}

.draw-guess-input-area {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

#draw-guess-action-bar {
    display: flex;
    justify-content: space-around;
    gap: 10px;
}

#draw-guess-action-bar .action-bar-btn {
    background: none;
    border: 1px solid var(--accent-color);
    color: var(--accent-color);
    padding: 5px 15px;
    border-radius: 15px;
    font-size: 13px;
    cursor: pointer;
}

.draw-guess-input-row {
    display: flex;
    gap: 8px;
}

#draw-guess-input {
    flex-grow: 1;
    border: 1px solid var(--border-color);
    background-color: var(--secondary-bg);
    border-radius: 6px;
    padding: 0 12px;
    font-size: 15px;
    outline: none;
}

#draw-guess-send-btn {
    flex-shrink: 0;
    padding: 8px 18px;
    border: none;
    background-color: var(--accent-color);
    color: white;
    border-radius: 6px;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
}

#draw-guess-main-area {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

#draw-guess-welcome-text {
    text-align: center;
    color: var(--text-secondary);
    line-height: 1.6;
}

#draw-guess-studio {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

#draw-guess-studio #drawing-canvas {
    display: block;
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    width: 100%;
    height: auto;
    aspect-ratio: 4 / 3;
    max-width: 400px;
}

#drawing-canvas.active {
    cursor: crosshair !important;
}

#draw-guess-tool-bar {
    width: 100%;
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
    padding: 10px 0;
}

.drawing-tools.left {
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
}

.game-controls-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.color-palette {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}

.color-dot {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.2s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.color-dot.active {
    transform: scale(1.2);
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.tool-buttons {
    display: flex;
    gap: 8px;
}

.tool-btn {
    background-color: #f0f2f5;
    border: 1px solid #dcdcdc;
    border-radius: 6px;
    padding: 6px 12px;
    font-size: 13px;
    cursor: pointer;
}

.tool-btn.active {
    background-color: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
}

.game-control-btn {
    background-color: #fff;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 8px 15px;
    font-size: 14px;
    color: var(--text-primary);
    cursor: pointer;
}

#draw-guess-bottom-bar {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
}

#draw-guess-bottom-bar .form-button {
    background-color: var(--accent-color);
    border-radius: 22px;
    height: 44px;
    font-size: 16px;
}

.custom-color-picker {
    position: relative;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    cursor: pointer;
    background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    border: 2px solid white;
    outline: 1px solid #ccc;
}

.custom-color-picker input[type="color"] {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
}

#brush-settings {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 10px;
    padding: 10px;
    background-color: var(--secondary-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}

#brush-settings label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 4px;
    display: block;
}

#brush-settings select {
    width: 100%;
    padding: 5px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--secondary-bg);
    color: var(--text-primary);
}

.size-control {
    display: flex;
    flex-direction: column;
}

.size-control input[type="range"] {
    width: 100%;
}

.size-control input[type="number"] {
    margin-top: 5px;
    width: 100%;
    text-align: center;
    padding: 4px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--secondary-bg);
    color: var(--text-primary);
}

/* ‚ñ≤‚ñ≤‚ñ≤ ‰Ω†ÁîªÊàëÁåúÊ†∑ÂºèÁªìÊùü ‚ñ≤‚ñ≤‚ñ≤ */


